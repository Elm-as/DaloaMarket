import{r as a,j as e,u as T,a as Y,H as Ze,S as be,P as He,M as Ne,U as Z,C as $e,b as Xe,L as Te,c as L,d as fe,e as Ke,f as qe,g as ue,h as me,i as we,E as Pe,N as de,Z as Ye,k as Oe,l as ae,m as es,n as _,A,T as ss,o as ts,p as rs,q as as,s as pe,t as ze,v as ke,w as ls,x as ne,y as Se,z as Be,B as is,D as ns,F as os,G as Ie,I as cs,X as ge,J as Ee,K as Ce,R as he,O as ds,Q as ms,V as xs,W as us,Y as hs,_ as D,$ as ps,a0 as gs,a1 as bs}from"./vendor_react-3yBRJtLC.js";import{c as Re}from"./vendor_supabase-Cgz8N9iv.js";import{t as fs,o as js}from"./vendor_misc-CKUrDAjC.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function m(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=m(t);fetch(t.href,n)}})();const We="https://exnxmwkrgyidlauqmtuh.supabase.co",ys="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV4bnhtd2tyZ3lpZGxhdXFtdHVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNjY1MjYsImV4cCI6MjA2Mzk0MjUyNn0.PgHDefYstXTOZuQEt4bhZX64glhaaXDjuYoDvJL3Nmw",vs=s=>{try{return new URL(s),!0}catch{return!1}},Fe=vs(We);Fe||(console.warn("âš ï¸ Supabase not configured properly. Please update your .env file with actual Supabase credentials."),console.warn("Instructions:"),console.warn("1. Go to https://supabase.com and create a project"),console.warn("2. Go to Settings â†’ API in your Supabase dashboard"),console.warn("3. Copy your Project URL and anon key to the .env file"),console.warn("4. Restart your development server"));const k=Fe?Re(We,ys):Re("https://placeholder.supabase.co","placeholder-key"),Q=Fe,Qe=a.createContext(void 0),Ns=({children:s})=>{const[r,m]=a.useState(null),[i,t]=a.useState(null),[n,d]=a.useState(null),[h,x]=a.useState(!0);a.useEffect(()=>{if(!Q){x(!1);return}const{data:{subscription:w}}=k.auth.onAuthStateChange((u,q)=>{m(q),t((q==null?void 0:q.user)??null),q!=null&&q.user?f(q.user.id):d(null)});return p(),()=>{w.unsubscribe()}},[]);const p=async()=>{if(!Q){x(!1);return}try{const{data:{session:w}}=await k.auth.getSession();m(w),t((w==null?void 0:w.user)??null),w!=null&&w.user&&await f(w.user.id)}catch(w){console.error("Error checking session:",w)}finally{x(!1)}},f=async w=>{if(!Q){console.warn("Supabase not configured - cannot fetch user profile");return}try{const{data:u,error:q}=await k.from("users").select("*").eq("id",w).maybeSingle();if(q)throw q;d(u)}catch(u){console.error("Error fetching user profile:",u),d(null)}},E={session:r,user:i,userProfile:n,signUp:async(w,u)=>{if(!Q)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{const{error:q}=await k.auth.signUp({email:w,password:u});return{error:q}}catch(q){return{error:q}}},signIn:async(w,u)=>{if(!Q)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{const{error:q}=await k.auth.signInWithPassword({email:w,password:u});return{error:q}}catch(q){return{error:q}}},signOut:async()=>{if(!Q)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{const{error:w}=await k.auth.signOut();return{error:w}}catch(w){return{error:w}}},createUserProfile:async w=>{if(!Q)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{if(!i)return{error:new Error("User not authenticated")};const{error:u}=await k.from("users").insert({...w,id:i.id});return u||await f(i.id),{error:u}}catch(u){return{error:u}}},updateUserProfile:async w=>{if(!Q)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{if(!i)return{error:new Error("User not authenticated")};const{error:u}=await k.from("users").update(w).eq("id",i.id);return u||await f(i.id),{error:u}}catch(u){return{error:u}}},refreshUserProfile:async()=>{i&&Q&&await f(i.id)}};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsx(Qe.Provider,{value:E,children:s})},Me=()=>{const s=a.useContext(Qe);if(s===void 0)throw new Error("useSupabase must be used within a SupabaseProvider");return s},O=Me,ws=({onClose:s})=>{const{user:r,signOut:m,userProfile:i}=O(),t=T(),n=Y(),d=async()=>{await m(),s(),t("/")},h=p=>{t(p),s()},x=p=>n.pathname===p;return e.jsxs("div",{className:"fixed inset-0 z-40 flex flex-col justify-end items-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-md mx-auto bottom-0 z-50 bg-white rounded-3xl shadow-2xl border-t border-primary-100 animate-slide-up overflow-hidden",children:[e.jsx("button",{onClick:s,className:"absolute top-3 right-3 p-2 rounded-full bg-white/80 shadow hover:bg-grey-100 transition z-50","aria-label":"Fermer le menu",children:e.jsx("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"grid grid-cols-5 gap-1 px-2 py-3",children:[e.jsxs("button",{onClick:()=>h("/"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all ${x("/")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(Ze,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Accueil"})]}),e.jsxs("button",{onClick:()=>h("/search"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all ${x("/search")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(be,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Recherche"})]}),e.jsxs("button",{onClick:()=>h("/create-listing"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all border-2 border-blue-200 shadow-xl scale-110 transform hover:scale-105 bg-gradient-to-br from-blue-500 to-blue-700 text-white ${x("/create-listing")?"ring-2 ring-blue-400":""}`,style:{zIndex:2},children:[e.jsx(He,{className:"h-7 w-7 mb-1"}),e.jsx("span",{className:"text-xs font-bold",children:"Vendre"})]}),e.jsxs("button",{onClick:()=>h("/messages"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all relative ${x("/messages")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(Ne,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Messages"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-error-500 rounded-full border-2 border-white"})]}),e.jsxs("button",{onClick:()=>h("/profile"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all ${x("/profile")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(Z,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Profil"})]})]}),r&&e.jsx("div",{className:"border-t border-grey-100 px-5 py-4 bg-gradient-to-r from-primary-50 to-orange-50",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>h("/acheter-credits"),className:"flex flex-col items-center py-2 px-3 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200 hover:from-blue-100 hover:to-blue-200 transition-all",children:[e.jsx($e,{className:"h-4 w-4 text-blue-600 mb-1"}),e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"CrÃ©dits"})]}),e.jsxs("button",{onClick:()=>h("/settings"),className:"flex flex-col items-center py-2 px-3 bg-gradient-to-br from-grey-50 to-grey-100 rounded-lg border border-grey-200 hover:from-grey-100 hover:to-grey-200 transition-all",children:[e.jsx(Xe,{className:"h-4 w-4 text-grey-600 mb-1"}),e.jsx("span",{className:"text-xs font-medium text-grey-700",children:"RÃ©glages"})]}),e.jsxs("button",{onClick:d,className:"flex flex-col items-center py-2 px-3 bg-gradient-to-br from-red-50 to-red-100 rounded-lg border border-red-200 hover:from-red-100 hover:to-red-200 transition-all",children:[e.jsx(Te,{className:"h-4 w-4 text-red-600 mb-1"}),e.jsx("span",{className:"text-xs font-medium text-red-700",children:"Sortir"})]})]})})]})]})},Ss=()=>e.jsx("span",{className:"text-xs bg-gradient-to-r from-orange-500 to-orange-600 text-white px-2 py-0.5 rounded-full font-bold",children:"BÃŠTA"}),Cs=()=>{const[s,r]=a.useState(!1),[m,i]=a.useState(""),{user:t}=O(),n=T(),d=x=>{x.preventDefault(),m.trim()&&n(`/search?q=${encodeURIComponent(m.trim())}`)},h=()=>{r(!s)};return e.jsxs("header",{className:"sticky top-0 z-50 shadow-lg border-b border-grey-100 bg-white/90 md:bg-white/95 backdrop-blur-md",children:[e.jsxs("div",{className:"container-custom py-0 sm:py-3 lg:py-4",children:[e.jsxs("div",{className:"flex items-center justify-between md:justify-between",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center",children:e.jsxs(L,{to:"/",className:"flex items-center group flex-shrink-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-8 sm:w-8 lg:h-10 lg:w-10 bg-gradient-to-br from-primary to-primary-600 rounded-xl flex items-center justify-center mr-2 group-hover:scale-105 transition-transform shadow-md",children:e.jsx(fe,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-white"})}),e.jsx("span",{className:"text-lg lg:text-xl font-bold text-grey-900 leading-none",children:"DaloaMarket"}),e.jsx("div",{className:"scale-75 sm:scale-100 origin-left ml-1",children:e.jsx(Ss,{})})]})}),e.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-4 lg:mx-8",children:e.jsxs("form",{onSubmit:d,className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un produit...",className:"w-full py-2 lg:py-2.5 pl-9 lg:pl-10 pr-3 lg:pr-4 rounded-lg lg:rounded-xl border border-grey-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-grey-50 focus:bg-white transition-all text-sm lg:text-base",value:m,onChange:x=>i(x.target.value)}),e.jsx(be,{className:"absolute left-2.5 lg:left-3 top-2 lg:top-2.5 h-4 w-4 lg:h-5 lg:w-5 text-grey-400"}),e.jsx("button",{type:"submit",className:"absolute right-1 lg:right-1.5 top-0.5 lg:top-1 bg-primary text-white py-1.5 lg:py-2 px-2.5 lg:px-3 rounded-md lg:rounded-lg hover:bg-primary-600 transition-colors font-medium text-xs lg:text-sm",children:"Rechercher"})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[e.jsx(L,{to:"/search",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Rechercher",children:e.jsx(be,{className:"h-5 w-5 lg:h-6 lg:w-6"})}),e.jsx(L,{to:"/about",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Ã€ propos",children:"Ã€ propos"}),e.jsx(L,{to:"/help",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Aide & Support",children:"Aide"}),e.jsx(L,{to:"/messages",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all relative touch-target",title:"Messages",children:e.jsx(Ne,{className:"h-5 w-5 lg:h-6 lg:w-6"})}),t?e.jsx(L,{to:"/profile",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Mon profil",children:e.jsx(Z,{className:"h-5 w-5 lg:h-6 lg:w-6"})}):e.jsx(L,{to:"/login",className:"btn-outline py-2 px-3 lg:py-2 lg:px-4 ml-2 text-xs lg:text-sm",children:"Connexion"}),e.jsx(L,{to:"/create-listing",className:"btn-primary py-2 lg:py-2.5 px-3 lg:px-4 ml-2 font-semibold text-xs lg:text-sm",children:"Vendre"})]}),e.jsx("button",{className:"md:hidden p-2 rounded-full bg-white/80 shadow-md text-grey-700 hover:bg-primary-50 transition-colors touch-target flex-shrink-0 ml-2",onClick:h,"aria-label":s?"Fermer le menu":"Ouvrir le menu",children:e.jsx(Ke,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"mt-2 md:hidden",children:e.jsxs("form",{onSubmit:d,className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un produit...",className:"w-full py-2.5 pl-9 pr-3 rounded-lg border border-grey-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white/80 focus:bg-white transition-all text-sm shadow-sm",value:m,onChange:x=>i(x.target.value)}),e.jsx(be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-grey-400"}),e.jsx("button",{type:"submit",className:"absolute right-1.5 top-1 bg-primary text-white py-1.5 px-3 rounded-md hover:bg-primary-600 transition-colors text-xs font-medium",children:"Rechercher"})]})})]}),s&&e.jsx(ws,{onClose:h})]})},ks=()=>e.jsx("footer",{className:"bg-gradient-to-br from-grey-900 to-grey-800 text-white mt-auto",children:e.jsxs("div",{className:"container-custom py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[e.jsxs(L,{to:"/",className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-primary to-primary-600 rounded-xl flex items-center justify-center mr-3",children:e.jsx(fe,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold",children:"DaloaMarket"})]}),e.jsx("p",{className:"text-grey-300 leading-relaxed mb-4",children:"La premiÃ¨re marketplace P2P de Daloa. Achetez et vendez facilement depuis chez vous."}),e.jsxs("div",{className:"flex items-center text-sm text-grey-400",children:[e.jsx(qe,{className:"h-4 w-4 mr-2 text-primary"}),"Fait Ã  Daloa pour Daloa"]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6 text-primary-100",children:"Liens rapides"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(L,{to:"/",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Accueil"})})}),e.jsx("li",{children:e.jsx(L,{to:"/search",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Rechercher"})})}),e.jsx("li",{children:e.jsx(L,{to:"/create-listing",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Vendre un article"})})}),e.jsx("li",{children:e.jsx(L,{to:"/profile",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Mon compte"})})})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6 text-primary-100",children:"CatÃ©gories"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(L,{to:"/search?category=fashion",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Mode & Accessoires"})})}),e.jsx("li",{children:e.jsx(L,{to:"/search?category=electronics",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Ã‰lectronique"})})}),e.jsx("li",{children:e.jsx(L,{to:"/search?category=home",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Maison & Jardin"})})}),e.jsx("li",{children:e.jsx(L,{to:"/search?category=vehicles",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Auto & Moto"})})})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6 text-primary-100",children:"Contact"}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start group",children:[e.jsx(ue,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-grey-300 group-hover:text-white transition-colors",children:"Daloa, CÃ´te d'Ivoire"})]}),e.jsxs("li",{className:"flex items-center group",children:[e.jsx(me,{className:"h-5 w-5 text-primary mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("a",{href:"tel:+2250788000831",className:"text-grey-300 hover:text-primary transition-colors",children:"+225 07 88 00 08 31"}),e.jsx("a",{href:"tel:+2250555863953",className:"text-grey-300 hover:text-primary transition-colors text-sm",children:"+225 05 55 86 39 53"})]})]}),e.jsxs("li",{className:"flex items-center group",children:[e.jsx(we,{className:"h-5 w-5 text-primary mr-3 flex-shrink-0"}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-grey-300 hover:text-primary transition-colors",children:"support@daloamarket.shop"})]})]})]})]}),e.jsx("div",{className:"border-t border-grey-700 mt-12 pt-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsxs("p",{className:"text-grey-400 text-sm mb-2",children:["Â© ",new Date().getFullYear()," DaloaMarket. Tous droits rÃ©servÃ©s."]}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500/20 to-orange-600/20 border border-orange-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-orange-300 leading-relaxed",children:["âš ï¸ ",e.jsx("strong",{children:"Version BÃªta"})," - Projet Ã©tudiant en dÃ©veloppement. Aucune structure juridique formelle n'a encore Ã©tÃ© crÃ©Ã©e."]})})]}),e.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-end gap-6",children:[e.jsxs(L,{to:"/terms",className:"text-grey-400 hover:text-primary text-sm transition-colors flex items-center",children:["Conditions d'utilisation",e.jsx(Pe,{className:"h-3 w-3 ml-1"})]}),e.jsxs(L,{to:"/privacy",className:"text-grey-400 hover:text-primary text-sm transition-colors flex items-center",children:["ConfidentialitÃ©",e.jsx(Pe,{className:"h-3 w-3 ml-1"})]}),e.jsxs(L,{to:"/help",className:"text-grey-400 hover:text-primary text-sm transition-colors flex items-center",children:["Aide",e.jsx(Pe,{className:"h-3 w-3 ml-1"})]})]})]})})]})}),R=({children:s})=>{const r=Y();return a.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[r.pathname]),e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(Cs,{}),e.jsx("main",{className:"flex-grow",children:s}),e.jsx(ks,{})]})},ie=({children:s,requireProfile:r=!1})=>{const{user:m,userProfile:i}=O(),t=Y();return m?r&&!i?e.jsx(de,{to:"/complete-profile\\",state:{from:t},replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(de,{to:"/login\\",state:{from:t},replace:!0})};function _s(...s){return fs(js(s))}const je=s=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),xe=s=>{const r=new Date(s);return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(r)},Ps=s=>{if(!s)return"";const r=s.replace(/\D/g,"");return r.startsWith("225")&&r.length===13?`+${r.slice(0,3)} ${r.slice(3,5)} ${r.slice(5,8)} ${r.slice(8,10)} ${r.slice(10)}`:r.length===10?`+225 ${r.slice(0,2)} ${r.slice(2,5)} ${r.slice(5,7)} ${r.slice(7)}`:s},Ge=s=>{const r=s.replace(/\D/g,"");return r.startsWith("225")?r.length===13:r.length===10},Ls=s=>({new:"Neuf",like_new:"TrÃ¨s bon Ã©tat",good:"Bon Ã©tat",used:"UsagÃ©"})[s]||s,qs=s=>({fashion:"Mode & Accessoires",electronics:"Ã‰lectronique & High-tech",home:"Maison & Jardin",vehicles:"Auto & Moto",sports:"Sports & Loisirs",books:"Livres & Culture"})[s]||s,_e=["Abattoir 1","Abattoir 2 (Sud B)","Aviation","BaoulÃ©","Belleville","Bribouo","CAFOP","Commerce","Dalolabia","Dioulabougou","Gbeuliville","Gbokora","GbobÃ©lÃ©","Huberson","Kennedy 1","Kennedy 2","Kirman","Lobia","Marais","Orly 1","Piscine","Sapia","Soleil 1","Soleil 2","Sud A","Tagoura","Tazibouo","Tazibouo Piscine","Zakoua"],ye=[{id:"fashion",label:"Mode & Accessoires"},{id:"electronics",label:"Ã‰lectronique & High-tech"},{id:"home",label:"Maison & Jardin"},{id:"vehicles",label:"Auto & Moto"},{id:"sports",label:"Sports & Loisirs"},{id:"books",label:"Livres & Culture"}],Ae=[{id:"new",label:"Neuf"},{id:"like_new",label:"TrÃ¨s bon Ã©tat"},{id:"good",label:"Bon Ã©tat"},{id:"used",label:"UsagÃ©"}],ve=({listing:s,onPress:r,sellerName:m,sellerRating:i})=>{const t=s.photos&&s.photos.length>0?s.photos[0]:"https://images.pexels.com/photos/4386321/pexels-photo-4386321.jpeg?auto=compress&cs=tinysrgb&w=400",n=s.boosted_until&&new Date(s.boosted_until)>new Date,d=()=>e.jsxs("div",{className:"group block bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border border-grey-100 hover:border-primary-200 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-grey-100",children:[e.jsx("img",{src:t,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}),n&&e.jsxs("div",{className:"absolute top-1.5 sm:top-2 lg:top-3 left-1.5 sm:left-2 lg:left-3 bg-gradient-to-r from-primary to-primary-600 text-white text-xs font-bold px-1.5 sm:px-2 lg:px-3 py-0.5 sm:py-1 lg:py-1.5 rounded-full flex items-center shadow-lg",children:[e.jsx(Ye,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 mr-0.5 sm:mr-1 fill-current"}),e.jsx("span",{className:"hidden sm:inline",children:"SponsorisÃ©"}),e.jsx("span",{className:"sm:hidden",children:"Boost"})]}),s.status==="sold"&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("span",{className:"bg-error-600 text-white px-2 sm:px-3 lg:px-4 py-1 sm:py-1.5 lg:py-2 rounded-full font-bold text-xs sm:text-sm",children:"VENDU"})}),s.photos&&s.photos.length>1&&e.jsx("div",{className:"absolute top-1.5 sm:top-2 lg:top-3 right-1.5 sm:right-2 lg:right-3 bg-black bg-opacity-60 text-white text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full",children:s.photos.length})]}),e.jsxs("div",{className:"p-2.5 sm:p-3 lg:p-4 space-y-1.5 sm:space-y-2 lg:space-y-3",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-1.5 lg:space-y-2",children:[e.jsx("h3",{className:"font-semibold text-grey-900 line-clamp-2 text-xs sm:text-sm lg:text-base leading-tight group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-primary",children:je(s.price)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-grey-600",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[e.jsx(ue,{className:"h-3 w-3 mr-1 text-grey-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.district})]}),e.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1 text-grey-400"}),e.jsx("span",{className:"text-xs",children:xe(s.created_at)})]})]}),m&&e.jsxs("div",{className:"flex items-center justify-between pt-1.5 sm:pt-2 border-t border-grey-100",children:[e.jsx("span",{className:"text-xs text-grey-800  font-semibold truncate flex-1",title:`Voir l'annonce de ${m}`,children:m}),i&&e.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[e.jsx(ae,{className:"h-3 w-3 text-primary fill-current"}),e.jsx("span",{className:"text-xs font-medium ml-0.5",children:i.toFixed(1)})]})]})]})]});return r?e.jsx("button",{onClick:r,className:"w-full text-left",children:e.jsx(d,{})}):e.jsx(L,{to:`/listings/${s.id}`,children:e.jsx(d,{})})},zs={small:"h-4 w-4",medium:"h-6 w-6",large:"h-12 w-12"},Es={primary:"text-primary",white:"text-white",grey:"text-grey-400"},V=({size:s="medium",color:r="primary",className:m})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(es,{className:_s("animate-spin",zs[s],Es[r],m)})}),As=()=>{const[s,r]=a.useState([]),[m,i]=a.useState(!0),{userProfile:t,user:n}=O(),[d,h]=a.useState(null);return a.useEffect(()=>{(async()=>{if(!Q){i(!1);return}try{const{data:p,error:f}=await k.from("listings").select(`
            *,
            users:user_id (
              full_name,
              rating
            )
          `).eq("status","active").order("created_at",{ascending:!1}).limit(8);if(f)throw f;const b=p.map(g=>{var j,v;return{...g,seller_name:((j=g.users)==null?void 0:j.full_name)||"Utilisateur",seller_rating:((v=g.users)==null?void 0:v.rating)||null}});r(b)}catch(p){console.error("Error fetching listings:",p)}finally{i(!1)}})()},[]),a.useEffect(()=>{(async()=>{if(!(n!=null&&n.id)||!Q){h(null);return}const{data:p,error:f}=await k.from("user_credits").select("credits").eq("user_id",n.id).single();h(f?null:(p==null?void 0:p.credits)??0)})()},[n]),a.useEffect(()=>{localStorage.getItem("credit_purchase_pending")&&(_.success("CrÃ©dits ajoutÃ©s Ã  votre compte !"),localStorage.removeItem("credit_purchase_pending"))},[]),Q?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100 text-base",children:[e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-primary-600 via-primary to-primary-400 py-8 px-2 sm:py-12",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative section-padding",children:e.jsxs("div",{className:"responsive-container text-center",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-extrabold text-white mb-4 sm:mb-6 lg:mb-8 leading-tight",children:["Achetez et vendez",e.jsx("span",{className:"block text-primary-100",children:"Ã  Daloa"})]}),e.jsx("p",{className:"text-white text-base sm:text-lg lg:text-xl opacity-95 mb-6 sm:mb-8 lg:mb-10 leading-relaxed px-2",children:"La premiÃ¨re marketplace P2P de Daloa. Achetez et vendez simplement, sans boost ni paiement automatique. Les crÃ©dits servent uniquement Ã  publier des annonces."}),t&&(!t.full_name||!t.phone||!t.district)&&e.jsxs("div",{className:"mb-4 sm:mb-6 lg:mb-8 p-2.5 sm:p-3 lg:p-4 bg-warning-100 border border-warning-300 rounded-lg lg:rounded-xl max-w-xs sm:max-w-sm mx-auto",children:[e.jsx("p",{className:"text-warning-800 font-medium mb-2 text-base sm:text-lg lg:text-xl",children:"Profil incomplet"}),e.jsx(L,{to:"/complete-profile",className:"btn-primary bg-warning-600 hover:bg-warning-700 border-warning-600 text-base sm:text-lg lg:text-xl py-2 lg:py-3",children:"ComplÃ©ter mon profil"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 lg:gap-6 justify-center max-w-xs sm:max-w-md mx-auto",children:[e.jsx(L,{to:"/search",className:"btn-secondary bg-white text-primary hover:bg-grey-100 flex-1 py-3 sm:py-4 lg:py-5 text-base sm:text-lg lg:text-xl font-semibold",children:"Parcourir"}),e.jsx(L,{to:"/create-listing",className:"btn-primary bg-secondary hover:bg-secondary-600 flex-1 py-3 sm:py-4 lg:py-5 text-base sm:text-lg lg:text-xl font-semibold",children:"Vendre"})]})]})}),e.jsx("div",{className:"absolute top-5 left-5 w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 bg-white opacity-10 rounded-full"}),e.jsx("div",{className:"absolute bottom-5 right-5 w-12 h-12 sm:w-16 sm:h-16 lg:w-24 lg:h-24 bg-white opacity-5 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-6 h-6 sm:w-8 sm:h-8 lg:w-12 lg:h-12 bg-white opacity-10 rounded-full"})]}),e.jsx("section",{className:"section-padding pt-8 pb-8",children:e.jsx("div",{className:"responsive-container",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 lg:gap-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center bg-white rounded-lg shadow-sm p-2 sm:p-3 lg:p-4 border border-grey-100 flex flex-col items-center",children:[e.jsx("div",{className:"w-7 h-7 sm:w-9 sm:h-9 lg:w-10 lg:h-10 bg-primary-100 rounded-lg flex items-center justify-center mb-1",children:e.jsx(ss,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-primary"})}),e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-grey-900 mb-0.5",children:"500+"}),e.jsx("p",{className:"text-grey-600 text-xs sm:text-sm lg:text-base leading-tight",children:"Annonces publiÃ©es"})]}),e.jsxs("div",{className:"text-center bg-white rounded-lg shadow-sm p-2 sm:p-3 lg:p-4 border border-grey-100 flex flex-col items-center",children:[e.jsx("div",{className:"w-7 h-7 sm:w-9 sm:h-9 lg:w-10 lg:h-10 bg-secondary-100 rounded-lg flex items-center justify-center mb-1",children:e.jsx(ts,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-secondary"})}),e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-grey-900 mb-0.5",children:"200+"}),e.jsx("p",{className:"text-grey-600 text-xs sm:text-sm lg:text-base leading-tight",children:"Utilisateurs actifs"})]}),e.jsxs("div",{className:"text-center bg-white rounded-lg shadow-sm p-2 sm:p-3 lg:p-4 border border-grey-100 flex flex-col items-center",children:[e.jsx("div",{className:"w-7 h-7 sm:w-9 sm:h-9 lg:w-10 lg:h-10 bg-success-100 rounded-lg flex items-center justify-center mb-1",children:e.jsx(rs,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-success"})}),e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-grey-900 mb-0.5",children:"100%"}),e.jsx("p",{className:"text-grey-600 text-xs sm:text-sm lg:text-base leading-tight",children:"Transactions sÃ©curisÃ©es"})]})]})})}),e.jsx("section",{className:"section-padding bg-white",children:e.jsxs("div",{className:"responsive-container",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8 lg:mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-grey-900 mb-3 sm:mb-4 lg:mb-6",children:"Explorez par catÃ©gorie"}),e.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-grey-600",children:"Trouvez exactement ce que vous cherchez"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 lg:gap-6",children:ye.map(x=>e.jsxs(L,{to:`/search?category=${x.id}`,className:"group bg-gradient-to-br from-grey-50 to-white rounded-lg lg:rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 p-3 sm:p-4 lg:p-6 text-center border border-grey-100 hover:border-primary-200 transform hover:-translate-y-1",children:[e.jsx("div",{className:"h-8 w-8 sm:h-12 sm:w-12 lg:h-16 lg:w-16 bg-gradient-to-br from-primary-100 to-primary-200 rounded-lg lg:rounded-xl flex items-center justify-center mx-auto mb-2 sm:mb-3 lg:mb-4 group-hover:scale-110 transition-transform",children:e.jsx(fe,{className:"h-4 w-4 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-grey-900 text-xs sm:text-sm lg:text-base leading-tight group-hover:text-primary transition-colors",children:x.label})]},x.id))})]})}),e.jsx("section",{className:"section-padding bg-gradient-to-br from-grey-50 to-grey-100",children:e.jsxs("div",{className:"responsive-container",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-8 lg:mb-12 gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-grey-900 mb-1 sm:mb-2",children:"DerniÃ¨res annonces"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl text-grey-600",children:"DÃ©couvrez les nouveautÃ©s"})]}),e.jsxs(L,{to:"/search",className:"text-primary font-semibold flex items-center hover:text-primary-700 transition-colors text-sm sm:text-base lg:text-lg flex-shrink-0",children:["Voir tout",e.jsx(as,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 ml-1 sm:ml-2"})]})]}),m?e.jsx("div",{className:"flex justify-center py-12 sm:py-16 lg:py-20",children:e.jsx(V,{size:"large"})}):s.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:s.map(x=>e.jsx(ve,{listing:x,sellerName:x.seller_name,sellerRating:x.seller_rating},x.id))}):e.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-xl p-6 sm:p-8 lg:p-12 text-center max-w-xl mx-auto",children:[e.jsx(fe,{className:"h-12 w-12 sm:h-16 sm:w-16 lg:h-20 lg:w-20 text-primary mx-auto mb-3 sm:mb-4 lg:mb-6"}),e.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-3 lg:mb-4",children:"Aucune annonce pour le moment"}),e.jsx("p",{className:"text-grey-600 mb-4 sm:mb-6 lg:mb-8 text-sm sm:text-base lg:text-lg",children:"Aucune annonce n'est encore en ligne. Publiez la vÃ´tre, le paiement se fait dÃ©sormais manuellement aprÃ¨s crÃ©ation."}),e.jsx(L,{to:"/create-listing",className:"btn-primary text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8 py-2.5 sm:py-3 lg:py-4",children:"Publier une annonce"})]})]})}),e.jsx("section",{className:"section-padding bg-white",children:e.jsxs("div",{className:"responsive-container text-center",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-grey-900 mb-2 sm:mb-3 lg:mb-4",children:"Nouveau sur DaloaMarket ?"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl text-grey-600 mb-4",children:"DÃ©couvrez le fonctionnement de la plateforme en dÃ©tail."}),e.jsx(L,{to:"/how-it-works",className:"btn-primary text-base sm:text-lg px-6 py-3",children:"Voir comment Ã§a marche"})]})}),e.jsxs("section",{className:"section-padding bg-gradient-to-r from-secondary via-secondary-600 to-secondary-700 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsxs("div",{className:"relative responsive-container text-center",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-4xl font-bold text-white mb-3 sm:mb-4 lg:mb-6",children:"PrÃªt Ã  vendre vos articles ?"}),e.jsx("p",{className:"text-white opacity-95 mb-6 sm:mb-8 lg:mb-10 text-sm sm:text-base lg:text-lg leading-relaxed",children:"Rejoignez DaloaMarket et commencez Ã  vendre dÃ¨s aujourd'hui !"}),e.jsx(L,{to:"/create-listing",className:"btn-primary bg-white text-secondary hover:bg-grey-100 text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8 py-2.5 sm:py-3 lg:py-4 font-semibold",children:"Publier une annonce"})]})]}),n&&e.jsx("div",{className:"fixed bottom-3 right-3 sm:bottom-4 sm:right-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg lg:rounded-xl shadow-lg px-3 sm:px-4 lg:px-6 py-2 sm:py-2.5 lg:py-3 flex items-center gap-1.5 sm:gap-2 lg:gap-3 border border-primary-200",children:[e.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 lg:w-3 lg:h-3 bg-primary rounded-full animate-pulse"}),e.jsx("span",{className:"font-semibold text-grey-700 text-xs sm:text-sm lg:text-base",children:"CrÃ©dits:"}),e.jsx("span",{className:"text-sm sm:text-lg lg:text-xl font-bold text-primary",children:d!==null?d:e.jsx(V,{size:"small"})}),e.jsx(L,{to:"/acheter-credits",className:"btn-primary py-1 sm:py-1.5 lg:py-2 px-2 sm:px-3 lg:px-4 text-xs lg:text-sm ml-1",children:"Acheter"})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:e.jsx("section",{className:"section-padding",children:e.jsx("div",{className:"responsive-container",children:e.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 border border-warning-200",children:[e.jsx(A,{className:"h-12 w-12 sm:h-16 sm:w-16 lg:h-20 lg:w-20 text-warning-600 mx-auto mb-3 sm:mb-4 lg:mb-6"}),e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-warning-800 mb-2 sm:mb-3 lg:mb-4",children:"Configuration Required"}),e.jsx("p",{className:"text-warning-700 mb-4 sm:mb-6 lg:mb-8 text-sm sm:text-base lg:text-lg",children:"To use DaloaMarket, you need to configure your Supabase database connection."}),e.jsxs("div",{className:"bg-grey-50 rounded-lg lg:rounded-xl p-3 sm:p-4 lg:p-6 text-left",children:[e.jsx("h3",{className:"font-semibold mb-2 sm:mb-3 lg:mb-4 text-sm sm:text-base lg:text-lg",children:"Setup Instructions:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 sm:space-y-2 lg:space-y-3 text-xs sm:text-sm lg:text-base",children:[e.jsxs("li",{children:["Go to ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline font-medium",children:"supabase.com"})," and create a new project"]}),e.jsx("li",{children:"In your Supabase dashboard, go to Settings â†’ API"}),e.jsx("li",{children:"Copy your Project URL and anon/public key"}),e.jsx("li",{children:"Update the .env file with your actual credentials"}),e.jsx("li",{children:"Restart your development server"})]})]})]})})})})},Fs=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-10",children:e.jsxs("div",{className:"container-custom max-w-2xl bg-white rounded-card shadow-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Ã€ propos de Daloa Market"}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Daloa Market"})," est une plateforme locale permettant aux habitants de Daloa, notamment les Ã©tudiants, de vendre et dâ€™acheter facilement des objets dâ€™occasion entre eux.",e.jsx("br",{}),"Le projet est actuellement en ",e.jsx("span",{className:"text-orange-600 font-semibold",children:"phase de test (bÃªta)"})," Ã  lâ€™universitÃ© de Daloa, avant un lancement officiel plus large.",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Il n'y a plus de systÃ¨me de boost ni de paiement automatique."})," Toutes les publications d'annonces se font par crÃ©dit ou paiement manuel Ã  l'unitÃ© (200 FCFA/annonce)."]}),e.jsxs("div",{className:"mb-4 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ ",e.jsx("strong",{children:"Phase de test"})," : la plateforme Ã©volue rapidement grÃ¢ce Ã  vos retours. Certaines fonctionnalitÃ©s ou conditions peuvent changer sans prÃ©avis.",e.jsx("br",{}),e.jsx("strong",{children:"Aucune structure juridique formelle nâ€™est encore crÃ©Ã©e."})," Lâ€™activitÃ© reste Ã  petite Ã©chelle et sâ€™adapte selon les retours des utilisateurs."]}),e.jsxs("div",{className:"mb-8 text-sm text-grey-600",children:["Pour toute question sur la confidentialitÃ©, les conditions ou le fonctionnement, consultez aussi les pages ",e.jsx("a",{href:"/faq",className:"text-primary underline",children:"FAQ"}),", ",e.jsx("a",{href:"/help",className:"text-primary underline",children:"Aide"}),", ",e.jsx("a",{href:"/terms",className:"text-primary underline",children:"Conditions"})," et ",e.jsx("a",{href:"/privacy",className:"text-primary underline",children:"ConfidentialitÃ©"}),".",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Contact officiel :"})," ",e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-primary underline",children:"support@daloamarket.shop"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("a",{href:"https://wa.me/2250788000831",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 14.487c-.297-.149-1.758-.867-2.03-.967-.273-.099-.472-.148-.67.15-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.075-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.372-.025-.52-.075-.149-.669-1.612-.916-2.21-.242-.58-.487-.501-.67-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.099 3.21 5.077 4.377.71.306 1.263.489 1.695.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.288.173-1.413-.074-.124-.272-.198-.57-.347z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 1.591.418 3.086 1.144 4.375L3 21l4.755-1.244A8.963 8.963 0 0012 21c4.97 0 9-4.03 9-9z"})]}),"Contacter le support WhatsApp"]})}),e.jsx("h2",{className:"text-2xl font-bold mt-8 mb-4",children:"Ã€ propos du crÃ©ateur"}),e.jsxs("p",{className:"mb-4",children:["Je m'appelle Elmas Oulobo, Ã©tudiant en L3 Ã‰conomie, passionnÃ© de programmation et de dÃ©veloppement web.",e.jsx("br",{}),"Ce projet est dÃ©veloppÃ© sans budget, uniquement avec ma connexion et ma dÃ©termination, pour aider la communautÃ© locale."]}),e.jsx("p",{className:"mb-8",children:"Merci Ã  tous ceux qui soutiennent cette initiative locale ðŸ™"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-8 text-center",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"ðŸ’› Soutenir Daloa Market"}),e.jsx("p",{className:"mb-2 text-sm",children:"Aidez Ã  faire Ã©voluer ce projet local dÃ©veloppÃ© avec 0 budget !"}),e.jsxs("p",{className:"mb-2",children:["Envoyez un petit geste via Orange Money/Wave au ",e.jsx("strong",{children:"+225 07 88 00 08 31"})," ou MTN ",e.jsx("strong",{children:"05 55 86 39 53"}),"."]}),e.jsx("p",{className:"text-sm",children:"Merci pour votre soutien ðŸ™"})]})]})}),Ms=()=>{var f,b;const{signIn:s}=O(),r=T(),m=Y(),[i,t]=a.useState(!1),n=((b=(f=m.state)==null?void 0:f.from)==null?void 0:b.pathname)||"/",{register:d,handleSubmit:h,formState:{errors:x}}=pe(),p=async g=>{t(!0);try{const{error:j}=await s(g.email,g.password);if(j)throw j;_.success("Connexion rÃ©ussie"),r(n,{replace:!0})}catch(j){console.error("Login error:",j);let v=j.message||"Erreur de connexion";v.includes("Invalid login credentials")?v="Identifiants incorrects. VÃ©rifiez votre email et mot de passe.":v.includes("Email not confirmed")?v="Votre email n'est pas confirmÃ©. VÃ©rifiez votre boÃ®te mail.":v.includes("User not found")&&(v="Aucun compte trouvÃ© avec cet email."),_.error(v)}finally{t(!1)}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-md",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Connexion"}),e.jsxs("form",{onSubmit:h(p),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",type:"email",className:`input-field pl-10 ${x.email?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"votre@email.com",...d("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),disabled:i}),e.jsx(we,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.email&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),x.email.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"input-label",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:"password",className:`input-field pl-10 ${x.password?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...d("password",{required:"Le mot de passe est requis",minLength:{value:6,message:"Le mot de passe doit contenir au moins 6 caractÃ¨res"}}),disabled:i}),e.jsx(ze,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.password&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),x.password.message]})]}),e.jsx("div",{children:e.jsx(L,{to:"/auth/reset-password",className:"text-sm text-primary hover:underline",children:"Mot de passe oubliÃ© ?"})}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center",disabled:i,children:i?e.jsx(V,{size:"small",className:"text-white"}):"Se connecter"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-grey-600",children:["Vous n'avez pas de compte ?"," ",e.jsx(L,{to:"/register",className:"text-primary font-medium hover:underline",children:"S'inscrire"})]})})]})})})},Ds=({onSwitchToEmail:s})=>{const[r,m]=a.useState(""),[i,t]=a.useState(""),[n,d]=a.useState("phone"),[h,x]=a.useState(!1),[p,f]=a.useState(null);function b(v){let P=v.replace(/\D/g,"");return P.startsWith("0")&&(P=P.slice(1)),"+225"+P}const g=async v=>{v.preventDefault(),x(!0),f(null);const P=b(r),{error:N}=await k.auth.signInWithOtp({phone:P});x(!1),N?f(N.message):d("otp")},j=async v=>{v.preventDefault(),x(!0),f(null);const{error:P}=await k.auth.verifyOtp({phone:r,token:i,type:"sms"});x(!1),P?f(P.message):d("success")};return e.jsxs("div",{className:"max-w-md mx-auto p-4 bg-white rounded shadow",children:[n==="phone"&&e.jsxs("form",{onSubmit:g,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Inscription par tÃ©lÃ©phone"}),e.jsx("input",{type:"tel",placeholder:"Ex: 0XXXXXXXXX",value:r,onChange:v=>m(v.target.value),className:"w-full border-2 border-black focus:border-orange-500 focus:ring-orange-500 p-2 rounded mb-2 text-black text-lg font-medium placeholder-gray-400",required:!0}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Vous pouvez entrer votre numÃ©ro ivoirien au format local (ex : ",e.jsx("span",{className:"font-semibold",children:"0XXXXXXXXX"}),")",e.jsx("br",{}),"Il sera automatiquement converti en ",e.jsx("span",{className:"font-semibold",children:"+225XXXXXXXXX"})," pour l'envoi du SMS."]}),e.jsx("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white p-2 rounded font-bold transition",disabled:h,children:h?"Envoi...":"Envoyer le code"}),p&&e.jsx("p",{className:"text-red-500 mt-2",children:p})]}),n==="otp"&&e.jsxs("form",{onSubmit:j,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"VÃ©rification du code"}),e.jsx("input",{type:"text",placeholder:"Code OTP reÃ§u",value:i,onChange:v=>t(v.target.value),className:"w-full border-2 border-black focus:border-orange-500 focus:ring-orange-500 p-2 rounded mb-2 text-black",required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white p-2 rounded font-bold transition",disabled:h,children:h?"VÃ©rification...":"VÃ©rifier le code"}),p&&e.jsx("p",{className:"text-red-500 mt-2",children:p})]}),n==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Inscription rÃ©ussie !"}),e.jsx("p",{className:"text-black",children:"Votre compte a Ã©tÃ© crÃ©Ã© avec succÃ¨s."})]}),s&&n==="phone"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",className:"text-orange-500 hover:underline font-semibold",onClick:s,children:"Continuer avec email"})}),s&&n==="otp"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",className:"text-orange-500 hover:underline font-semibold",onClick:()=>{d("phone"),t(""),f(null)},children:"Modifier le numÃ©ro"})})]})},Is=()=>{const{signUp:s}=O(),[r,m]=a.useState(!1),[i,t]=a.useState(!1),[n,d]=a.useState(null),[h,x]=a.useState(null),{register:p,handleSubmit:f,watch:b,formState:{errors:g}}=pe(),j=b("password"),v=async P=>{m(!0),d(null);try{const{data:N}=await k.from("users").select("id").eq("email",P.email).single();if(N){_.error("Cet email est dÃ©jÃ  utilisÃ©. Veuillez vous connecter ou utiliser un autre email."),m(!1);return}const{error:E}=await s(P.email,P.password);if(E){console.error("Supabase signup error:",E);let w="";typeof E=="object"&&E!==null?("message"in E&&(w=String(E.message).toLowerCase()),"code"in E&&(w+=" "+String(E.code).toLowerCase())):w=String(E).toLowerCase(),w.includes("email")&&(w.includes("existe")||w.includes("dÃ©jÃ ")||w.includes("used")||w.includes("duplicate")||w.includes("already"))||w.includes("auth/duplicate-email")||w.includes("auth/email-already-exists")||w.includes("duplicate key")?_.error("Cet email est dÃ©jÃ  utilisÃ©. Veuillez vous connecter ou utiliser un autre email."):_.error("Erreur lors de l'inscription. Veuillez rÃ©essayer.");return}_.success("Inscription rÃ©ussie ! VÃ©rifiez votre boÃ®te mail pour confirmer votre adresse."),t(!0)}catch(N){console.error("Registration error:",N),_.error("Erreur lors de l'inscription. Veuillez rÃ©essayer.")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-md",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"CrÃ©er un compte"}),!h&&e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsx("button",{className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg shadow transition-all duration-150",style:{letterSpacing:.5},onClick:()=>x("email"),children:"Continuer avec email"}),e.jsx("button",{className:"w-full bg-black hover:bg-gray-900 text-white font-bold py-3 rounded-xl text-lg shadow transition-all duration-150",style:{letterSpacing:.5},onClick:()=>x("phone"),children:"Continuer avec numÃ©ro de tÃ©lÃ©phone"})]}),h==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:f(v),className:"space-y-4",children:[n&&e.jsxs("div",{className:"text-error-500 text-sm mb-2 flex items-center",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),n]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",type:"email",className:`input-field pl-10 ${g.email?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"votre@email.com",...p("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),disabled:r}),e.jsx(we,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),g.email&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),g.email.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"input-label",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:"password",className:`input-field pl-10 ${g.password?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...p("password",{required:"Le mot de passe est requis",minLength:{value:6,message:"Le mot de passe doit contenir au moins 6 caractÃ¨res"}}),disabled:r}),e.jsx(ze,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),g.password&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),g.password.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"input-label",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:"password",className:`input-field pl-10 ${g.confirmPassword?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...p("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:P=>P===j||"Les mots de passe ne correspondent pas"}),disabled:r}),e.jsx(ze,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),g.confirmPassword&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),g.confirmPassword.message]})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center",disabled:r,children:r?e.jsx(V,{size:"small",className:"text-white"}):"S'inscrire"})]}),i&&e.jsxs("div",{className:"bg-info-50 border-l-4 border-info-500 p-4 mb-6 text-info-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"VÃ©rification de l'email requise"}),e.jsx("p",{children:"Un email de confirmation vient de vous Ãªtre envoyÃ©. Merci de cliquer sur le lien reÃ§u pour activer votre compte."})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("p",{className:"text-grey-600",children:["Vous avez dÃ©jÃ  un compte ?"," ",e.jsx(L,{to:"/login",className:"text-primary font-medium hover:underline",children:"Se connecter"})]}),e.jsx("button",{className:"mt-4 text-orange-500 hover:underline font-semibold",onClick:()=>x("phone"),children:"Continuer avec numÃ©ro de tÃ©lÃ©phone"})]})]}),h==="phone"&&e.jsx(Ds,{onSwitchToEmail:()=>x("email")})]})})})},Rs=()=>{const[s,r]=a.useState(""),[m,i]=a.useState(!1),t=T(),n=async d=>{if(d.preventDefault(),!s){_.error("Veuillez entrer votre email");return}i(!0);try{const{error:h}=await k.auth.resetPasswordForEmail(s,{redirectTo:window.location.origin+"/auth/update-password"});if(h)throw h;_.success("Un email de rÃ©initialisation a Ã©tÃ© envoyÃ©."),t("/login")}catch(h){const x=h instanceof Error?h.message:"Erreur lors de la demande";_.error(x)}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-grey-50 to-grey-100 p-4",children:e.jsxs("form",{onSubmit:n,className:"bg-white rounded-2xl shadow-xl p-6 max-w-md w-full space-y-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-grey-900 mb-2",children:"RÃ©initialiser le mot de passe"}),e.jsx("p",{className:"text-grey-600 mb-4 text-sm",children:"Entrez votre adresse email pour recevoir un lien de rÃ©initialisation."}),e.jsx("input",{type:"email",className:"input-field w-full",placeholder:"Votre email",value:s,onChange:d=>r(d.target.value),required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:m,children:m?"Envoi en cours...":"Envoyer le lien"}),e.jsx("button",{type:"button",className:"w-full text-primary mt-2 text-sm hover:underline",onClick:()=>t("/login"),children:"Retour Ã  la connexion"})]})})},Vs=()=>{const[s,r]=a.useState(""),[m,i]=a.useState(""),[t,n]=a.useState(!1),d=T(),h=async x=>{if(x.preventDefault(),!s||!m){_.error("Veuillez remplir les deux champs");return}if(s!==m){_.error("Les mots de passe ne correspondent pas");return}n(!0);try{const{error:p}=await k.auth.updateUser({password:s});if(p)throw p;_.success("Mot de passe mis Ã  jour ! Vous pouvez vous connecter."),d("/login")}catch(p){const f=p instanceof Error?p.message:"Erreur lors de la mise Ã  jour";_.error(f)}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-grey-50 to-grey-100 p-4",children:e.jsxs("form",{onSubmit:h,className:"bg-white rounded-2xl shadow-xl p-6 max-w-md w-full space-y-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-grey-900 mb-2",children:"Nouveau mot de passe"}),e.jsx("p",{className:"text-grey-600 mb-4 text-sm",children:"Choisissez un nouveau mot de passe pour votre compte."}),e.jsx("input",{type:"password",className:"input-field w-full",placeholder:"Nouveau mot de passe",value:s,onChange:x=>r(x.target.value),required:!0}),e.jsx("input",{type:"password",className:"input-field w-full",placeholder:"Confirmer le mot de passe",value:m,onChange:x=>i(x.target.value),required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:t,children:t?"Mise Ã  jour...":"Mettre Ã  jour le mot de passe"}),e.jsx("button",{type:"button",className:"w-full text-primary mt-2 text-sm hover:underline",onClick:()=>d("/login"),children:"Retour Ã  la connexion"})]})})},Us=()=>{const{user:s,updateUserProfile:r}=O(),m=T(),[i,t]=a.useState(!1),{register:n,handleSubmit:d,formState:{errors:h}}=pe(),x=async p=>{t(!0);try{if(!s)throw new Error("Vous devez Ãªtre connectÃ© pour complÃ©ter votre profil");const{error:f}=await r({email:s.email||"",full_name:p.full_name,phone:p.phone,district:p.district});if(f)throw f;_.success("Profil complÃ©tÃ© avec succÃ¨s !"),m("/")}catch(f){console.error("Profile completion error:",f),_.error(f instanceof Error?f.message:"Erreur lors de la crÃ©ation du profil")}finally{t(!1)}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-md",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"ComplÃ©ter votre profil"}),e.jsx("p",{className:"text-grey-600 text-center mb-6",children:"Ces informations sont nÃ©cessaires pour utiliser DaloaMarket"}),e.jsxs("form",{onSubmit:d(x),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full_name",className:"input-label",children:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"full_name",type:"text",className:`input-field pl-10 ${h.full_name?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre nom complet",...n("full_name",{required:"Le nom complet est requis",minLength:{value:3,message:"Le nom doit contenir au moins 3 caractÃ¨res"}}),disabled:i}),e.jsx(Z,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),h.full_name&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),h.full_name.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"input-label",children:"NumÃ©ro de tÃ©lÃ©phone"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"phone",type:"tel",className:`input-field pl-10 ${h.phone?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"+225 XX XX XX XX XX",...n("phone",{required:"Le numÃ©ro de tÃ©lÃ©phone est requis",validate:p=>Ge(p)||"Veuillez entrer un numÃ©ro de tÃ©lÃ©phone ivoirien valide"}),disabled:i}),e.jsx(me,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),h.phone&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),h.phone.message]}),e.jsx("p",{className:"text-xs text-grey-500 mt-1",children:"Format: +225 XX XX XX XX XX ou 07 XX XX XX XX"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label",children:"Quartier Ã  Daloa"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"district",className:`input-field pl-10 ${h.district?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...n("district",{required:"Le quartier est requis"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez votre quartier"}),_e.map(p=>e.jsx("option",{value:p,children:p},p))]}),e.jsx(ue,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),h.district&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),h.district.message]})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center",disabled:i,children:i?e.jsx(V,{size:"small",className:"text-white"}):"ComplÃ©ter mon profil"})]})]})})})},$s=()=>{const{user:s,userProfile:r,signOut:m}=O(),[i,t]=a.useState("listings"),[n,d]=a.useState([]),[h,x]=a.useState([]),[p,f]=a.useState([]),[b,g]=a.useState(!0),[j,v]=a.useState(null),[P,N]=a.useState(null),[E,w]=a.useState(null);a.useEffect(()=>{if(!s)return;(async()=>{try{const{data:C,error:z}=await k.from("listings").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});if(z)throw z;d(C||[]);const{data:M,error:U}=await k.from("reviews").select(`
            *,
            reviewer:users!reviews_reviewer_id_fkey (
              full_name
            ),
            listing:listings!reviews_listing_id_fkey (
              title
            )
          `).eq("reviewed_id",s.id).order("created_at",{ascending:!1});if(U)throw U;x(M||[]);const{data:F,error:$}=await k.from("favorites").select("listing:listings(*)").eq("user_id",s.id).order("created_at",{ascending:!1});if($)throw $;f((F||[]).map(B=>B.listing).filter(Boolean))}catch(C){console.error("Error fetching user data:",C),_.error("Erreur lors du chargement des donnÃ©es")}finally{g(!1)}})()},[s]),a.useEffect(()=>{if(!s)return;(async()=>{const{data:C,error:z}=await k.from("user_credits").select("credits").eq("user_id",s.id).single();v(z?null:(C==null?void 0:C.credits)??0)})()},[s]);const u=async()=>{try{await m(),_.success("DÃ©connexion rÃ©ussie")}catch(S){console.error("Sign out error:",S),_.error("Erreur lors de la dÃ©connexion")}};async function q(S){N(S);try{const{error:C}=await k.from("listings").delete().eq("id",S);if(C)throw C;_.success("Annonce supprimÃ©e"),d(z=>z.filter(M=>M.id!==S))}catch{_.error("Erreur lors de la suppression")}finally{N(null),w(null)}}return b?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(V,{size:"large"})}):r?e.jsx("div",{className:"min-h-screen bg-grey-50 py-4 sm:py-6 lg:py-8",children:e.jsxs("div",{className:"container-custom max-w-6xl",children:[s&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"bg-white rounded-lg lg:rounded-xl shadow-md px-3 sm:px-4 py-2 flex items-center gap-1.5 sm:gap-2 text-primary font-semibold",children:[e.jsx("span",{className:"text-sm sm:text-base",children:"CrÃ©dits:"}),e.jsx("span",{className:"text-base sm:text-lg",children:j!==null?j:e.jsx(V,{size:"small"})}),e.jsx(L,{to:"/acheter-credits",className:"ml-2 btn-secondary py-1 px-2 text-xs sm:text-sm",children:"Acheter"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-4 sm:mb-6",children:[e.jsx("div",{className:"h-16 w-16 sm:h-20 sm:w-20 lg:h-24 lg:w-24 rounded-full bg-primary-100 flex items-center justify-center mb-3 sm:mb-4",children:e.jsx(Z,{className:"h-8 w-8 sm:h-10 sm:w-10 lg:h-12 lg:w-12 text-primary"})}),e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold",children:r.full_name}),e.jsx("p",{className:"text-grey-600 mt-1 text-sm sm:text-base",children:s==null?void 0:s.email}),e.jsx(L,{to:"/settings",className:"btn-secondary mt-2 sm:mt-3 mb-2 w-full max-w-xs text-sm sm:text-base",children:"Modifier mon profil"}),r.rating&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(ae,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary fill-current"}),e.jsx("span",{className:"ml-1 font-medium text-sm sm:text-base",children:r.rating.toFixed(1)}),e.jsxs("span",{className:"text-grey-500 ml-1 text-sm",children:["(",h.length," avis)"]})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-grey-500 mt-2",children:["Membre depuis ",xe(r.created_at)]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 sm:h-5 sm:w-5 text-grey-500"}),e.jsx("span",{className:"text-sm sm:text-base",children:Ps(r.phone)}),r.phone&&e.jsxs("a",{href:`https://wa.me/${(()=>{const S=r.phone.replace(/[^\d]/g,"");return S.startsWith("225")?S:S.length===10&&S.startsWith("0")?"225"+S:S.length===8?"2250"+S:(S.length>10&&!S.startsWith("225"),S)})()}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 px-2 py-1 bg-green-500 hover:bg-green-600 text-white rounded flex items-center gap-1 text-xs sm:text-sm transition",title:"Contacter sur WhatsApp",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 14.487c-.297-.149-1.758-.867-2.03-.967-.273-.099-.472-.148-.67.15-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.075-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.372-.025-.52-.075-.149-.669-1.612-.916-2.21-.242-.58-.487-.501-.67-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.099 3.21 5.077 4.377.71.306 1.263.489 1.695.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.288.173-1.413-.074-.124-.272-.198-.57-.347z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 1.591.418 3.086 1.144 4.375L3 21l4.755-1.244A8.963 8.963 0 0012 21c4.97 0 9-4.03 9-9z"})]}),"WhatsApp"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-4 w-4 sm:h-5 sm:w-5 text-grey-500 mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:r.district})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:space-y-3",children:[e.jsxs(L,{to:"/settings",className:"btn-outline flex items-center justify-center text-sm sm:text-base",children:[e.jsx(Xe,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"ParamÃ¨tres"]}),e.jsxs("button",{onClick:u,className:"btn-outline text-error-600 border-error-600 hover:bg-error-50 flex items-center justify-center text-sm sm:text-base",children:[e.jsx(Te,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"DÃ©connexion"]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg mb-4 sm:mb-6 overflow-hidden",children:e.jsxs("div",{className:"flex border-b border-grey-200",children:[e.jsx("button",{onClick:()=>t("listings"),className:`flex-1 py-3 sm:py-4 px-4 sm:px-6 text-center font-medium text-sm sm:text-base ${i==="listings"?"text-primary border-b-2 border-primary":"text-grey-600 hover:text-grey-900"}`,children:"Mes annonces"}),e.jsx("button",{onClick:()=>t("reviews"),className:`flex-1 py-3 sm:py-4 px-4 sm:px-6 text-center font-medium text-sm sm:text-base ${i==="reviews"?"text-primary border-b-2 border-primary":"text-grey-600 hover:text-grey-900"}`,children:"Avis reÃ§us"}),e.jsxs("button",{onClick:()=>t("favorites"),className:`flex-1 py-3 sm:py-4 px-4 sm:px-6 text-center font-medium text-sm sm:text-base ${i==="favorites"?"text-primary border-b-2 border-primary":"text-grey-600 hover:text-grey-900"}`,children:[e.jsx(qe,{className:"inline h-4 w-4 mr-1"})," Favoris"]})]})}),i==="listings"&&(n.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:n.map(S=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"scale-90 sm:scale-95 lg:scale-100 origin-center",children:e.jsx(ve,{listing:S})}),e.jsxs("div",{className:"absolute top-1 right-1 flex flex-col gap-1",children:[S.status==="pending"&&e.jsx("span",{className:"text-xs bg-warning-100 text-warning-700 px-1.5 py-0.5 rounded font-medium",children:"En attente"}),S.status==="sold"&&e.jsx("span",{className:"text-xs bg-success-100 text-success-700 px-1.5 py-0.5 rounded font-medium",children:"Vendu"})]})]},S.id))}):e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-6 sm:p-8 text-center",children:[e.jsx(fe,{className:"h-12 w-12 sm:h-16 sm:w-16 text-grey-400 mx-auto mb-3 sm:mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Aucune annonce"}),e.jsx("p",{className:"text-grey-600 mb-4 sm:mb-6 text-sm sm:text-base",children:"Vous n'avez pas encore publiÃ© d'annonces."}),e.jsx(L,{to:"/create-listing",className:"btn-primary text-sm sm:text-base",children:"Publier une annonce"})]})),i==="reviews"&&e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-4 sm:p-6",children:h.length>0?e.jsx("div",{className:"space-y-3 sm:space-y-4",children:h.map(S=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-grey-200 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary mr-2 sm:mr-3"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-grey-800 text-sm sm:text-base",children:S.reviewer.full_name}),e.jsx("p",{className:"text-xs sm:text-sm text-grey-500",children:xe(S.created_at)})]})]}),S.listing&&e.jsx("span",{className:"text-primary text-xs sm:text-sm font-medium",children:S.listing.title})]}),e.jsx("div",{className:"text-grey-700 text-sm sm:text-base",children:S.comment||"Aucun commentaire."})]},S.id))}):e.jsxs("div",{className:"text-center text-grey-500 py-8",children:[e.jsx(ae,{className:"h-12 w-12 sm:h-16 sm:w-16 text-grey-400 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base",children:"Aucun avis reÃ§u pour le moment."})]})}),i==="favorites"&&e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-4 sm:p-6",children:p.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:p.map(S=>e.jsx(ve,{listing:S},S.id))}):e.jsxs("div",{className:"text-center text-grey-500 py-8",children:[e.jsx(qe,{className:"h-12 w-12 sm:h-16 sm:w-16 text-grey-400 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base",children:"Aucun favori pour le moment."})]})})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-grey-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-xl p-4 sm:p-6 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4",children:"Supprimer l'annonce ?"}),e.jsx("p",{className:"text-grey-700 mb-4 sm:mb-6 text-sm sm:text-base",children:"Cette action est irrÃ©versible. Voulez-vous vraiment supprimer cette annonce ?"}),e.jsxs("div",{className:"flex justify-center gap-3 sm:gap-4",children:[e.jsx("button",{className:"btn-outline text-sm sm:text-base",onClick:()=>w(null),disabled:!!P,children:"Annuler"}),e.jsx("button",{className:"btn-primary bg-error-600 hover:bg-error-700 border-error-600 text-sm sm:text-base",onClick:()=>q(E),disabled:!!P,children:"Confirmer la suppression"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(A,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Profil incomplet"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Vous devez complÃ©ter votre profil pour accÃ©der Ã  cette page."}),e.jsx(L,{to:"/complete-profile",className:"btn-primary",children:"ComplÃ©ter mon profil"})]})})})},Xs=()=>{const{sellerId:s}=ke();T();const[r,m]=a.useState(null),[i,t]=a.useState([]),[n,d]=a.useState([]),[h,x]=a.useState(!0),[p,f]=a.useState(null);if(a.useEffect(()=>{console.log("SellerProfilePage sellerId:",s);let N;const E=async()=>{x(!0),f(null),N=setTimeout(()=>{x(!1),f("Chargement trop long. VÃ©rifiez votre connexion ou contactez le support.")},1e4);const{data:w,error:u}=await k.from("users").select("id, full_name, created_at").eq("id",s).single();if(clearTimeout(N),u){f("Erreur lors du chargement du vendeur : "+u.message),console.error("Erreur vendeur:",u),x(!1);return}if(!w){f("Vendeur introuvable."),x(!1);return}const{data:q}=await k.from("listings").select("*").eq("user_id",s).order("created_at",{ascending:!1}),{data:S}=await k.from("reviews").select("id, rating, comment, created_at, reviewer:users!reviews_reviewer_id_fkey(full_name)").eq("reviewed_id",s).order("created_at",{ascending:!1});m(w),t(q||[]),d(S||[]),x(!1)};if(!s){f("Aucun vendeur sÃ©lectionnÃ©."),x(!1);return}return E(),()=>clearTimeout(N)},[s,k]),h)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsx(V,{size:"large"})});if(p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-card shadow-card text-center",children:[e.jsx(A,{className:"mx-auto mb-2 text-error-500",size:32}),e.jsx("p",{children:p})]})});const b=n.map(N=>N.rating),g=b.length?(b.reduce((N,E)=>N+E,0)/b.length).toFixed(1):"â€”",j=n.filter(N=>N.rating>=3),v=n.filter(N=>N.rating<3),P=()=>{const N=encodeURIComponent("Signalement vendeur DaloaMarket"),E=encodeURIComponent(`Je souhaite signaler le vendeur avec l'ID : ${r.id}
Nom : ${r.full_name}`);window.location.href=`mailto:support@daloamarket.shop?subject=${N}&body=${E}`};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsxs("div",{className:"container-custom max-w-3xl",children:[e.jsx("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-grey-100 flex items-center justify-center border border-grey-200 shadow",children:e.jsx(Z,{className:"h-12 w-12 text-grey-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center gap-2",children:[r.full_name,e.jsx(Z,{className:"text-primary-500",size:22})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-yellow-500 flex items-center",children:[e.jsx(ae,{className:"inline-block mr-1",size:18}),g]}),e.jsxs("span",{className:"text-grey-500 text-sm",children:["(",b.length," avis)"]})]}),e.jsx("button",{onClick:P,className:"btn-outline text-error-600 mt-2",children:"Signaler ce vendeur"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Meilleurs avis"}),j.length===0?e.jsx("p",{className:"text-grey-500 text-sm",children:"Aucun avis positif pour ce vendeur."}):e.jsx("ul",{className:"space-y-4",children:j.map(N=>{var E;return e.jsxs("li",{className:"bg-grey-50 rounded p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[[...Array(N.rating)].map((w,u)=>e.jsx(ae,{className:"text-yellow-500",size:16},u)),[...Array(5-N.rating)].map((w,u)=>e.jsx(ae,{className:"text-grey-300",size:16},u)),e.jsx("span",{className:"ml-2 text-xs text-grey-400",children:new Date(N.created_at).toLocaleDateString()}),((E=N.reviewer)==null?void 0:E.full_name)&&e.jsxs("span",{className:"ml-2 text-xs text-grey-500",children:["par ",N.reviewer.full_name]})]}),e.jsx("div",{className:"text-sm text-grey-800",children:N.comment})]},N.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Pires avis"}),v.length===0?e.jsx("p",{className:"text-grey-500 text-sm",children:"Aucun mauvais avis pour ce vendeur."}):e.jsx("ul",{className:"space-y-4",children:v.map(N=>{var E;return e.jsxs("li",{className:"bg-grey-50 rounded p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[[...Array(N.rating)].map((w,u)=>e.jsx(ae,{className:"text-yellow-500",size:16},u)),[...Array(5-N.rating)].map((w,u)=>e.jsx(ae,{className:"text-grey-300",size:16},u)),e.jsx("span",{className:"ml-2 text-xs text-grey-400",children:new Date(N.created_at).toLocaleDateString()}),((E=N.reviewer)==null?void 0:E.full_name)&&e.jsxs("span",{className:"ml-2 text-xs text-grey-500",children:["par ",N.reviewer.full_name]})]}),e.jsx("div",{className:"text-sm text-grey-800",children:N.comment})]},N.id)})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Annonces de ce vendeur"}),i.length===0?e.jsx("p",{className:"text-grey-500 text-sm",children:"Aucune annonce publiÃ©e par ce vendeur."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:i.map(N=>e.jsx(ve,{listing:N},N.id))})]})]})})},Ts=()=>{const{user:s}=Me(),r=T(),m=Y(),[i,t]=a.useState(!1),[n,d]=a.useState(!1),[h,x]=a.useState(null),[p,f]=a.useState([]),[b,g]=a.useState([]),[j,v]=a.useState(!1),[P,N]=a.useState(!0),[E,w]=a.useState(null),[u,q]=a.useState(null),[S,C]=a.useState(!1),[,z]=a.useState(!1),{register:M,handleSubmit:U,formState:{errors:F},setValue:$}=pe();a.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){N(!1);return}try{const{data:l,error:y}=await k.from("users").select("id").eq("id",s.id).single();if(y)throw y;v(!!l)}catch(l){console.error("Error verifying user:",l),v(!1)}finally{N(!1)}})()},[s]),a.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){w(null);return}const{data:l,error:y}=await k.from("users").select("first_listing_at").eq("id",s.id).single();if(y){w(null);return}w(!(l!=null&&l.first_listing_at))})()},[s]),a.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){q(null);return}const{data:l,error:y}=await k.from("user_credits").select("credits").eq("user_id",s.id).single();q(y?null:(l==null?void 0:l.credits)??0)})()},[s]);const B=async()=>{if(!(s!=null&&s.id))return!1;const{error:o}=await k.rpc("decrement_user_credit",{user_id_input:s.id});return o?!1:(q(l=>l!==null?l-1:null),!0)},{getRootProps:ee,getInputProps:G}=ls({accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},maxSize:5*1024*1024,maxFiles:5,onDrop:(o,l)=>{if(l.length>0){const y=l.map(I=>I.errors[0].code==="file-too-large"?"Image trop volumineuse (max 5MB)":I.errors[0].message);x(y[0]);return}if(o.length+p.length>5){x("Maximum 5 photos autorisÃ©es");return}x(null),f(y=>[...y,...o])}}),oe=o=>{f(l=>l.filter((y,I)=>I!==o))},se=o=>{g(l=>l.filter((y,I)=>I!==o))},ce=async()=>{if(p.length===0&&b.length===0)throw new Error("Veuillez ajouter au moins une photo");d(!0);const o=[];b.length>0&&o.push(...b);try{for(let l=0;l<p.length;l++){const y=p[l],I=y.name.split(".").pop(),W=`${Date.now()}-${Math.random().toString(36).substring(7)}.${I}`,H=`${s.id}/${W}`,{error:re}=await k.storage.from("listings").upload(H,y);if(re)throw re;const{data:{publicUrl:K}}=k.storage.from("listings").getPublicUrl(H);o.push(K)}return o}catch(l){throw d(!1),l}finally{d(!1)}},te=async(o,l,y="active")=>{if(!(s!=null&&s.id)||!j)throw new Error("Votre compte n'est pas correctement configurÃ©");const{data:I,error:W}=await k.from("listings").insert({user_id:s.id,title:o.title.trim(),description:o.description.trim(),price:o.price,category:o.category,condition:o.condition,district:o.district,photos:l,status:y}).select().single();if(W)throw W;return I},c=async o=>{if(p.length===0&&b.length===0){x("Veuillez ajouter au moins une photo");return}x(null),t(!0);try{const l=await ce();if(E){const y=await te(o,l,"active");_.success("Votre premiÃ¨re annonce a Ã©tÃ© publiÃ©e gratuitement !"),r(`/listings/${y.id}`);return}if(u&&u>0){if(!await B()){_.error("Erreur lors de la consommation du crÃ©dit."),t(!1);return}const I=await te(o,l,"active");_.success("Annonce publiÃ©e ! 1 crÃ©dit consommÃ©."),r(`/listings/${I.id}`);return}await te(o,l,"pending"),C(!0)}catch(l){console.error("Error creating listing:",l),_.error("Erreur lors de la crÃ©ation de l'annonce")}finally{t(!1)}};return a.useEffect(()=>{const l=new URLSearchParams(m.search).get("id");l&&(z(!0),(async()=>{const{data:y,error:I}=await k.from("listings").select("*").eq("id",l).single();if(I||!y){_.error("Impossible de prÃ©-remplir l'annonce"),z(!1);return}$("title",y.title||""),$("description",y.description||""),$("price",typeof y.price=="number"?y.price:0),$("category",y.category||""),$("condition",y.condition||""),$("district",y.district||""),Array.isArray(y.photos)&&y.photos.length>0&&(f([]),g(y.photos)),z(!1)})())},[m.search,$]),P?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(V,{size:"large"})}):j?S?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>r("/profile"),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(ne,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Annonce crÃ©Ã©e"})]})}),e.jsx("div",{className:"container-custom py-4 lg:py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-xl p-6 lg:p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center mx-auto mb-4 lg:mb-6",children:e.jsx(Se,{className:"h-8 w-8 lg:h-10 lg:w-10 text-green-600"})}),e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-3 lg:mb-4",children:"Annonce crÃ©Ã©e avec succÃ¨s !"}),e.jsx("p",{className:"text-grey-600 mb-6 lg:mb-8 text-base lg:text-lg leading-relaxed",children:"Votre annonce a Ã©tÃ© crÃ©Ã©e mais n'est pas encore visible. Pour la publier, vous devez soit acheter des crÃ©dits, soit payer 200 FCFA."}),e.jsxs("div",{className:"space-y-4 mb-6 lg:mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-orange-50 rounded-xl p-4 lg:p-6 border border-primary-200",children:[e.jsx("h3",{className:"font-semibold text-primary-800 mb-2 lg:mb-3",children:"Option 1 : Acheter des crÃ©dits"}),e.jsx("p",{className:"text-primary-700 text-sm lg:text-base mb-3 lg:mb-4",children:"Achetez un pack de crÃ©dits pour publier plusieurs annonces"}),e.jsx("button",{onClick:()=>r("/acheter-credits"),className:"btn-primary w-full",children:"Acheter des crÃ©dits"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-primary-50 rounded-xl p-4 lg:p-6 border border-orange-200",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-2 lg:mb-3",children:"Option 2 : Paiement mobile (200 FCFA)"}),e.jsx("p",{className:"text-orange-700 text-sm lg:text-base mb-3 lg:mb-4",children:"Payez par mobile money pour publier cette annonce immÃ©diatement."}),e.jsxs("p",{className:"text-sm lg:text-base text-grey-700 mb-2",children:[e.jsx("strong",{children:"MTN :"})," +225 05 55 86 39 53"]}),e.jsxs("p",{className:"text-sm lg:text-base text-grey-700",children:[e.jsx("strong",{children:"Nom :"})," Oulobo Elmas Tresor"]})]})]}),e.jsx("p",{className:"text-xs lg:text-sm text-blue-600 mb-3 lg:mb-4",children:"AprÃ¨s le paiement, envoyez la capture d'Ã©cran via WhatsApp au mÃªme numÃ©ro avec votre email pour identification."}),e.jsx("a",{href:"https://wa.me/2250788000831?text=Bonjour,%20j'ai%20effectuÃ©%20le%20paiement%20de%20200%20FCFA%20pour%20publier%20mon%20annonce.%20Voici%20ma%20capture%20d'Ã©cran%20et%20mon%20email%20:",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-green-600 text-white font-semibold py-2.5 lg:py-3 px-4 lg:px-6 rounded-lg lg:rounded-xl hover:bg-green-700 transition-all duration-200 text-sm lg:text-base inline-block",children:"Envoyer via WhatsApp"}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsx("button",{onClick:()=>r("/profile"),className:"w-full border-2 border-grey-300 text-grey-700 font-semibold py-2.5 lg:py-3 px-4 lg:px-6 rounded-lg lg:rounded-xl hover:border-grey-400 hover:bg-grey-50 transition-all duration-200 text-sm lg:text-base",children:"Voir mes annonces"}),e.jsx("button",{onClick:()=>r("/"),className:"w-full text-grey-600 hover:text-grey-900 transition-colors text-sm lg:text-base",children:"Retour Ã  l'accueil"})]}),e.jsx("div",{className:"mt-6 lg:mt-8 p-3 lg:p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-2 lg:gap-3",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs lg:text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Traitement manuel"}),e.jsx("p",{children:"Votre annonce sera publiÃ©e dans les 24h aprÃ¨s rÃ©ception du paiement."})]})]})})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(ne,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Publier une annonce"})]})}),e.jsx("div",{className:"container-custom py-4 lg:py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"hidden lg:block mb-8",children:[e.jsxs("button",{onClick:()=>r(-1),className:"flex items-center text-grey-600 hover:text-grey-900 transition-colors mb-4",children:[e.jsx(ne,{className:"h-5 w-5 mr-2"}),"Retour"]}),e.jsx("h1",{className:"text-3xl font-bold text-grey-900",children:"Publier une annonce"})]}),e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-xl overflow-hidden border border-primary-100",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-400 px-4 lg:px-8 py-6 lg:py-8 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-extrabold text-white drop-shadow mb-2 sm:mb-0",children:"Publier une annonce"}),s&&e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsxs("span",{className:"bg-white/20 text-white px-3 lg:px-4 py-1.5 lg:py-2 rounded-full font-semibold text-sm lg:text-lg shadow",children:["CrÃ©dits : ",e.jsx("span",{className:"font-bold",children:u===null?"...":u})]}),e.jsx("button",{type:"button",className:"btn-outline border-white text-white hover:bg-white/10 hover:text-white text-sm lg:text-base py-1.5 lg:py-2 px-3 lg:px-4",onClick:()=>r("/acheter-credits"),children:"Acheter des crÃ©dits"})]})]}),e.jsxs("form",{onSubmit:U(c),className:"space-y-6 lg:space-y-10 px-4 lg:px-8 py-6 lg:py-10",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:["Photos ",e.jsx("span",{className:"text-grey-500 font-normal",children:"(max 5)"})]}),e.jsxs("div",{...ee(),className:`border-2 border-dashed rounded-xl lg:rounded-2xl p-6 lg:p-8 text-center cursor-pointer transition-colors bg-grey-50 hover:bg-primary-50/40 ${h?"border-error-500 bg-error-50":"border-primary-200"}`,children:[e.jsx("input",{...G()}),e.jsx(Be,{className:"h-10 w-10 lg:h-12 lg:w-12 text-primary mx-auto mb-3"}),e.jsx("p",{className:"text-grey-700 text-base lg:text-lg font-medium",children:"Glissez-dÃ©posez vos photos ici, ou cliquez pour sÃ©lectionner"}),e.jsx("p",{className:"text-sm lg:text-base text-grey-500 mt-1",children:"Formats acceptÃ©s : JPG, PNG, WEBP (max 5MB)"})]}),e.jsx("div",{className:"mt-4 lg:mt-6",children:e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 lg:grid lg:grid-cols-3 md:grid-cols-5 lg:gap-4",children:[b&&b.length>0&&b.map((o,l)=>e.jsxs("div",{className:"relative min-w-[96px] max-w-[120px] aspect-square rounded-xl overflow-hidden group shadow border border-grey-200 flex-shrink-0",children:[e.jsx("img",{src:o,alt:`Photo ${l+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>se(l),className:"absolute top-1 right-1 bg-white/80 hover:bg-error-500 hover:text-white text-error-500 rounded-full p-1 shadow transition-colors z-10 group-hover:opacity-100 opacity-80",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 lg:h-5 lg:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},l)),p.map((o,l)=>e.jsxs("div",{className:"relative min-w-[96px] max-w-[120px] aspect-square rounded-xl overflow-hidden group shadow border border-grey-200 flex-shrink-0",children:[e.jsx("img",{src:URL.createObjectURL(o),alt:`Preview ${l+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>oe(l),className:"absolute top-1 right-1 bg-white/80 hover:bg-error-500 hover:text-white text-error-500 rounded-full p-1 shadow transition-colors z-10 group-hover:opacity-100 opacity-80",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 lg:h-5 lg:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},l))]})}),h&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),h]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Titre de l'annonce"}),e.jsx("input",{id:"title",type:"text",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${F.title?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Ex: Manette PS4 en trÃ¨s bon Ã©tat",...M("title",{required:"Le titre est requis",minLength:{value:5,message:"Le titre doit contenir au moins 5 caractÃ¨res"},maxLength:{value:100,message:"Le titre ne doit pas dÃ©passer 100 caractÃ¨res"}}),disabled:i}),F.title&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),F.title.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Prix (FCFA)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"price",type:"number",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm pr-16 lg:pr-20 ${F.price?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Ex: 15000",...M("price",{required:"Le prix est requis",min:{value:200,message:"Le prix minimum est de 200 FCFA"},max:{value:1e7,message:"Le prix maximum est de 10 000 000 FCFA"}}),disabled:i}),e.jsx("span",{className:"absolute right-3 lg:right-4 top-3 text-grey-500 font-bold text-base lg:text-lg",children:"FCFA"})]}),F.price&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),F.price.message]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Description"}),e.jsx("textarea",{id:"description",rows:4,className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${F.description?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"DÃ©crivez votre article en dÃ©tail (Ã©tat, caractÃ©ristiques, raison de la vente...)",...M("description",{required:"La description est requise",minLength:{value:20,message:"La description doit contenir au moins 20 caractÃ¨res"}}),disabled:i}),F.description&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),F.description.message]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"CatÃ©gorie"}),e.jsxs("select",{id:"category",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${F.category?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...M("category",{required:"La catÃ©gorie est requise"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez une catÃ©gorie"}),ye.map(o=>e.jsx("option",{value:o.id,children:o.label},o.id))]}),F.category&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),F.category.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"condition",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Ã‰tat"}),e.jsxs("select",{id:"condition",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${F.condition?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...M("condition",{required:"L'Ã©tat est requis"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez l'Ã©tat"}),Ae.map(o=>e.jsx("option",{value:o.id,children:o.label},o.id))]}),F.condition&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),F.condition.message]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Quartier Ã  Daloa"}),e.jsxs("select",{id:"district",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${F.district?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...M("district",{required:"Le quartier est requis"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez votre quartier"}),_e.map(o=>e.jsx("option",{value:o,children:o},o))]}),F.district&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(A,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),F.district.message]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 rounded-xl lg:rounded-2xl p-4 lg:p-8 border border-primary-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg lg:text-xl font-bold mb-4 lg:mb-6 text-primary",children:"CoÃ»t de publication"}),E?e.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800 text-base lg:text-lg",children:"PremiÃ¨re annonce gratuite !"}),e.jsx("p",{className:"text-green-700 text-sm lg:text-base",children:"Votre premiÃ¨re annonce sera publiÃ©e gratuitement."})]})]})}):u&&u>0?e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{className:"h-6 w-6 text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-800 text-base lg:text-lg",children:"1 crÃ©dit sera consommÃ©"}),e.jsxs("p",{className:"text-blue-700 text-sm lg:text-base mb-3 lg:mb-4",children:["Vous avez ",u," crÃ©dit",u>1?"s":""," disponible",u>1?"s":"","."]})]})]})}):e.jsx("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-6 w-6 text-orange-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-orange-800 text-base lg:text-lg",children:"Paiement requis"}),e.jsx("p",{className:"text-orange-700 text-sm lg:text-base",children:"Vous devrez payer 200 FCFA ou acheter des crÃ©dits pour publier cette annonce."})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary-100 to-primary-50 rounded-lg lg:rounded-xl p-4 lg:p-6 border border-primary-200 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Se,{className:"h-5 w-5 lg:h-6 lg:w-6 text-success mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm lg:text-base text-grey-800",children:["En publiant cette annonce, vous acceptez les",e.jsx("a",{href:"/terms",className:"text-primary font-semibold underline hover:text-primary-700 transition ml-1",target:"_blank",rel:"noopener noreferrer",children:"conditions d'utilisation"}),"de DaloaMarket et confirmez que votre article est conforme Ã  nos rÃ¨gles."]})]})}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center text-base lg:text-lg py-3 lg:py-4",disabled:i||n||E===null,children:i?e.jsx(V,{size:"small",className:"text-white"}):E?"Publier gratuitement":u&&u>0?"Publier (1 crÃ©dit)":"CrÃ©er l'annonce"})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-3xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8 text-center",children:[e.jsx(A,{className:"h-12 w-12 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Compte non configurÃ©"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Votre compte n'est pas correctement configurÃ©. Veuillez vous reconnecter pour rÃ©soudre ce problÃ¨me."}),e.jsx("button",{onClick:()=>r("/login"),className:"btn-primary",children:"Se reconnecter"})]})})})},Os=({listingId:s,reviewedId:r,onSuccess:m})=>{const{user:i}=Me(),[t,n]=a.useState(0),[d,h]=a.useState(""),[x,p]=a.useState(!1),[f,b]=a.useState(null),[g,j]=a.useState(!1),[v,P]=a.useState(null),[N,E]=a.useState([]),[w,u]=a.useState(!0);if(a.useEffect(()=>{(async()=>{if(!i)return;const{data:C,error:z}=await k.from("reviews").select("id").eq("reviewer_id",i.id).eq("listing_id",s).maybeSingle();if(z){P(!1);return}P(!!C)})()},[i,s]),a.useEffect(()=>{(async()=>{u(!0);const{data:C,error:z}=await k.from("reviews").select("*, reviewer:reviewer_id (full_name)").eq("listing_id",s).order("created_at",{ascending:!1});!z&&C&&E(C),u(!1)})()},[s,g]),!i)return null;const q=async S=>{if(S.preventDefault(),b(null),!t){b("Merci de donner une note.");return}p(!0);try{const{error:C}=await k.from("reviews").insert({reviewer_id:i.id,reviewed_id:r,listing_id:s,rating:t,comment:d});if(C)throw C;j(!0),m&&m()}catch(C){const z=C instanceof Error?C.message:"Erreur lors de lâ€™envoi de lâ€™avis.";b(z)}finally{p(!1)}};return v===null?e.jsx("div",{className:"text-grey-500 text-sm mt-6",children:"Chargement..."}):v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg text-blue-700 mt-6",children:"Vous avez dÃ©jÃ  laissÃ© un avis pour cette annonce."}),e.jsx(Le,{reviews:N,loading:w})]}):g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-green-50 rounded-lg text-green-700",children:"Merci pour votre avis !"}),e.jsx(Le,{reviews:N,loading:w})]}):e.jsxs("div",{children:[e.jsxs("form",{onSubmit:q,className:"space-y-3 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Note"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(S=>e.jsx("button",{type:"button",className:S<=t?"text-yellow-400":"text-grey-300",onClick:()=>n(S),"aria-label":`Donner ${S} Ã©toile${S>1?"s":""}`,children:"â˜…"},S))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Commentaire (optionnel)"}),e.jsx("textarea",{className:"input-field w-full",rows:3,value:d,onChange:S=>h(S.target.value),placeholder:"Votre retour sur la transaction..."})]}),f&&e.jsx("div",{className:"text-error-500 text-sm",children:f}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:x,children:x?"Envoi...":"Laisser un avis"})]}),e.jsx(Le,{reviews:N,loading:w})]})},Le=({reviews:s,loading:r})=>r?e.jsx("div",{className:"text-grey-500 text-sm mt-4",children:"Chargement des avis..."}):s.length?e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-base mb-2",children:"Avis sur cette annonce"}),s.map(m=>{var i;return e.jsxs("div",{className:"bg-grey-50 rounded-lg p-3 border border-grey-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold text-primary",children:((i=m.reviewer)==null?void 0:i.full_name)||"Utilisateur"}),e.jsx("span",{className:"flex gap-0.5 ml-2",children:[1,2,3,4,5].map(t=>e.jsx("span",{className:t<=m.rating?"text-yellow-400":"text-grey-300",children:"â˜…"},t))}),e.jsx("span",{className:"text-xs text-grey-500 ml-2",children:new Date(m.created_at).toLocaleDateString()})]}),m.comment&&e.jsx("div",{className:"text-grey-800 text-sm",children:m.comment})]},m.id)})]}):e.jsx("div",{className:"text-grey-400 text-sm mt-4",children:"Aucun avis pour cette annonce."}),Bs=()=>{const{id:s}=ke(),{user:r,userProfile:m}=O(),i=T(),[t,n]=a.useState(null),[d,h]=a.useState(!0),[x,p]=a.useState(0),[f,b]=a.useState(!1),[g,j]=a.useState(""),[v,P]=a.useState(!1),[N,E]=a.useState(!1),[w,u]=a.useState(!1),[q,S]=a.useState(null),[C,z]=a.useState(!1),[M,U]=a.useState(!1),[F,$]=a.useState(!1),[B,ee]=a.useState([]);a.useEffect(()=>{(async()=>{try{if(!s)return;const{data:y,error:I}=await k.from("listings").select(`
            *,
            seller:users!listings_user_id_fkey (*)
          `).eq("id",s).single();if(I)throw I;if(n(y),y){const{data:W,error:H}=await k.from("listings").select("*").eq("category",y.category).eq("status","active").neq("id",y.id).limit(4);!H&&W&&ee(W)}}catch(y){console.error("Error fetching listing:",y),_.error("Impossible de charger cette annonce")}finally{h(!1)}})()},[s]);const G=()=>{t!=null&&t.photos&&p(l=>l===t.photos.length-1?0:l+1)},oe=()=>{t!=null&&t.photos&&p(l=>l===0?t.photos.length-1:l-1)},se=async()=>{if(!g.trim()){_.error("Veuillez indiquer une raison");return}P(!0);try{await new Promise(l=>setTimeout(l,1e3)),_.success("Annonce signalÃ©e avec succÃ¨s"),b(!1),j("")}catch(l){console.error("Error reporting listing:",l),_.error("Erreur lors du signalement")}finally{P(!1)}};async function ce(){if(t){E(!0);try{const{error:l}=await k.from("listings").update({status:"sold"}).eq("id",t.id);if(l)throw l;_.success("Annonce marquÃ©e comme vendue"),n({...t,status:"sold"})}catch{_.error("Erreur lors du marquage comme vendue")}finally{E(!1)}}}async function te(){if(!(!t||q===null)){z(!0);try{const{error:l}=await k.from("listings").update({price:q}).eq("id",t.id);if(l)throw l;_.success("Prix modifiÃ© avec succÃ¨s"),n({...t,price:q}),u(!1)}catch{_.error("Erreur lors de la modification du prix")}finally{z(!1)}}}async function c(){if(t){$(!0);try{const{error:l}=await k.from("listings").delete().eq("id",t.id);if(l)throw l;_.success("Annonce supprimÃ©e"),i("/profile")}catch{_.error("Erreur lors de la suppression")}finally{$(!1),U(!1)}}}const o=()=>{if(!r){_.error("Vous devez Ãªtre connectÃ© pour contacter le vendeur"),i("/login",{state:{from:`/listings/${s}`}});return}if((t==null?void 0:t.seller.id)===r.id){_.error("Vous ne pouvez pas contacter votre propre annonce");return}i(`/messages/${t==null?void 0:t.id}/${t==null?void 0:t.seller.id}`)};return d?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(V,{size:"large"})}):t?t&&t.status!=="active"&&(!r||r.id!==t.user_id)?e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(A,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce non disponible"}),e.jsxs("p",{className:"text-grey-600 mb-6",children:["Cette annonce n'est pas accessible. Elle a peut-Ãªtre Ã©tÃ© dÃ©jÃ  vendue, supprimÃ©e, ou vous n'avez pas l'autorisation pour la consulter.",e.jsx("br",{}),e.jsxs("span",{className:"block mt-2 text-sm text-grey-500",children:["Si vous pensez qu'il s'agit d'une erreur, contactez le ",e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-grey-800 hover:text-primary transition-colors",children:"support"})," ou vÃ©rifiez l'Ã©tat de l'annonce dans l'espace personnel du vendeur."]})]}),e.jsx(L,{to:"/",className:"btn-primary",children:"Retour Ã  l'accueil"})]})})}):e.jsxs("div",{className:"min-h-screen bg-grey-50 py-8",children:[e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden mb-6",children:[e.jsx("div",{className:"relative aspect-video",children:t.photos&&t.photos.length>0?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.photos[x],alt:t.title,className:"w-full h-full object-contain"}),t.photos.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:oe,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 rounded-full p-2 shadow-md hover:bg-opacity-100 transition-all","aria-label":"Image prÃ©cÃ©dente",children:e.jsx(is,{className:"h-6 w-6 text-grey-800"})}),e.jsx("button",{onClick:G,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 rounded-full p-2 shadow-md hover:bg-opacity-100 transition-all","aria-label":"Image suivante",children:e.jsx(ns,{className:"h-6 w-6 text-grey-800"})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.photos.map((l,y)=>e.jsx("button",{onClick:()=>p(y),className:`h-2 w-2 rounded-full ${y===x?"bg-primary":"bg-white bg-opacity-60"}`,"aria-label":`Voir image ${y+1}`},y))})]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-grey-100",children:e.jsx("p",{className:"text-grey-500",children:"Aucune image disponible"})})}),t.photos&&t.photos.length>1&&e.jsx("div",{className:"p-4 flex space-x-2 overflow-x-auto",children:t.photos.map((l,y)=>e.jsx("button",{onClick:()=>p(y),className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 ${y===x?"border-primary":"border-transparent"}`,children:e.jsx("img",{src:l,alt:`Thumbnail ${y+1}`,className:"w-full h-full object-cover"})},y))})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-grey-900 mb-2",children:t.title}),e.jsx("p",{className:"text-3xl font-bold text-primary mb-4",children:je(t.price)}),e.jsxs("div",{className:"flex flex-wrap gap-y-2 mb-6",children:[e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx(ue,{className:"h-5 w-5 text-grey-500 mr-1"}),e.jsx("span",{className:"text-grey-700",children:t.district})]}),e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx(os,{className:"h-5 w-5 text-grey-500 mr-1"}),e.jsx("span",{className:"text-grey-700",children:xe(t.created_at)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-grey-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"CatÃ©gorie"}),e.jsx("p",{className:"font-medium",children:qs(t.category)})]}),e.jsxs("div",{className:"bg-grey-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"Ã‰tat"}),e.jsx("p",{className:"font-medium",children:Ls(t.condition)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-grey-700 whitespace-pre-line",children:t.description})]}),(r==null?void 0:r.id)&&r.id!==t.seller.id&&e.jsx(Os,{listingId:t.id,reviewedId:t.seller.id}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>b(!0),className:"text-grey-500 flex items-center text-sm hover:text-error-600 transition-colors",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Signaler l'annonce"]})}),(r==null?void 0:r.id)&&t&&r.id===t.seller.id&&(t.status==="active"||t.status==="pending")&&e.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[t.status==="active"&&e.jsx("button",{className:"btn-outline btn-xs text-success-700 border-success-700 hover:bg-success-50",onClick:ce,disabled:N,children:N?"Traitement...":"Marquer comme vendu"}),t.status==="active"&&(w?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",min:200,step:100,value:q??t.price,onChange:l=>S(Number(l.target.value)),className:"input-field w-28 border-primary-300 focus:border-primary-500 rounded-lg",disabled:C}),e.jsx("button",{className:"btn-primary btn-xs",onClick:te,disabled:C,children:C?"Mise Ã  jour...":"Valider"}),e.jsx("button",{className:"btn-outline btn-xs",onClick:()=>u(!1),disabled:C,children:"Annuler"})]}):e.jsx("button",{className:"btn-outline btn-xs hover:bg-primary-50 border-primary-200 text-primary",onClick:()=>{u(!0),S(t.price)},children:"Modifier le prix"})),e.jsx("button",{className:"btn-outline btn-xs text-error-700 border-error-700 hover:bg-error-50",onClick:()=>U(!0),disabled:F,children:F?"Suppression...":"Supprimer"})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-grey-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Supprimer l'annonce ?"}),e.jsx("p",{className:"text-grey-700 mb-6",children:"Cette action est irrÃ©versible. Voulez-vous vraiment supprimer cette annonce ?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{className:"btn-outline",onClick:()=>U(!1),disabled:F,children:"Annuler"}),e.jsx("button",{className:"btn-primary bg-error-600 hover:bg-error-700 border-error-600",onClick:c,disabled:F,children:"Confirmer la suppression"})]})]})}),(r==null?void 0:r.id)&&t&&r.id===t.seller.id&&t.status==="pending"&&e.jsxs("div",{className:"my-6 flex flex-col items-center",children:[e.jsx("div",{className:"mb-4 text-lg text-warning-700 font-semibold",children:"Cette annonce est en attente de paiement. Elle ne sera pas visible tant que le paiement n'est pas effectuÃ©."}),e.jsxs("button",{className:"btn-primary w-full max-w-md text-center py-3 text-lg font-semibold rounded-xl shadow-card border border-warning-200 bg-warning-500 hover:bg-warning-600 text-white transition mb-2",onClick:()=>i(`/paiement-annonce/${t.id}`),children:[e.jsx("span",{role:"img","aria-label":"paiement",children:"ðŸ’³"})," Payer maintenant pour publier"]}),e.jsx("div",{className:"mt-2 text-base text-grey-600 text-center",children:"Toutes les informations de l'annonce seront prÃ©-remplies, y compris le boost si sÃ©lectionnÃ©."})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Vendeur"}),e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs(L,{to:`/profile/seller/${t.seller.id}`,className:"flex items-center group",children:[t.seller.avatar_url?e.jsx("img",{src:t.seller.avatar_url,alt:t.seller.full_name,className:"h-12 w-12 rounded-full object-cover border border-grey-200 shadow"}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-grey-100 flex items-center justify-center",children:e.jsx(Z,{className:"h-6 w-6 text-grey-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-primary group-hover:underline cursor-pointer",children:t.seller.full_name}),t.seller.rating&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 text-primary fill-current"}),e.jsx("span",{className:"text-sm ml-1",children:t.seller.rating.toFixed(1)})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"Quartier"}),e.jsx("p",{className:"font-medium",children:t.seller.district})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"Membre depuis"}),e.jsx("p",{className:"font-medium",children:xe(t.seller.created_at)})]}),e.jsxs("button",{onClick:o,className:"btn-primary w-full flex items-center justify-center mb-2",disabled:t.seller.id===(r==null?void 0:r.id),children:[e.jsx(Ne,{className:"h-5 w-5 mr-2"}),"Contacter le vendeur (chat)"]}),t.seller.phone&&e.jsxs("a",{href:`https://wa.me/${(()=>{const l=t.seller.phone.replace(/[^\d]/g,"");return l.startsWith("225")?l:l.length===10&&l.startsWith("0")?"225"+l:l.length===8?"2250"+l:(l.length>10&&!l.startsWith("225"),l)})()}`,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition mb-2",title:"Contacter sur WhatsApp",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-2",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 14.487c-.297-.149-1.758-.867-2.03-.967-.273-.099-.472-.148-.67.15-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.075-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.372-.025-.52-.075-.149-.669-1.612-.916-2.21-.242-.58-.487-.501-.67-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.099 3.21 5.077 4.377.71.306 1.263.489 1.695.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.288.173-1.413-.074-.124-.272-.198-.57-.347z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 1.591.418 3.086 1.144 4.375L3 21l4.755-1.244A8.963 8.963 0 0012 21c4.97 0 9-4.03 9-9z"})]}),"Contacter sur WhatsApp"]}),t.seller.id===(r==null?void 0:r.id)&&e.jsx("p",{className:"text-sm text-grey-500 text-center mt-2",children:"C'est votre annonce"})]}),B.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Annonces similaires"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:B.map(l=>e.jsxs(L,{to:`/listings/${l.id}`,className:"flex flex-col items-center hover:bg-grey-50 p-2 rounded-lg transition-colors border border-grey-100",children:[e.jsx("div",{className:"h-24 w-full rounded-md overflow-hidden flex-shrink-0 mb-2 flex items-center justify-center bg-grey-50",children:e.jsx("img",{src:l.photos[0]||"https://via.placeholder.com/96",alt:l.title,className:"h-24 w-auto max-w-full object-cover"})}),e.jsxs("div",{className:"w-full text-center",children:[e.jsx("p",{className:"font-medium line-clamp-1 text-sm mb-1",children:l.title}),e.jsx("p",{className:"text-primary font-bold text-base",children:je(l.price)})]})]},l.id))})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-grey-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Signaler l'annonce"}),e.jsx("p",{className:"text-grey-600 mb-4",children:"Veuillez indiquer la raison pour laquelle vous signalez cette annonce."}),e.jsxs("select",{value:g,onChange:l=>j(l.target.value),className:"input-field mb-4",disabled:v,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez une raison"}),e.jsx("option",{value:"fake",children:"Annonce frauduleuse"}),e.jsx("option",{value:"inappropriate",children:"Contenu inappropriÃ©"}),e.jsx("option",{value:"duplicate",children:"Annonce en double"}),e.jsx("option",{value:"wrong_category",children:"Mauvaise catÃ©gorie"}),e.jsx("option",{value:"other",children:"Autre raison"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"btn-outline",disabled:v,children:"Annuler"}),e.jsx("button",{onClick:se,className:"btn-primary flex items-center",disabled:v||!g,children:v?e.jsx(V,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Signaler"]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(A,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce introuvable"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Cette annonce n'existe pas ou a Ã©tÃ© supprimÃ©e."}),e.jsx(L,{to:"/",className:"btn-primary",children:"Retour Ã  l'accueil"})]})})})},Ws=({initialQuery:s="",className:r="",selectedCategory:m})=>{const[i,t]=a.useState(s),n=T(),d=Y(),h=new URLSearchParams(d.search),x=(m??h.get("category")??"")+"",p=f=>{f.preventDefault(),i.trim()&&n(`/search?q=${encodeURIComponent(i.trim())}`)};return e.jsxs("div",{className:`relative ${r}`,children:[e.jsx("form",{onSubmit:p,className:"relative group",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Que recherchez-vous ?",className:"w-full py-3 sm:py-3.5 lg:py-4 pl-10 sm:pl-12 lg:pl-14 pr-24 sm:pr-28 lg:pr-32 text-sm sm:text-base lg:text-lg rounded-xl lg:rounded-2xl border-2 border-grey-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white shadow-md group-hover:shadow-lg transition-all",value:i,onChange:f=>t(f.target.value)}),e.jsx(be,{className:"absolute left-3 sm:left-4 lg:left-5 top-3 sm:top-3.5 lg:top-4.5 h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-grey-400"}),e.jsx("button",{type:"submit",className:"absolute right-2 sm:right-2.5 lg:right-3 top-1.5 sm:top-2 lg:top-2 bg-primary text-white py-1.5 sm:py-2 lg:py-2.5 px-3 sm:px-4 lg:px-6 rounded-lg lg:rounded-xl hover:bg-primary-600 transition-colors font-semibold shadow-md hover:shadow-lg text-xs sm:text-sm lg:text-base",children:"Rechercher"})]})}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mt-3 sm:mt-4 justify-center",children:ye.map(f=>{const b=x===f.id;return e.jsx("button",{onClick:()=>{const g=new URLSearchParams(d.search);g.get("category")===f.id?(g.delete("category"),n(`/search?${g.toString()}`,{replace:!0})):(g.set("category",f.id),n(`/search?${g.toString()}`,{replace:!0}))},className:"px-2.5 sm:px-3 lg:px-4 py-1.5 sm:py-2 border rounded-full text-xs sm:text-sm font-medium transition-all "+(b?"bg-primary text-white border-primary-500 shadow-md":"bg-white border-grey-200 text-grey-700 hover:bg-primary-50 hover:border-primary-200 hover:text-primary"),children:f.label},f.id)})})]})},Qs=()=>{const s=Y(),r=T(),m=new URLSearchParams(s.search),[i,t]=a.useState([]),[n,d]=a.useState(!0),[h,x]=a.useState(0),[p,f]=a.useState(1),[b,g]=a.useState(!1),[j,v]=a.useState("created_at"),[P,N]=a.useState("desc"),[E,w]=a.useState(!1),u={category:m.get("category")||"",condition:m.get("condition")||"",district:m.get("district")||"",minPrice:m.get("minPrice")||"",maxPrice:m.get("maxPrice")||""},q=m.get("q")||"",S=12,{category:C,condition:z,district:M,minPrice:U,maxPrice:F}=u,$=a.useCallback(async c=>{d(!0);try{let o=k.from("listings").select(`
          *,
          users:user_id (
            full_name,
            rating
          )
        `,{count:"exact"}).eq("status","active").order(j,{ascending:P==="asc"});q&&(o=o.or(`title.ilike.%${q}%,description.ilike.%${q}%`)),C&&(o=o.eq("category",C)),z&&(o=o.eq("condition",z)),M&&(o=o.eq("district",M)),U&&(o=o.gte("price",parseInt(U))),F&&(o=o.lte("price",parseInt(F)));const l=(c-1)*S,y=l+S-1;o=o.range(l,y);const{data:I,error:W,count:H}=await o;if(W)throw W;const re=I.map(K=>{var X,J;return{...K,seller_name:((X=K.users)==null?void 0:X.full_name)||"Utilisateur",seller_rating:((J=K.users)==null?void 0:J.rating)||null}});t(c===1?re:K=>[...K,...re]),H!==null&&(x(H),g(l+re.length<H))}catch(o){console.error("Error fetching listings:",o)}finally{d(!1)}},[j,P,q,C,z,M,U,F]);a.useEffect(()=>{f(1),$(1)},[s.search,j,P,$]);const B=()=>{const c=p+1;f(c),$(c)},ee=c=>{c==="price_asc"?(v("price"),N("asc")):c==="price_desc"?(v("price"),N("desc")):(v("created_at"),N("desc"))},G=c=>{const{name:o,value:l}=c.target,y=new URLSearchParams(s.search);l?y.set(o,l):y.delete(o),r(`/search?${y.toString()}`)},oe=()=>{w(!1)},se=()=>{r(q?`/search?q=${q}`:"/search"),w(!1)},ce=c=>{const o=ye.find(l=>l.id===c);return o?o.label:""},te=c=>{const o=Ae.find(l=>l.id===c);return o?o.label:""};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsxs("div",{className:"container-custom py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(Ws,{initialQuery:q,selectedCategory:u.category})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>w(!0),className:"btn-outline flex items-center gap-2 px-4 py-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Filtres",(u.category||u.condition||u.district||u.minPrice||u.maxPrice)&&e.jsx("span",{className:"bg-primary text-white text-xs rounded-full px-2 py-0.5 ml-1",children:[u.category,u.condition,u.district,u.minPrice||u.maxPrice].filter(Boolean).length})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.category&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:[ce(u.category),e.jsx("button",{onClick:()=>{const c={...u,category:""};setFilters(c);const o=new URLSearchParams(s.search);o.delete("category"),r(`/search?${o.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(ge,{className:"h-3 w-3"})})]}),u.condition&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:[te(u.condition),e.jsx("button",{onClick:()=>{const c={...u,condition:""};setFilters(c);const o=new URLSearchParams(s.search);o.delete("condition"),r(`/search?${o.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(ge,{className:"h-3 w-3"})})]}),u.district&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:[u.district,e.jsx("button",{onClick:()=>{const c={...u,district:""};setFilters(c);const o=new URLSearchParams(s.search);o.delete("district"),r(`/search?${o.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(ge,{className:"h-3 w-3"})})]}),(u.minPrice||u.maxPrice)&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:["Prix: ",u.minPrice?je(parseInt(u.minPrice)):"0"," - ",u.maxPrice?je(parseInt(u.maxPrice)):"âˆž",e.jsx("button",{onClick:()=>{const c={...u,minPrice:"",maxPrice:""};setFilters(c);const o=new URLSearchParams(s.search);o.delete("minPrice"),o.delete("maxPrice"),r(`/search?${o.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(ge,{className:"h-3 w-3"})})]})]}),(u.category||u.condition||u.district||u.minPrice||u.maxPrice)&&e.jsx("button",{onClick:se,className:"text-grey-600 text-sm hover:text-grey-900 transition-colors underline",children:"Tout effacer"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-grey-600 text-sm",children:"Trier par:"}),e.jsxs("select",{className:"input-field py-2 text-sm min-w-0",value:j==="created_at"?"newest":j==="price"&&P==="asc"?"price_asc":"price_desc",onChange:c=>ee(c.target.value),children:[e.jsx("option",{value:"newest",children:"Plus rÃ©cent"}),e.jsx("option",{value:"price_asc",children:"Prix croissant"}),e.jsx("option",{value:"price_desc",children:"Prix dÃ©croissant"})]})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-grey-600 text-lg",children:[e.jsx("span",{className:"font-semibold text-grey-900",children:h})," rÃ©sultat",h!==1?"s":"",q&&e.jsxs("span",{children:[" pour ",e.jsxs("span",{className:"font-semibold text-primary",children:['"',q,'"']})]})]})}),n&&p===1?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(V,{size:"large"})}):i.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:i.map(c=>e.jsx(ve,{listing:c,sellerName:c.seller_name,sellerRating:c.seller_rating},c.id))}),b&&e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:B,className:"btn-outline flex items-center mx-auto px-8 py-3 text-lg",disabled:n,children:[n?e.jsx(V,{size:"small",className:"mr-2"}):e.jsx(Oe,{className:"h-5 w-5 mr-2"}),"Charger plus d'annonces"]})})]}):e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center max-w-2xl mx-auto",children:[e.jsx(A,{className:"h-20 w-20 text-grey-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Aucune annonce trouvÃ©e"}),e.jsx("p",{className:"text-grey-600 mb-8 text-lg",children:"Aucune annonce ne correspond Ã  votre recherche. Essayez de modifier vos filtres ou votre recherche."}),e.jsx("button",{onClick:se,className:"btn-primary text-lg px-8 py-4",children:"RÃ©initialiser les filtres"})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Filtres"}),e.jsx("button",{onClick:()=>w(!1),className:"p-2 rounded-xl text-grey-500 hover:text-grey-700 hover:bg-grey-100 transition-colors",children:e.jsx(ge,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"input-label text-base font-semibold",children:"CatÃ©gorie"}),e.jsxs("select",{id:"category",name:"category",className:"input-field",value:u.category,onChange:G,children:[e.jsx("option",{value:"",children:"Toutes les catÃ©gories"}),ye.map(c=>e.jsx("option",{value:c.id,children:c.label},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"condition",className:"input-label text-base font-semibold",children:"Ã‰tat"}),e.jsxs("select",{id:"condition",name:"condition",className:"input-field",value:u.condition,onChange:G,children:[e.jsx("option",{value:"",children:"Tous les Ã©tats"}),Ae.map(c=>e.jsx("option",{value:c.id,children:c.label},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label text-base font-semibold",children:"Quartier"}),e.jsxs("select",{id:"district",name:"district",className:"input-field",value:u.district,onChange:G,children:[e.jsx("option",{value:"",children:"Tous les quartiers"}),_e.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label text-base font-semibold",children:"Prix (FCFA)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"number",name:"minPrice",placeholder:"Prix min",className:"input-field",value:u.minPrice,onChange:G,min:"0"})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"maxPrice",placeholder:"Prix max",className:"input-field",value:u.maxPrice,onChange:G,min:"0"})})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("button",{onClick:se,className:"btn-outline flex-1 py-3",children:"RÃ©initialiser"}),e.jsx("button",{onClick:oe,className:"btn-primary flex-1 py-3",children:"Appliquer"})]})]})})]})},Gs=()=>{const{user:s}=O(),[r,m]=a.useState([]),[i,t]=a.useState(!0);return a.useEffect(()=>{if(!s)return;const n=async()=>{try{const{data:h,error:x}=await k.from("messages").select(`
            *,
            listing:listings!messages_listing_id_fkey (
              id,
              title,
              photos,
              user_id
            ),
            sender:users!messages_sender_id_fkey (
              full_name
            ),
            receiver:users!messages_receiver_id_fkey (
              full_name
            )
          `).or(`sender_id.eq.${s.id},receiver_id.eq.${s.id}`).order("created_at",{ascending:!1});if(x)throw x;const p=new Map;h==null||h.forEach(b=>{const g=b.sender_id===s.id,j=g?b.receiver_id:b.sender_id,v=g?b.receiver.full_name:b.sender.full_name,P=`${b.listing_id}_${j}`;if(!p.has(P))p.set(P,{listing_id:b.listing_id,listing_title:b.listing.title,listing_photo:b.listing.photos[0]||"",other_user_id:j,other_user_name:v,last_message:b.content,last_message_date:b.created_at,unread_count:!g&&!b.read?1:0});else if(!g&&!b.read){const N=p.get(P);N.unread_count+=1}});const f=Array.from(p.values()).sort((b,g)=>new Date(g.last_message_date).getTime()-new Date(b.last_message_date).getTime());m(f)}catch(h){console.error("Error fetching conversations:",h),_.error("Erreur lors du chargement des conversations")}finally{t(!1)}};n();const d=k.channel("messages-changes").on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`sender_id=eq.${s.id},receiver_id=eq.${s.id}`},()=>{n()}).subscribe();return()=>{d.unsubscribe()}},[s]),i?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(V,{size:"large"})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsxs("div",{className:"container-custom max-w-4xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Messages"}),r.length>0?e.jsx("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:e.jsx("div",{className:"divide-y divide-grey-200",children:r.map(n=>e.jsx(L,{to:`/messages/${n.listing_id}/${n.other_user_id}`,className:"block p-4 hover:bg-grey-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:n.listing_photo||"https://via.placeholder.com/64",alt:n.listing_title,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"ml-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-medium text-grey-900 line-clamp-1",children:n.listing_title}),e.jsx("span",{className:"text-xs text-grey-500",children:xe(n.last_message_date)})]}),e.jsx("p",{className:"text-sm text-grey-600 mt-1",children:n.other_user_name}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-sm text-grey-500 line-clamp-1",children:n.last_message}),n.unread_count>0&&e.jsx("span",{className:"bg-primary text-white text-xs font-medium px-2 py-0.5 rounded-full",children:n.unread_count})]})]})]})},`${n.listing_id}_${n.other_user_id}`))})}):e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(Ne,{className:"h-16 w-16 text-grey-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun message"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Vous n'avez pas encore de conversations. Parcourez les annonces et contactez les vendeurs pour commencer Ã  discuter."}),e.jsx(L,{to:"/search",className:"btn-primary",children:"Parcourir les annonces"})]})]})})},Js=()=>{const{listingId:s,userId:r}=ke(),{user:m}=O(),i=T(),t=s||"",n=r||"";a.useEffect(()=>{(!t||!n)&&(_.error("ParamÃ¨tres de conversation invalides."),i("/messages")),m&&m.id===n&&(_.error("Vous ne pouvez pas discuter avec vous-mÃªme."),i("/messages"))},[t,n,m,i]);const[d,h]=a.useState([]),[x,p]=a.useState(""),[f,b]=a.useState(!0),[g,j]=a.useState(!1),[v,P]=a.useState(null),[N,E]=a.useState(null),w=a.useRef(null),u=async()=>{if(!(!m||!t||!n))try{const{data:C,error:z}=await k.from("messages").select(`
          *,
          sender:users!messages_sender_id_fkey (
            full_name
          ),
          receiver:users!messages_receiver_id_fkey (
            full_name
          )
        `).eq("listing_id",t).or(`and(sender_id.eq.${m.id},receiver_id.eq.${n}),and(sender_id.eq.${n},receiver_id.eq.${m.id})`).order("created_at",{ascending:!0});if(z)throw z;h(C||[])}catch(C){console.error("Error fetching messages:",C)}},q=async()=>{try{const{data:C,error:z}=await k.from("listings").select("id, title, photos, price, user_id").eq("id",t).single();if(z)throw z;P({id:C.id,title:C.title,photo:C.photos[0]||"",price:C.price,seller_id:C.user_id});const{data:M,error:U}=await k.from("users").select("id, full_name").eq("id",n).single();if(U)throw U;E({id:M.id,full_name:M.full_name}),await u()}catch(C){console.error("Error fetching data:",C),_.error("Erreur lors du chargement de la conversation"),i("/messages")}finally{b(!1)}};a.useEffect(()=>{if(!m||!t||!n)return;(async()=>{try{await q()}catch(M){console.error("Error fetching data:",M),_.error("Erreur lors du chargement de la conversation"),i("/messages")}finally{b(!1)}})();const z=k.channel("chat-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`listing_id=eq.${t}`},()=>{u()}).subscribe();return()=>{z.unsubscribe()}},[m,t,n,i]),a.useEffect(()=>{var M,U;const C=(M=w.current)==null?void 0:M.parentElement;if(!C)return;C.scrollHeight-C.scrollTop-C.clientHeight<50&&((U=w.current)==null||U.scrollIntoView({behavior:"smooth"})),d.length>0&&m&&(async()=>await k.from("messages").update({read:!0}).eq("listing_id",t).eq("receiver_id",m.id).eq("read",!1))()},[d,t,m]);const S=async C=>{if(C.preventDefault(),!(!x.trim()||!m||!t||!n)){j(!0);try{const{error:z}=await k.from("messages").insert({listing_id:t,sender_id:m.id,receiver_id:n,content:x.trim(),read:!1});if(z)throw z;p(""),await u()}catch(z){console.error("Error sending message:",z),_.error("Erreur lors de l'envoi du message")}finally{j(!1)}}};return f?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(V,{size:"large"})}):!v||!N?e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(A,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Conversation introuvable"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Cette conversation n'existe pas, a Ã©tÃ© supprimÃ©e, ou les paramÃ¨tres sont invalides."}),e.jsx(L,{to:"/messages",className:"btn-primary",children:"Retour aux messages"})]})})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-grey-200 flex items-center",children:[e.jsx(L,{to:"/messages",className:"mr-3 text-grey-500 hover:text-grey-700",children:e.jsx(ne,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-12 w-12 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:v.photo||"https://via.placeholder.com/48",alt:v.title,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"ml-3 flex-grow",children:[e.jsx(L,{to:`/listings/${v.id}`,className:"font-medium text-grey-900 hover:underline line-clamp-1",children:v.title}),e.jsx("p",{className:"text-sm text-grey-600",children:N.full_name})]})]}),e.jsx("div",{className:"p-4 h-[60vh] overflow-y-auto bg-grey-50",children:d.length>0?e.jsxs("div",{className:"space-y-4",children:[d.map(C=>{const z=C.sender_id===(m==null?void 0:m.id);return e.jsxs("div",{className:`flex ${z?"justify-end":"justify-start"}`,children:[!z&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-grey-200 flex items-center justify-center mr-2 flex-shrink-0",children:e.jsx(Z,{className:"h-4 w-4 text-grey-500"})}),e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${z?"bg-primary text-white rounded-tr-none":"bg-white border border-grey-200 rounded-tl-none"}`,children:[e.jsx("p",{className:"break-words",children:C.content}),e.jsx("p",{className:`text-xs mt-1 ${z?"text-primary-100":"text-grey-500"}`,children:xe(C.created_at)})]})]},C.id)}),e.jsx("div",{ref:w})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"bg-grey-100 rounded-full p-4 mb-4",children:e.jsx(Ne,{className:"h-8 w-8 text-grey-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Commencez la conversation"}),e.jsxs("p",{className:"text-grey-600 max-w-md",children:["Envoyez un message Ã  ",N.full_name,' Ã  propos de "',v.title,'"']})]})}),e.jsx("div",{className:"p-4 border-t border-grey-200",children:e.jsxs("form",{onSubmit:S,className:"flex items-center",children:[e.jsx("input",{type:"text",value:x,onChange:C=>p(C.target.value),placeholder:"Ã‰crivez votre message...",className:"input-field flex-grow",disabled:g}),e.jsx("button",{type:"submit",className:"btn-primary ml-2 flex items-center justify-center",disabled:!x.trim()||g,children:g?e.jsx(V,{size:"small",className:"text-white"}):e.jsx(Ee,{className:"h-5 w-5"})})]})})]})})})},Zs=()=>{const s=Y(),r=new URLSearchParams(s.search),m=r.get("listing_id"),i=r.get("type"),t=r.get("user_id"),n=T(),[d,h]=a.useState(!0),[x,p]=a.useState(null),[f,b]=a.useState("Votre paiement a Ã©tÃ© traitÃ© avec succÃ¨s !");return a.useEffect(()=>{(async()=>{try{if(await new Promise(j=>setTimeout(j,2e3)),m){const{data:j,error:v}=await k.from("listings").select("status").eq("id",m).single();!v&&j&&(j.status==="active"?b("Votre annonce a Ã©tÃ© publiÃ©e avec succÃ¨s !"):b("Paiement reÃ§u. Votre annonce sera publiÃ©e sous peu."))}else i==="pack"?(b("Vos crÃ©dits ont Ã©tÃ© ajoutÃ©s Ã  votre compte !"),localStorage.setItem("credit_purchase_pending","true")):i==="boost"&&b("Votre boost a Ã©tÃ© appliquÃ© avec succÃ¨s !");if(t){const{data:j,error:v}=await k.from("transactions").select("*").eq("user_id",t).eq("status","completed").order("created_at",{ascending:!1}).limit(1);!v&&j&&j.length>0&&p(j[0].id)}}catch(j){console.error("Error updating transaction:",j)}finally{h(!1)}})()},[m,i,t]),d?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(V,{size:"large"}),e.jsx("p",{className:"mt-4 text-grey-600",children:"Traitement de votre paiement..."})]})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-success-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ce,{className:"h-12 w-12 text-success"})}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Paiement rÃ©ussi !"}),e.jsx("p",{className:"text-grey-600 mb-6",children:f}),x&&e.jsxs("p",{className:"text-sm text-grey-500 mb-6",children:["RÃ©fÃ©rence de transaction: ",x]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[m&&e.jsx(L,{to:`/listings/${m}`,className:"btn-primary",children:"Voir mon annonce"}),i==="pack"&&e.jsx(L,{to:"/profile",className:"btn-primary",children:"Voir mes crÃ©dits"}),e.jsx("button",{onClick:()=>n("/"),className:"btn-secondary",children:"Retour Ã  l'accueil"})]}),e.jsx("div",{className:"mt-8 p-4 bg-primary-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-primary-700",children:["ðŸ’¡ ",e.jsx("strong",{children:"Merci d'utiliser DaloaMarket !"}),e.jsx("br",{}),"Votre paiement a Ã©tÃ© traitÃ© via PayDunya de maniÃ¨re sÃ©curisÃ©e."]})})]})})})},Hs=()=>{const s=T(),r=Y(),i=new URLSearchParams(r.search).get("type"),t=()=>{switch(i){case"pack":return()=>s("/acheter-credits");case"annonce":return()=>s("/create-listing");case"boost":return()=>s("/profile");default:return()=>s("/")}},n=()=>{switch(i){case"pack":return"RÃ©essayer l'achat de crÃ©dits";case"annonce":return"CrÃ©er une nouvelle annonce";case"boost":return"Retour au profil";default:return"Retour Ã  l'accueil"}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-error-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(A,{className:"h-12 w-12 text-error"})}),e.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Paiement annulÃ©"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Votre paiement a Ã©tÃ© annulÃ© ou n'a pas pu Ãªtre traitÃ©. Aucun montant n'a Ã©tÃ© dÃ©bitÃ© de votre compte."}),e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"Que s'est-il passÃ© ?"}),e.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Le paiement a Ã©tÃ© annulÃ© par l'utilisateur"}),e.jsx("li",{children:"â€¢ ProblÃ¨me de connexion avec PayDunya"}),e.jsx("li",{children:"â€¢ Solde insuffisant sur votre compte mobile money"}),e.jsx("li",{children:"â€¢ Timeout de la session de paiement"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx("button",{onClick:t(),className:"btn-primary",children:n()}),e.jsx(L,{to:"/help",className:"btn-outline",children:"Contacter le support"})]}),e.jsx("div",{className:"mt-8 p-4 bg-grey-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-grey-600",children:[e.jsx("strong",{children:"Besoin d'aide ?"}),e.jsx("br",{}),"Si vous rencontrez des difficultÃ©s rÃ©currentes, n'hÃ©sitez pas Ã  nous contacter via la page d'aide."]})})]})})})},Ks=({listingId:s,userEmail:r,userPhone:m,userFullName:i,onSuccess:t})=>{const[n,d]=a.useState(i||""),[h,x]=a.useState(r||""),[p,f]=a.useState(m||""),[b,g]=a.useState(null),[j,v]=a.useState(null),[P,N]=a.useState(!1),E=u=>{if(u.target.files&&u.target.files[0]){const q=u.target.files[0];g(q);const S=new FileReader;S.onloadend=()=>v(S.result),S.readAsDataURL(q)}},w=async u=>{if(u.preventDefault(),!n||!h||!p||!b){_.error("Tous les champs sont obligatoires.");return}N(!0);try{const S=await(U=>new Promise((F,$)=>{const B=new FileReader;B.readAsDataURL(U),B.onload=()=>F(B.result),B.onerror=ee=>$(ee)}))(b);let C="/api/send-listing-payment";(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(C="/.netlify/functions/send-listing-payment");let z,M;try{z=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listingId:s,fullName:n,email:h,phone:p,screenshotBase64:S,screenshotFilename:b.name})}),M=await z.json()}catch{_.error(`Erreur rÃ©seau ou API. VÃ©rifiez que la Netlify Function est bien dÃ©ployÃ©e.
DÃ©tail: rÃ©ponse non JSON reÃ§ue.`),N(!1);return}if(!z.ok)throw new Error(M.error||"Erreur lors de l'envoi");_.success("Demande envoyÃ©e, nous validerons votre paiement rapidement !"),t&&t()}catch(q){_.error(q.message||"Erreur lors de l'envoi.")}finally{N(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-8 border border-primary-100 animate-fade-in",children:[e.jsxs("h2",{className:"text-2xl font-bold text-center mb-6 text-primary flex items-center justify-center gap-2",children:[e.jsx("span",{role:"img","aria-label":"paiement",children:"ðŸ’³"})," Paiement de l'annonce"]}),e.jsxs("form",{onSubmit:w,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-grey-800",children:"Nom complet"}),e.jsx("input",{type:"text",className:"input-field w-full rounded-lg border-2 border-primary-100 focus:border-primary-400 transition",value:n,onChange:u=>d(u.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-grey-800",children:"TÃ©lÃ©phone"}),e.jsx("input",{type:"tel",className:"input-field w-full rounded-lg border-2 border-primary-100 focus:border-primary-400 transition",value:p,onChange:u=>f(u.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-grey-800",children:"Email"}),e.jsx("input",{type:"email",className:"input-field w-full rounded-lg border-2 border-primary-100 focus:border-primary-400 transition",value:h,onChange:u=>x(u.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 font-semibold text-grey-800",children:["Preuve de paiement ",e.jsx("span",{className:"text-xs text-grey-500",children:"(screenshot)"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:E,required:!0,className:"block w-full text-sm text-grey-700 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary hover:file:bg-primary-100"}),j&&e.jsxs("div",{className:"mt-3 flex flex-col items-center",children:[e.jsx("img",{src:j,alt:"AperÃ§u",className:"rounded-lg shadow-md max-h-40 border border-primary-200"}),e.jsx("span",{className:"text-xs text-grey-500 mt-1",children:"AperÃ§u de la preuve"})]})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex items-center justify-center py-3 text-lg font-semibold rounded-xl shadow-card border border-primary-200 bg-primary hover:bg-primary-600 text-white transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:P,children:P?e.jsx(V,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{role:"img","aria-label":"envoyer",children:"ðŸ“¤"})," Envoyer la demande"]})}),P&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("span",{className:"text-primary-600 text-sm animate-pulse",children:"Envoi en cours..."})})]})]})},Ys=()=>{var x;const{id:s}=ke(),{user:r,userProfile:m}=O(),i=T(),[t,n]=a.useState(!0),[d,h]=a.useState(null);return a.useEffect(()=>{(async()=>{n(!0);try{if(!s)return;const{data:f,error:b}=await k.from("listings").select("*").eq("id",s).single();if(b)throw b;h(f)}catch{_.error("Impossible de charger l'annonce"),i("/")}finally{n(!1)}})()},[s,i]),t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsx(V,{size:"large"})}):d?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-warning-50 to-white flex items-center justify-center py-8 px-2",children:e.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-2xl p-8 border border-warning-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-warning-700 mb-2 text-center",children:"Paiement de l'annonce"}),e.jsxs("p",{className:"text-base text-grey-700 mb-6 text-center",children:["Merci de rÃ©gler les frais de publication (200 FCFA) pour activer votre annonce.",e.jsx("br",{}),"Un membre de l'Ã©quipe validera la publication sous 24h."]}),e.jsxs("div",{className:"mb-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl overflow-hidden mb-2 border-2 border-warning-200 flex items-center justify-center bg-grey-50",children:e.jsx("img",{src:((x=d.photos)==null?void 0:x[0])||"https://via.placeholder.com/96",alt:d.title,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"text-lg font-semibold text-grey-900 mb-1",children:d.title}),e.jsx("div",{className:"text-warning-700 font-bold",children:"200 FCFA"})]}),e.jsx(Ks,{listingId:d.id,userEmail:(r==null?void 0:r.email)||"",userPhone:(m==null?void 0:m.phone)||"",userFullName:(m==null?void 0:m.full_name)||"",onSuccess:()=>{_.success("Preuve envoyÃ©e, nous validerons votre annonce rapidement !"),i(`/listings/${d.id}`)}}),e.jsxs("div",{className:"mt-6 text-center text-grey-500 text-xs",children:["Besoin d'aide ? Contactez-nous sur WhatsApp ou par email.",e.jsx("br",{}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"underline",children:"support@daloamarket.shop"})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce introuvable"}),e.jsx("button",{className:"btn-primary",onClick:()=>i("/"),children:"Retour Ã  l'accueil"})]})})},et=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(A,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvÃ©e"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"La page que vous recherchez n'existe pas ou a Ã©tÃ© dÃ©placÃ©e."}),e.jsx(L,{to:"/",className:"btn-primary",children:"Retour Ã  l'accueil"})]})})}),st=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-error-600",children:"Compte suspendu"}),e.jsx("p",{className:"text-grey-700",children:"Votre compte a Ã©tÃ© suspendu. Contactez le support si vous pensez qu'il s'agit d'une erreur."})]})}),tt=()=>{const[s,r]=a.useState([]),[m,i]=a.useState({}),[t,n]=a.useState({});a.useEffect(()=>{s.length>0&&i(s.reduce((c,o)=>(c[o.id]={credits:o.credits,role:o.role},c),{}))},[s]);const{userProfile:d}=O();a.useEffect(()=>{console.log("DEBUG SUPABASE:",k)},[]);const[h,x]=a.useState(!0),[p,f]=a.useState(null),[b,g]=a.useState([]),[j,v]=a.useState(!0),[P,N]=a.useState(null),[E,w]=a.useState([]),[u,q]=a.useState(!0),[S,C]=a.useState(null),[z,M]=a.useState([]),[U,F]=a.useState(!0),[$,B]=a.useState(null);a.useEffect(()=>{if(!d||d.role!=="admin")return;(async()=>{x(!0),f(null);try{const{data:o,error:l}=await k.from("users").select("id, email, full_name, role, banned, user_credits(credits)");if(l)throw l;const y=(o||[]).map(I=>{var W;return{id:I.id,email:I.email,full_name:I.full_name,role:I.role,banned:I.banned,credits:((W=I.user_credits)==null?void 0:W.credits)??0}});r(y)}catch(o){f(o.message||"Erreur lors du chargement des utilisateurs")}finally{x(!1)}})()},[d]),a.useEffect(()=>{if(!d||d.role!=="admin")return;(async()=>{v(!0),N(null);try{const{data:o,error:l}=await k.from("listings").select("id, title, user_id, price, status, created_at").order("created_at",{ascending:!1});if(l)throw l;g(o||[])}catch(o){N(o.message||"Erreur lors du chargement des annonces")}finally{v(!1)}})()},[d]),a.useEffect(()=>{if(!d||d.role!=="admin")return;(async()=>{q(!0),C(null);try{const{data:o,error:l}=await k.from("user_credits").select("user_id, credits, total_earned, total_spent");if(l)throw l;w(o||[])}catch(o){C(o.message||"Erreur lors du chargement des crÃ©dits")}finally{q(!1)}})()},[d]),a.useEffect(()=>{if(!d||d.role!=="admin")return;(async()=>{F(!0),B(null);try{const{data:o,error:l}=await k.from("transactions").select("id, user_id, amount, type, status, created_at").order("created_at",{ascending:!1});if(l)throw l;M(o||[])}catch(o){B(o.message||"Erreur lors du chargement des transactions")}finally{F(!1)}})()},[d]);const ee=async(c,o)=>{await k.from("users").update({banned:!o}).eq("id",c),r(l=>l.map(y=>y.id===c?{...y,banned:!o}:y))},G=async(c,o)=>{await k.from("user_credits").update({credits:o}).eq("user_id",c),r(l=>l.map(y=>y.id===c?{...y,credits:o}:y))},oe=async(c,o)=>{await k.from("users").update({role:o}).eq("id",c),r(l=>l.map(y=>y.id===c?{...y,role:o}:y))},se=async c=>{window.confirm("Supprimer cette annonce ?")&&(await k.from("listings").delete().eq("id",c),g(o=>o.filter(l=>l.id!==c)))},ce=async c=>{await k.from("listings").update({status:"disabled"}).eq("id",c),g(o=>o.map(l=>l.id===c?{...l,status:"disabled"}:l))},te=async c=>{await k.from("listings").update({status:"sold"}).eq("id",c),g(o=>o.map(l=>l.id===c?{...l,status:"sold"}:l))};return!d||d.role!=="admin"?e.jsx(de,{to:"/",replace:!0}):e.jsxs("div",{className:"min-h-screen bg-grey-50 py-10",children:[e.jsxs("div",{className:"container-custom max-w-5xl bg-white rounded-card shadow-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Tableau de bord Admin"}),e.jsx("p",{className:"mb-4 text-grey-700",children:"GÃ©rez les utilisateurs, bannissements et crÃ©dits."}),p&&e.jsx("div",{className:"text-error-600 mb-4",children:p}),h?e.jsx("div",{children:"Chargement..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"ID (court)"}),e.jsx("th",{className:"p-2",children:"Email"}),e.jsx("th",{className:"p-2",children:"Nom"}),e.jsx("th",{className:"p-2",children:"RÃ´le"}),e.jsx("th",{className:"p-2",children:"Banni"}),e.jsx("th",{className:"p-2",children:"CrÃ©dits"}),e.jsx("th",{className:"p-2",children:"Ajouter un pack"}),e.jsx("th",{className:"p-2",children:"Actions"}),e.jsx("th",{className:"p-2",children:"Sauvegarder"})]})}),e.jsx("tbody",{children:s.map(c=>{var re,K;const o=c.id.slice(0,6)+"..."+c.id.slice(-4),l=[{label:"+3 crÃ©dits (500 FCFA)",value:3,price:500},{label:"+10 crÃ©dits (1500 FCFA)",value:10,price:1500},{label:"+30 crÃ©dits (3500 FCFA)",value:30,price:3500}],y=m[c.id]||{credits:c.credits,role:c.role},I=X=>{i(J=>({...J,[c.id]:{...y,credits:y.credits+X}}))},W=X=>{i(J=>({...J,[c.id]:{...y,role:X}}))},H=async()=>{n(X=>({...X,[c.id]:{success:void 0,error:void 0}}));try{await G(c.id,y.credits),await oe(c.id,y.role),x(!0),f(null);const{data:X,error:J}=await k.from("users").select("id, email, full_name, role, banned, user_credits(credits)");if(J)throw J;const Je=(X||[]).map(le=>{var De;return{id:le.id,email:le.email,full_name:le.full_name,role:le.role,banned:le.banned,credits:((De=le.user_credits)==null?void 0:De.credits)??0}});r(Je),n(le=>({...le,[c.id]:{success:!0}}))}catch(X){f(X.message||"Erreur lors du rechargement"),n(J=>({...J,[c.id]:{error:X.message||"Erreur lors de la sauvegarde"}}))}finally{x(!1),setTimeout(()=>{n(X=>({...X,[c.id]:{}}))},2500)}};return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-mono text-xs",children:o}),e.jsx("td",{className:"p-2",children:c.email}),e.jsx("td",{className:"p-2",children:c.full_name}),e.jsx("td",{className:"p-2",children:e.jsxs("select",{className:"px-2 py-1 rounded border bg-white text-grey-800",value:y.role,onChange:X=>W(X.target.value),"aria-label":"Changer le rÃ´le",children:[e.jsx("option",{value:"user",children:"Utilisateur"}),e.jsx("option",{value:"moderator",children:"ModÃ©rateur"}),e.jsx("option",{value:"admin",children:"Admin"})]})}),e.jsx("td",{className:"p-2",children:c.banned?"Oui":"Non"}),e.jsx("td",{className:"p-2",children:y.credits}),e.jsx("td",{className:"p-2 flex flex-col gap-1",children:l.map(X=>e.jsx("button",{className:"px-2 py-1 rounded bg-blue-100 text-blue-800 border border-blue-300 hover:bg-blue-200",onClick:()=>I(X.value),children:X.label},X.value))}),e.jsx("td",{className:"p-2 flex gap-2 flex-wrap",children:e.jsx("button",{className:`px-2 py-1 rounded ${c.banned?"bg-green-500":"bg-red-500"} text-white`,onClick:()=>ee(c.id,c.banned),children:c.banned?"DÃ©bannir":"Bannir"})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex flex-col gap-1 items-start",children:[e.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:H,children:"Sauvegarder"}),((re=t[c.id])==null?void 0:re.success)&&e.jsx("span",{className:"text-green-600 text-xs",children:"Modifications enregistrÃ©es !"}),((K=t[c.id])==null?void 0:K.error)&&e.jsx("span",{className:"text-red-600 text-xs",children:t[c.id].error})]})})]},c.id)})})]})})]}),e.jsxs("div",{className:"container-custom max-w-5xl bg-white rounded-card shadow-card p-8 mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gestion des annonces"}),P&&e.jsx("div",{className:"text-error-600 mb-4",children:P}),j?e.jsx("div",{children:"Chargement des annonces..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"Titre"}),e.jsx("th",{className:"p-2",children:"ID utilisateur"}),e.jsx("th",{className:"p-2",children:"Prix"}),e.jsx("th",{className:"p-2",children:"Statut"}),e.jsx("th",{className:"p-2",children:"CrÃ©Ã©e le"}),e.jsx("th",{className:"p-2",children:"Actions"})]})}),e.jsx("tbody",{children:b.map(c=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:c.title}),e.jsx("td",{className:"p-2",children:c.user_id}),e.jsxs("td",{className:"p-2",children:[c.price," FCFA"]}),e.jsx("td",{className:"p-2",children:c.status}),e.jsx("td",{className:"p-2",children:new Date(c.created_at).toLocaleString()}),e.jsxs("td",{className:"p-2 flex gap-2 flex-wrap",children:[e.jsx("button",{className:"px-2 py-1 rounded bg-red-500 text-white",onClick:()=>se(c.id),children:"Supprimer"}),e.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white",onClick:()=>ce(c.id),disabled:c.status==="disabled",children:"DÃ©sactiver"}),e.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white",onClick:()=>te(c.id),disabled:c.status==="sold",children:"Marquer comme vendue"})]})]},c.id))})]})})]}),e.jsxs("div",{className:"container-custom max-w-5xl bg-white rounded-card shadow-card p-8 mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"CrÃ©dits & Gains utilisateurs"}),S&&e.jsx("div",{className:"text-error-600 mb-4",children:S}),u?e.jsx("div",{children:"Chargement des crÃ©dits..."}):e.jsx("div",{className:"overflow-x-auto mb-8",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"ID utilisateur"}),e.jsx("th",{className:"p-2",children:"CrÃ©dits"}),e.jsx("th",{className:"p-2",children:"Total gagnÃ©"}),e.jsx("th",{className:"p-2",children:"Total dÃ©pensÃ©"})]})}),e.jsx("tbody",{children:E.map(c=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:c.user_id}),e.jsx("td",{className:"p-2",children:c.credits}),e.jsxs("td",{className:"p-2",children:[c.total_earned," FCFA"]}),e.jsxs("td",{className:"p-2",children:[c.total_spent," FCFA"]})]},c.user_id))})]})}),e.jsx("h3",{className:"text-xl font-bold mb-2 mt-8",children:"Historique des transactions"}),$&&e.jsx("div",{className:"text-error-600 mb-4",children:$}),U?e.jsx("div",{children:"Chargement des transactions..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"ID"}),e.jsx("th",{className:"p-2",children:"Utilisateur"}),e.jsx("th",{className:"p-2",children:"Montant"}),e.jsx("th",{className:"p-2",children:"Type"}),e.jsx("th",{className:"p-2",children:"Statut"}),e.jsx("th",{className:"p-2",children:"Date"})]})}),e.jsx("tbody",{children:z.map(c=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:c.id}),e.jsx("td",{className:"p-2",children:c.user_id}),e.jsxs("td",{className:"p-2",children:[c.amount," FCFA"]}),e.jsx("td",{className:"p-2",children:c.type}),e.jsx("td",{className:"p-2",children:c.status}),e.jsx("td",{className:"p-2",children:new Date(c.created_at).toLocaleString()})]},c.id))})]})})]})]})},rt=()=>{const[s,r]=he.useState(null),m=t=>{r(s===t?null:t)},i=[{question:"Comment fonctionne le paiement des annonces ?",answer:"Le paiement se fait manuellement aprÃ¨s la crÃ©ation de votre annonce. Vous recevrez les instructions Ã  l'Ã©cran. Il n'y a plus de paiement automatique ni de boost."},{question:"Ã€ quoi servent les crÃ©dits ?",answer:"Les crÃ©dits servent uniquement Ã  publier des annonces. Il n'y a plus de boost ni d'autres options payantes."},{question:"Comment acheter des crÃ©dits ?",answer:"Rendez-vous sur la page 'Acheter des crÃ©dits' et suivez les instructions. Le paiement est manuel."},{question:"Puis-je booster mon annonce ?",answer:"Non, la fonctionnalitÃ© de boost a Ã©tÃ© retirÃ©e. Toutes les annonces sont affichÃ©es de faÃ§on Ã©quitable."}];return e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-3xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ DaloaMarket est en ",e.jsx("strong",{children:"phase de test (version bÃªta)"}),". Certaines fonctionnalitÃ©s peuvent Ã©voluer rapidement. Merci pour votre comprÃ©hension et vos retours !"]}),e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Questions frÃ©quentes"}),e.jsx("div",{className:"space-y-4",children:i.map((t,n)=>e.jsxs("div",{className:"border border-grey-200 rounded-lg overflow-hidden transition-shadow duration-300 hover:shadow-lg",children:[e.jsxs("button",{onClick:()=>m(n),className:"w-full flex justify-between items-center p-4 text-left font-medium focus:outline-none","aria-label":`Toggle FAQ ${n+1}: ${t.question}`,children:[e.jsx("span",{children:t.question}),s===n?e.jsx(ds,{className:"h-5 w-5 text-grey-500"}):e.jsx(ms,{className:"h-5 w-5 text-grey-500"})]}),s===n&&e.jsx("div",{className:"p-4 pt-0 text-grey-600 border-t border-grey-200",children:t.answer})]},n))}),e.jsxs("div",{className:"mt-8 p-4 bg-primary-50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Vous avez d'autres questions ?"}),e.jsx("p",{className:"text-grey-600 mb-4",children:"N'hÃ©sitez pas Ã  nous contacter si vous ne trouvez pas la rÃ©ponse Ã  votre question."}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"btn-primary inline-block transition-all duration-300 ease-in-out transform hover:scale-105",children:"Contacter le support"})]}),e.jsxs("div",{className:"mt-8 text-sm text-grey-600 text-center",children:["Besoin d'informations sur le projet ou son crÃ©ateur ? ",e.jsx("a",{href:"/about",className:"text-primary underline",children:"Voir la page Ã€ propos"})]})]})})})},at=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Conditions d'utilisation"}),e.jsxs("div",{className:"prose max-w-none text-grey-700",children:[e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ Daloa Market est actuellement en ",e.jsx("strong",{children:"phase de test (version bÃªta)"}),".",e.jsx("br",{}),"Cette plateforme Ã©volue rapidement grÃ¢ce Ã  vos retours. Certaines fonctionnalitÃ©s ou conditions peuvent changer sans prÃ©avis.",e.jsx("br",{}),e.jsx("strong",{children:"Aucune structure juridique formelle nâ€™est encore crÃ©Ã©e."})," Lâ€™activitÃ© reste Ã  petite Ã©chelle et sâ€™adapte selon les retours des utilisateurs."]}),e.jsx("p",{children:"Bienvenue sur DaloaMarket. En utilisant notre plateforme, vous acceptez les prÃ©sentes conditions d'utilisation. Veuillez les lire attentivement."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"1. Acceptation des conditions"}),e.jsx("p",{children:"En accÃ©dant Ã  DaloaMarket, vous acceptez d'Ãªtre liÃ© par ces conditions d'utilisation, toutes les lois et rÃ©glementations applicables, et vous acceptez que vous Ãªtes responsable du respect des lois locales applicables. Si vous n'acceptez pas ces conditions, vous ne devez pas utiliser ce site."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"2. Inscription et compte"}),e.jsx("p",{children:"Pour utiliser certaines fonctionnalitÃ©s de DaloaMarket, vous devez crÃ©er un compte. Vous Ãªtes responsable de maintenir la confidentialitÃ© de votre compte et mot de passe et de restreindre l'accÃ¨s Ã  votre ordinateur. Vous acceptez d'assumer la responsabilitÃ© de toutes les activitÃ©s qui se produisent sous votre compte."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"3. Publication d'annonces"}),e.jsxs("p",{children:["Pour publier une annonce sur DaloaMarket, vous devez disposer d'un crÃ©dit ou payer l'annonce Ã  l'unitÃ© (200 FCFA) par paiement manuel. Il n'y a plus de systÃ¨me de boost ou de mise en avant payante.",e.jsx("br",{}),"En publiant une annonce, vous garantissez que :"]}),e.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[e.jsx("li",{children:"Vous Ãªtes le propriÃ©taire lÃ©gitime de l'article ou autorisÃ© Ã  le vendre"}),e.jsx("li",{children:"L'article est lÃ©gal Ã  vendre en CÃ´te d'Ivoire"}),e.jsx("li",{children:"Les informations fournies sont exactes et complÃ¨tes"}),e.jsx("li",{children:"Les photos tÃ©lÃ©chargÃ©es reprÃ©sentent fidÃ¨lement l'article vendu"}),e.jsx("li",{children:"Vous respectez toutes les lois et rÃ©glementations applicables"})]}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"4. Articles interdits"}),e.jsx("p",{children:"Les articles suivants sont interdits sur DaloaMarket :"}),e.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[e.jsx("li",{children:"Produits illÃ©gaux ou contrefaits"}),e.jsx("li",{children:"Armes, explosifs et matÃ©riel dangereux"}),e.jsx("li",{children:"Drogues, mÃ©dicaments sur ordonnance et substances contrÃ´lÃ©es"}),e.jsx("li",{children:"Produits Ã  caractÃ¨re pornographique"}),e.jsx("li",{children:"Animaux vivants"}),e.jsx("li",{children:"Services illÃ©gaux ou contraires Ã  l'Ã©thique"}),e.jsx("li",{children:"Tout autre article interdit par la loi ivoirienne"})]}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"5. CrÃ©dits, frais et paiements"}),e.jsx("h2",{children:"1. Fonctionnement gÃ©nÃ©ral"}),e.jsx("p",{children:"DaloaMarket est une plateforme de mise en relation entre particuliers pour l'achat et la vente d'articles d'occasion Ã  Daloa. Les utilisateurs peuvent publier des annonces en utilisant des crÃ©dits. Le paiement de la publication se fait manuellement aprÃ¨s crÃ©ation de l'annonce. Il n'y a plus de boost ni de paiement automatique."}),e.jsx("h2",{children:"2. CrÃ©dits"}),e.jsx("p",{children:"Les crÃ©dits servent uniquement Ã  publier des annonces. Ils sont achetÃ©s manuellement via les moyens de paiement proposÃ©s (Mobile Money, etc.). Aucun crÃ©dit n'est remboursÃ© en cas de suppression d'annonce."}),e.jsx("h2",{children:"3. Paiement"}),e.jsx("p",{children:"Le paiement des crÃ©dits et des annonces se fait uniquement de faÃ§on manuelle. Aucune transaction automatique n'est effectuÃ©e par la plateforme. Les transactions entre acheteurs et vendeurs se font en personne, sans intervention de DaloaMarket."}),e.jsx("h2",{children:"4. Suppression des boosts"}),e.jsx("p",{children:"La fonctionnalitÃ© de boost d'annonce a Ã©tÃ© retirÃ©e. Toutes les annonces sont affichÃ©es de faÃ§on Ã©quitable."}),e.jsx("h2",{children:"5. ResponsabilitÃ©"}),e.jsx("p",{children:"DaloaMarket n'est pas responsable des transactions entre utilisateurs. Les utilisateurs doivent rester vigilants lors des Ã©changes."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"6. Transactions entre utilisateurs"}),e.jsx("p",{children:"DaloaMarket est une plateforme qui met en relation acheteurs et vendeurs. Nous ne sommes pas partie aux transactions entre utilisateurs et n'assumons aucune responsabilitÃ© pour les problÃ¨mes pouvant survenir lors de ces transactions. Nous recommandons aux utilisateurs de prendre les prÃ©cautions nÃ©cessaires lors des rencontres en personne et des Ã©changes d'argent."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"7. PropriÃ©tÃ© intellectuelle"}),e.jsx("p",{children:"Le contenu de DaloaMarket, y compris les textes, graphiques, logos, images, ainsi que leur compilation, est la propriÃ©tÃ© de DaloaMarket et est protÃ©gÃ© par les lois sur le droit d'auteur et la propriÃ©tÃ© intellectuelle. Vous ne pouvez pas reproduire, dupliquer, copier, vendre, revendre ou exploiter une partie du service sans autorisation expresse Ã©crite."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"8. Limitation de responsabilitÃ©"}),e.jsx("p",{children:"DaloaMarket ne garantit pas que le service sera ininterrompu, opportun, sÃ©curisÃ© ou sans erreur. DaloaMarket ne sera pas responsable des dommages directs, indirects, accessoires, spÃ©ciaux ou consÃ©cutifs rÃ©sultant de l'utilisation ou de l'impossibilitÃ© d'utiliser le service."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"9. Modifications des conditions"}),e.jsx("p",{children:"DaloaMarket se rÃ©serve le droit de modifier ces conditions d'utilisation Ã  tout moment. Les modifications entrent en vigueur dÃ¨s leur publication sur le site. Il est de votre responsabilitÃ© de consulter rÃ©guliÃ¨rement ces conditions."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"10. Loi applicable"}),e.jsx("p",{children:"Ces conditions sont rÃ©gies par les lois de la RÃ©publique de CÃ´te d'Ivoire. Tout litige relatif Ã  l'utilisation de DaloaMarket sera soumis Ã  la compÃ©tence exclusive des tribunaux d'Abidjan."}),e.jsx("p",{className:"mt-8",children:"Date de derniÃ¨re mise Ã  jour : 11 AoÃ»t 2025"})]})]})})}),lt=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Politique de confidentialitÃ©"}),e.jsxs("div",{className:"prose max-w-none text-grey-700",children:[e.jsx("h2",{children:"Collecte des donnÃ©es"}),e.jsx("p",{children:"Nous collectons uniquement les informations nÃ©cessaires Ã  la crÃ©ation de votre compte et Ã  la publication d'annonces (nom, email, tÃ©lÃ©phone, quartier)."}),e.jsx("h2",{children:"Utilisation des donnÃ©es"}),e.jsx("p",{children:"Vos donnÃ©es sont utilisÃ©es uniquement pour le fonctionnement de la plateforme. Aucun partage Ã  des tiers, aucun usage commercial externe."}),e.jsx("h2",{children:"Paiement"}),e.jsx("p",{children:"Les paiements sont rÃ©alisÃ©s manuellement. Aucune donnÃ©e bancaire n'est collectÃ©e ni stockÃ©e par DaloaMarket."}),e.jsx("h2",{children:"Suppression des donnÃ©es"}),e.jsx("p",{children:"Vous pouvez demander la suppression de votre compte et de vos donnÃ©es Ã  tout moment via le support."})]})]})})}),it=()=>{const{user:s,userProfile:r,updateUserProfile:m}=O(),i=T(),[t,n]=a.useState(!1),{register:d,handleSubmit:h,formState:{errors:x,isDirty:p}}=pe({defaultValues:{full_name:(r==null?void 0:r.full_name)||"",phone:(r==null?void 0:r.phone)||"",district:(r==null?void 0:r.district)||""}}),f=async b=>{n(!0);try{const{error:g}=await m({full_name:b.full_name,phone:b.phone,district:b.district});if(g)throw g;_.success("Profil mis Ã  jour avec succÃ¨s"),i("/profile")}catch(g){console.error("Profile update error:",g),_.error(g.message||"Erreur lors de la mise Ã  jour du profil")}finally{n(!1)}};return r?e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"ParamÃ¨tres du compte"}),e.jsxs("form",{onSubmit:h(f),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:"input-field bg-grey-50",value:(s==null?void 0:s.email)||"",disabled:!0}),e.jsx("p",{className:"text-xs text-grey-500 mt-1",children:"L'email ne peut pas Ãªtre modifiÃ©"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full_name",className:"input-label",children:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"full_name",type:"text",className:`input-field pl-10 ${x.full_name?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre nom complet",...d("full_name",{required:"Le nom complet est requis",minLength:{value:3,message:"Le nom doit contenir au moins 3 caractÃ¨res"}}),disabled:t}),e.jsx(Z,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.full_name&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),x.full_name.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"input-label",children:"NumÃ©ro de tÃ©lÃ©phone"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"phone",type:"tel",className:`input-field pl-10 ${x.phone?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"+225 XX XX XX XX XX",...d("phone",{required:"Le numÃ©ro de tÃ©lÃ©phone est requis",validate:b=>Ge(b)||"Veuillez entrer un numÃ©ro de tÃ©lÃ©phone ivoirien valide"}),disabled:t}),e.jsx(me,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.phone&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),x.phone.message]}),e.jsx("p",{className:"text-xs text-grey-500 mt-1",children:"Format: +225 XX XX XX XX XX ou 07 XX XX XX XX"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label",children:"Quartier Ã  Daloa"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"district",className:`input-field pl-10 ${x.district?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...d("district",{required:"Le quartier est requis"}),disabled:t,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez votre quartier"}),_e.map(b=>e.jsx("option",{value:b,children:b},b))]}),e.jsx(ue,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.district&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),x.district.message]})]}),e.jsxs("div",{className:"flex justify-end pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i("/profile"),className:"btn-outline mr-3",disabled:t,children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:t||!p,children:t?e.jsx(V,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"h-5 w-5 mr-2"}),"Enregistrer"]})})]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(V,{size:"large"})})},nt=()=>{const[s,r]=a.useState(!1),[m,i]=a.useState(!1),{register:t,handleSubmit:n,reset:d,formState:{errors:h}}=pe(),x=async()=>{r(!0);try{await new Promise(p=>setTimeout(p,1500)),_.success("Message envoyÃ© avec succÃ¨s"),i(!0),d()}catch(p){console.error("Error sending message:",p),_.error("Erreur lors de l'envoi du message")}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsxs("div",{className:"container-custom max-w-6xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Aide & Support"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Contactez-nous"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(we,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email"}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-grey-600 hover:text-primary",children:"support@daloamarket.shop"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"TÃ©lÃ©phones"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("a",{href:"tel:+2250788000831",className:"text-grey-600 hover:text-primary block",children:"+225 07 88 00 08 31 (Orange/Wave)"}),e.jsx("a",{href:"tel:+2250555863953",className:"text-grey-600 hover:text-primary block",children:"+225 05 55 86 39 53 (MTN)"})]})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(ue,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Adresse"}),e.jsxs("p",{className:"text-grey-600",children:["Quartier Lobia",e.jsx("br",{}),"Daloa, CÃ´te d'Ivoire"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Liens utiles"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(L,{to:"/faq",className:"text-grey-600 hover:text-primary transition-colors",children:"Questions frÃ©quentes"})}),e.jsx("li",{children:e.jsx(L,{to:"/terms",className:"text-grey-600 hover:text-primary transition-colors",children:"Conditions d'utilisation"})}),e.jsx("li",{children:e.jsx(L,{to:"/privacy",className:"text-grey-600 hover:text-primary transition-colors",children:"Politique de confidentialitÃ©"})})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Envoyez-nous un message"}),e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ Daloa Market est actuellement en ",e.jsx("strong",{children:"phase de test (version bÃªta)"}),".",e.jsx("br",{}),"Cette plateforme Ã©volue rapidement grÃ¢ce Ã  vos retours. Certaines fonctionnalitÃ©s ou conditions peuvent changer sans prÃ©avis.",e.jsx("br",{}),e.jsx("strong",{children:"Aucune structure juridique formelle n'est encore crÃ©Ã©e."})," L'activitÃ© reste Ã  petite Ã©chelle et s'adapte selon les retours des utilisateurs."]}),m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"h-16 w-16 bg-success-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ee,{className:"h-8 w-8 text-success"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Message envoyÃ© !"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Merci de nous avoir contactÃ©s. Nous vous rÃ©pondrons dans les plus brefs dÃ©lais."}),e.jsx("button",{onClick:()=>i(!1),className:"btn-primary",children:"Envoyer un autre message"})]}):e.jsxs("form",{onSubmit:n(x),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"input-label",children:"Nom complet"}),e.jsx("input",{id:"name",type:"text",className:`input-field ${h.name?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre nom",...t("name",{required:"Le nom est requis"}),disabled:s}),h.name&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),h.name.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:`input-field ${h.email?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"votre@email.com",...t("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),disabled:s}),h.email&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),h.email.message]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"input-label",children:"Sujet"}),e.jsx("input",{id:"subject",type:"text",className:`input-field ${h.subject?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Sujet de votre message",...t("subject",{required:"Le sujet est requis"}),disabled:s}),h.subject&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),h.subject.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"input-label",children:"Message"}),e.jsx("textarea",{id:"message",rows:6,className:`input-field ${h.message?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre message...",...t("message",{required:"Le message est requis",minLength:{value:10,message:"Le message doit contenir au moins 10 caractÃ¨res"}}),disabled:s}),h.message&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),h.message.message]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:s,children:s?e.jsx(V,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-5 w-5 mr-2"}),"Envoyer le message"]})})})]})]})})]})]})})},ot=()=>{const r=Y().hash,m=new URLSearchParams(r.replace("#","")),i=m.get("error"),t=m.get("error_description"),[n,d]=he.useState(!1),[h,x]=he.useState(!1),[p,f]=he.useState(!1),[b,g]=he.useState(150);he.useEffect(()=>{if(i){d(!1),g(150);const v=setInterval(()=>{g(P=>P<=1?(clearInterval(v),d(!0),0):P-1)},1e3);return()=>clearInterval(v)}},[i]);const j=async()=>{x(!0),await new Promise(v=>setTimeout(v,1200)),x(!1),f(!0)};return e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-card shadow-card p-8 max-w-md w-full text-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-16 w-16 text-error-500 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Lien invalide ou expirÃ©"}),e.jsx("p",{className:"text-grey-700 mb-4",children:decodeURIComponent(t||"Le lien de confirmation est invalide ou a expirÃ©. Vous pouvez demander un nouveau lien ou vous inscrire Ã  nouveau.")}),e.jsx(L,{to:"/login",className:"btn-primary w-full mb-3",children:"Retour Ã  la connexion"}),n&&!p&&e.jsx("button",{className:"btn-outline w-full",onClick:j,disabled:h,children:h?"Envoi en cours...":"Renvoyer l'email de confirmation"}),p&&e.jsx("div",{className:"text-success-700 mt-2 text-sm",children:"Email de confirmation renvoyÃ© !"}),!n&&e.jsxs("div",{className:"text-grey-500 mt-2 text-xs",children:["Vous pourrez demander un nouvel email dans ",Math.floor(b/60),":",(b%60).toString().padStart(2,"0"),"."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-16 w-16 text-success mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Email confirmÃ© !"}),e.jsx("p",{className:"text-grey-700 mb-4",children:"Votre adresse email a bien Ã©tÃ© confirmÃ©e. Vous pouvez maintenant vous connecter et profiter de DaloaMarket."}),e.jsx(L,{to:"/login",className:"btn-primary w-full",children:"Revenir sur DaloaMarket"})]})})})},Ve=[{id:"starter",name:"Starter",credits:3,price:500,description:"Pour publier vos premiÃ¨res annonces",popular:!1},{id:"regular",name:"Regular",credits:10,price:1500,description:"Le plus populaire pour publier plusieurs annonces",popular:!0},{id:"pro",name:"Pro",credits:30,price:3500,description:"Pour publier beaucoup dâ€™annonces",popular:!1}],Ue=()=>{const{user:s}=O(),r=T(),[m,i]=a.useState("explanation"),[t,n]=a.useState(!1),[d,h]=a.useState({selectedPack:"",phoneNumber:"",email:(s==null?void 0:s.email)||"",fullName:"",screenshot:null}),x=g=>{var v;const j=(v=g.target.files)==null?void 0:v[0];if(j){if(j.size>5*1024*1024){_.error("Le fichier ne doit pas dÃ©passer 5MB");return}if(!j.type.startsWith("image/")){_.error("Veuillez sÃ©lectionner une image");return}h(P=>({...P,screenshot:j}))}},p=g=>new Promise((j,v)=>{const P=new FileReader;P.readAsDataURL(g),P.onload=()=>j(P.result),P.onerror=N=>v(N)}),f=async g=>{if(g.preventDefault(),!d.selectedPack||!d.phoneNumber||!d.email||!d.fullName||!d.screenshot){_.error("Veuillez remplir tous les champs");return}n(!0);try{const j=await p(d.screenshot),v=await fetch("/.netlify/functions/send-credit-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedPack:d.selectedPack,phoneNumber:d.phoneNumber,email:d.email,fullName:d.fullName,screenshotBase64:j,screenshotFilename:d.screenshot.name})}),P=await v.json();if(!v.ok)throw new Error(P.error||"Erreur lors de l'envoi");_.success("Demande envoyÃ©e avec succÃ¨s !"),i("success")}catch(j){console.error("Erreur:",j),_.error(j instanceof Error?j.message:"Erreur lors de l'envoi")}finally{n(!1)}},b=Ve.find(g=>g.id===d.selectedPack);return m==="explanation"?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(ne,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Acheter des crÃ©dits"})]})}),e.jsxs("div",{className:"container-custom py-4 lg:py-8",children:[e.jsxs("div",{className:"hidden lg:block mb-8",children:[e.jsxs("button",{onClick:()=>r(-1),className:"flex items-center text-grey-600 hover:text-grey-900 transition-colors mb-4",children:[e.jsx(ne,{className:"h-5 w-5 mr-2"}),"Retour"]}),e.jsx("h1",{className:"text-3xl font-bold text-grey-900",children:"Acheter des crÃ©dits"})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-lg lg:shadow-xl p-6 lg:p-8 mb-6",children:[e.jsxs("div",{className:"text-center mb-6 lg:mb-8",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-orange-100 to-orange-200 rounded-2xl lg:rounded-3xl flex items-center justify-center mx-auto mb-4 lg:mb-6",children:e.jsx(us,{className:"h-8 w-8 lg:h-10 lg:w-10 text-orange-600"})}),e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-3 lg:mb-4",children:"Processus d'achat avec envoi automatique"}),e.jsx("p",{className:"text-grey-600 text-base lg:text-lg leading-relaxed",children:"Effectuez votre paiement puis envoyez-nous la preuve. Votre demande sera traitÃ©e automatiquement par email."})]}),e.jsxs("div",{className:"space-y-4 lg:space-y-6 mb-6 lg:mb-8",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm lg:text-base",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-grey-900 mb-1 lg:mb-2",children:"Choisissez votre pack"}),e.jsx("p",{className:"text-grey-600 text-sm lg:text-base",children:"SÃ©lectionnez le nombre de crÃ©dits souhaitÃ©"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm lg:text-base",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-grey-900 mb-1 lg:mb-2",children:"Effectuez le paiement"}),e.jsx("p",{className:"text-grey-600 text-sm lg:text-base",children:"Envoyez le montant via :"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-grey-700 font-medium text-sm lg:text-base",children:[e.jsx("strong",{children:"Orange Money/Wave :"})," +225 07 88 00 08 31"]}),e.jsxs("p",{className:"text-grey-700 font-medium text-sm lg:text-base",children:[e.jsx("strong",{children:"MTN Mobile Money :"})," +225 05 55 86 39 53"]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm lg:text-base",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-grey-900 mb-1 lg:mb-2",children:"Envoyez les preuves automatiquement"}),e.jsx("p",{className:"text-grey-600 text-sm lg:text-base",children:"TÃ©lÃ©chargez votre capture d'Ã©cran et remplissez le formulaire. Un email sera envoyÃ© automatiquement Ã  notre Ã©quipe."})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-orange-50 rounded-xl lg:rounded-2xl p-4 lg:p-6 mb-6 lg:mb-8",children:[e.jsxs("h3",{className:"font-semibold text-primary-800 mb-3 lg:mb-4 flex items-center",children:[e.jsx(me,{className:"h-5 w-5 mr-2"}),"Informations de paiement"]}),e.jsxs("div",{className:"space-y-2 text-sm lg:text-base",children:[e.jsxs("p",{className:"text-primary-700",children:[e.jsx("strong",{children:"Orange Money/Wave :"})," +225 07 88 00 08 31"]}),e.jsxs("p",{className:"text-primary-700",children:[e.jsx("strong",{children:"MTN Mobile Money :"})," +225 05 55 86 39 53"]})]})]}),e.jsx("button",{onClick:()=>i("form"),className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:from-primary-600 hover:to-orange-600 transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl text-base lg:text-lg",children:"Continuer vers l'achat"})]})})]})]}):m==="form"?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>i("explanation"),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(ne,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Formulaire d'achat"})]})}),e.jsxs("div",{className:"container-custom py-4 lg:py-8",children:[e.jsxs("div",{className:"hidden lg:block mb-8",children:[e.jsxs("button",{onClick:()=>i("explanation"),className:"flex items-center text-grey-600 hover:text-grey-900 transition-colors mb-4",children:[e.jsx(ne,{className:"h-5 w-5 mr-2"}),"Retour"]}),e.jsx("h1",{className:"text-3xl font-bold text-grey-900",children:"Formulaire d'achat"})]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-lg lg:shadow-xl p-6 lg:p-8 mb-6",children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-4 lg:mb-6",children:"Choisissez votre pack"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:Ve.map(g=>e.jsxs("div",{onClick:()=>h(j=>({...j,selectedPack:g.id})),className:`relative cursor-pointer rounded-xl lg:rounded-2xl border-2 p-4 lg:p-6 transition-all duration-200 transform hover:scale-105 ${d.selectedPack===g.id?"border-primary bg-primary-50 shadow-lg":"border-grey-200 bg-white hover:border-primary-200 hover:shadow-md"}`,children:[g.popular&&e.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"POPULAIRE"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-bold text-lg lg:text-xl text-grey-900 mb-2",children:g.name}),e.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-primary mb-2",children:g.credits}),e.jsx("div",{className:"text-sm text-grey-600 mb-2",children:"crÃ©dits"}),e.jsxs("div",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-2",children:[g.price," FCFA"]}),e.jsx("div",{className:"text-xs lg:text-sm text-grey-500",children:g.description})]}),d.selectedPack===g.id&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Ce,{className:"h-5 w-5 lg:h-6 lg:w-6 text-primary"})})]},g.id))})]}),d.selectedPack&&e.jsxs("form",{onSubmit:f,className:"bg-white rounded-2xl lg:rounded-3xl shadow-lg lg:shadow-xl p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-4 lg:mb-6",children:"Informations de transaction"}),e.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-orange-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-primary-800",children:"Pack sÃ©lectionnÃ©"}),e.jsxs("p",{className:"text-primary-700",children:[b==null?void 0:b.name," - ",b==null?void 0:b.credits," crÃ©dits"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[b==null?void 0:b.price," FCFA"]})})]})}),e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"Capture d'Ã©cran de la transaction *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",id:"screenshot-upload",required:!0}),e.jsx("label",{htmlFor:"screenshot-upload",className:`flex flex-col items-center justify-center w-full h-32 lg:h-40 border-2 border-dashed rounded-xl lg:rounded-2xl cursor-pointer transition-colors ${d.screenshot?"border-primary bg-primary-50":"border-grey-300 bg-grey-50 hover:border-primary hover:bg-primary-50"}`,children:d.screenshot?e.jsxs("div",{className:"text-center",children:[e.jsx(Ce,{className:"h-8 w-8 lg:h-10 lg:w-10 text-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm lg:text-base font-medium text-primary",children:d.screenshot.name}),e.jsx("p",{className:"text-xs lg:text-sm text-grey-600",children:"Cliquez pour changer"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(Be,{className:"h-8 w-8 lg:h-10 lg:w-10 text-grey-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm lg:text-base font-medium text-grey-600",children:"TÃ©lÃ©charger la capture"}),e.jsx("p",{className:"text-xs lg:text-sm text-grey-500",children:"PNG, JPG jusqu'Ã  5MB"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"NumÃ©ro qui a Ã©tÃ© dÃ©bitÃ© *"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-grey-400"}),e.jsx("input",{type:"tel",id:"phone",value:d.phoneNumber,onChange:g=>h(j=>({...j,phoneNumber:g.target.value})),className:"w-full pl-10 pr-4 py-3 lg:py-4 border border-grey-300 rounded-xl lg:rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-base lg:text-lg",placeholder:"+225 XX XX XX XX XX",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-grey-400"}),e.jsx("input",{type:"email",id:"email",value:d.email,onChange:g=>h(j=>({...j,email:g.target.value})),className:"w-full pl-10 pr-4 py-3 lg:py-4 border border-grey-300 rounded-xl lg:rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-base lg:text-lg",placeholder:"votre@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"Nom complet *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-grey-400"}),e.jsx("input",{type:"text",id:"fullName",value:d.fullName,onChange:g=>h(j=>({...j,fullName:g.target.value})),className:"w-full pl-10 pr-4 py-3 lg:py-4 border border-grey-300 rounded-xl lg:rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-base lg:text-lg",placeholder:"Votre nom complet",required:!0})]})]})]}),e.jsx("div",{className:"mt-6 lg:mt-8",children:e.jsx("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:from-primary-600 hover:to-orange-600 transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-base lg:text-lg flex items-center justify-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"small",className:"text-white mr-2"}),"Envoi en cours..."]}):"Envoyer la demande"})}),e.jsx("div",{className:"mt-4 lg:mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(A,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm lg:text-base text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Traitement automatique"}),e.jsx("p",{children:"Votre demande sera envoyÃ©e automatiquement par email Ã  notre Ã©quipe. Vous recevrez une confirmation dans les 24h."})]})]})})]})]})]})]}):m==="success"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-xl p-6 lg:p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center mx-auto mb-4 lg:mb-6",children:e.jsx(Ce,{className:"h-8 w-8 lg:h-10 lg:w-10 text-green-600"})}),e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-3 lg:mb-4",children:"Demande envoyÃ©e !"}),e.jsx("p",{className:"text-grey-600 mb-6 lg:mb-8 text-base lg:text-lg leading-relaxed",children:"Votre demande d'achat de crÃ©dits a Ã©tÃ© envoyÃ©e automatiquement par email Ã  notre Ã©quipe. Vous recevrez une confirmation dans les 24h."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>r("/profile"),className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:from-primary-600 hover:to-orange-600 transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl text-base lg:text-lg",children:"Retour au profil"}),e.jsx("button",{onClick:()=>r("/"),className:"w-full border-2 border-grey-300 text-grey-700 font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:border-grey-400 hover:bg-grey-50 transition-all duration-200 text-base lg:text-lg",children:"Retour Ã  l'accueil"})]})]})}):null},ct=()=>{const{user:s}=O(),r=T(),m=i=>{s||(i.preventDefault(),r("/login",{replace:!0,state:{from:"/acheter-credits"}}))};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-10",children:e.jsxs("div",{className:"container-custom max-w-2xl bg-white rounded-card shadow-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Comment Ã§a marche ?"}),e.jsxs("ol",{className:"space-y-8 mt-8",children:[e.jsxs("li",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"1. CrÃ©ez votre annonce"}),e.jsx("p",{className:"text-grey-700",children:"Prenez des photos, dÃ©crivez votre article, fixez votre prix et publiez. Le paiement de la publication se fait manuellement aprÃ¨s crÃ©ation. Vous pouvez ajouter plusieurs photos pour attirer plus dâ€™acheteurs."})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"2. Discutez avec les acheteurs"}),e.jsx("p",{className:"text-grey-700",children:"Recevez des messages et rÃ©pondez via notre messagerie sÃ©curisÃ©e. Pas de boost, pas de paiement automatique. Vous pouvez nÃ©gocier, poser des questions et convenir dâ€™un rendez-vous."})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"3. Vendez en toute simplicitÃ©"}),e.jsx("p",{className:"text-grey-700",children:"Rencontrez lâ€™acheteur dans votre quartier en toute sÃ©curitÃ©. Le paiement se fait directement entre vous et lâ€™acheteur, sans intermÃ©diaire."})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Conseils pour rÃ©ussir vos ventes"}),e.jsxs("ul",{className:"list-disc pl-6 text-grey-700 space-y-2",children:[e.jsx("li",{children:"Ajoutez des photos claires et rÃ©centes de votre article."}),e.jsx("li",{children:"DÃ©crivez prÃ©cisÃ©ment lâ€™Ã©tat, la marque, la taille, etc."}),e.jsx("li",{children:"RÃ©pondez rapidement aux messages pour ne pas rater une vente."}),e.jsx("li",{children:"PrivilÃ©giez les lieux publics pour les rendez-vous."}),e.jsx("li",{children:"Ne partagez jamais vos informations sensibles."})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Questions frÃ©quentes"}),e.jsxs("ul",{className:"list-disc pl-6 text-grey-700 space-y-2",children:[e.jsxs("li",{children:["Comment acheter des crÃ©ditsÂ ?"," ",e.jsxs("span",{className:"text-grey-500",children:[e.jsx(L,{to:"/acheter-credits",onClick:m,className:"text-primary underline hover:text-primary-700 font-medium",children:'AccÃ©der Ã  la page "Acheter des crÃ©dits"'})," ","(dans votre profil)"]})]}),e.jsxs("li",{children:["Comment signaler un utilisateurÂ ?"," ",e.jsx("span",{className:"text-grey-500",children:'Utilisez le bouton "Signaler" sur le profil ou la conversation.'})]}),e.jsxs("li",{children:["Que faire en cas de problÃ¨meÂ ?"," ",e.jsx("span",{className:"text-grey-500",children:e.jsx(L,{to:"/help",className:"text-primary underline hover:text-primary-700 font-medium",children:"Contactez le support via la page Aide"})})]})]})]})]})})};function dt(){const{user:s,userProfile:r}=O();return r&&r.banned?e.jsx(de,{to:"/banned",replace:!0}):e.jsxs(hs,{children:[e.jsx(D,{path:"/admin",element:e.jsx(tt,{})}),e.jsx(D,{path:"/",element:e.jsx(R,{children:e.jsx(As,{})})}),e.jsx(D,{path:"/login",element:s?e.jsx(de,{to:"/",replace:!0}):e.jsx(R,{children:e.jsx(Ms,{})})}),e.jsx(D,{path:"/register",element:s?e.jsx(de,{to:"/",replace:!0}):e.jsx(R,{children:e.jsx(Is,{})})}),e.jsx(D,{path:"/auth/reset-password",element:e.jsx(R,{children:e.jsx(Rs,{})})}),e.jsx(D,{path:"/auth/update-password",element:e.jsx(R,{children:e.jsx(Vs,{})})}),e.jsx(D,{path:"/complete-profile",element:e.jsx(R,{children:e.jsx(ie,{children:r&&r.full_name&&r.phone&&r.district?e.jsx(de,{to:"/",replace:!0}):e.jsx(Us,{})})})}),e.jsx(D,{path:"/email-confirmed",element:e.jsx(R,{children:e.jsx(ot,{})})}),e.jsx(D,{path:"/create-listing",element:e.jsx(R,{children:e.jsx(ie,{requireProfile:!0,children:e.jsx(Ts,{})})})}),e.jsx(D,{path:"/listings/:id",element:e.jsx(R,{children:e.jsx(Bs,{})})}),e.jsx(D,{path:"/search",element:e.jsx(R,{children:e.jsx(Qs,{})})}),e.jsx(D,{path:"/messages",element:e.jsx(R,{children:e.jsx(ie,{requireProfile:!0,children:e.jsx(Gs,{})})})}),e.jsx(D,{path:"/acheter-credits",element:e.jsx(R,{children:e.jsx(ie,{children:e.jsx(Ue,{})})})}),e.jsx(D,{path:"/messages/:listingId/:userId",element:e.jsx(R,{children:e.jsx(ie,{requireProfile:!0,children:e.jsx(Js,{})})})}),e.jsx(D,{path:"/profile",element:e.jsx(R,{children:e.jsx(ie,{requireProfile:!0,children:e.jsx($s,{})})})}),e.jsx(D,{path:"/profile/seller/:sellerId",element:e.jsx(R,{children:e.jsx(Xs,{})})}),e.jsx(D,{path:"/settings",element:e.jsx(R,{children:e.jsx(ie,{requireProfile:!0,children:e.jsx(it,{})})})}),e.jsx(D,{path:"/paiement-annonce/:id",element:e.jsx(R,{children:e.jsx(Ys,{})})}),e.jsx(D,{path:"/payment/success",element:e.jsx(R,{children:e.jsx(Zs,{})})}),e.jsx(D,{path:"/payment/failure",element:e.jsx(R,{children:e.jsx(Hs,{})})}),e.jsx(D,{path:"/about",element:e.jsx(R,{children:e.jsx(Fs,{})})}),e.jsx(D,{path:"/faq",element:e.jsx(R,{children:e.jsx(rt,{})})}),e.jsx(D,{path:"/terms",element:e.jsx(R,{children:e.jsx(at,{})})}),e.jsx(D,{path:"/privacy",element:e.jsx(R,{children:e.jsx(lt,{})})}),e.jsx(D,{path:"/help",element:e.jsx(R,{children:e.jsx(nt,{})})}),e.jsx(D,{path:"/how-it-works",element:e.jsx(R,{children:e.jsx(ct,{})})}),e.jsx(D,{path:"/acheter-credits",element:e.jsx(R,{children:e.jsx(ie,{requireProfile:!0,children:e.jsx(Ue,{})})})}),e.jsx(D,{path:"/banned",element:e.jsx(st,{})}),e.jsx(D,{path:"*",element:e.jsx(R,{children:e.jsx(et,{})})})]})}ps.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(gs,{children:e.jsxs(Ns,{children:[e.jsx(dt,{}),e.jsx(bs,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#FFFFFF",color:"#1F2937",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},success:{iconTheme:{primary:"#10B981",secondary:"#FFFFFF"}},error:{iconTheme:{primary:"#EF4444",secondary:"#FFFFFF"}}}})]})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(s=>{}).catch(s=>{})});
