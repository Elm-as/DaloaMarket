import{r as a,j as e,u as G,a as te,H as ts,S as ye,P as rs,M as we,U as se,b as Qe,L as Ge,c as q,d as ve,e as as,f as Fe,g as me,h as fe,i as Se,E as Ee,N as ge,Z as He,C as Ie,k as ae,A as De,l as ls,m as L,n as R,T as is,o as ns,p as os,q as be,s as Ae,t as Le,v as cs,w as oe,x as ke,y as Je,z as ds,B as ms,D as xs,F as Te,G as us,X as je,I as Me,J as _e,R as pe,K as hs,O as ps,Q as gs,V as fs,W as bs,Y as $,_ as js,$ as ys,a0 as vs}from"./vendor_react-DVArjDnh.js";import{c as Xe}from"./vendor_supabase-CdTbtxhw.js";import{t as Ns,o as ws,q as Ze,v as B,w as Ss}from"./vendor_misc-CgabP8CO.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const Ke="https://hyvzvycmmmrdiwnlnyiz.supabase.co",Cs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5dnp2eWNtbW1yZGl3bmxueWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA3NjExNTQsImV4cCI6MjA3NjMzNzE1NH0.S1fTyX0wVluHWeCz3sN-VkKkJPeKgVDEXP1o948yZf4",ks=s=>{try{return new URL(s),!0}catch{return!1}},$e=ks(Ke);$e||(console.warn("âš ï¸ Supabase not configured properly. Please update your .env file with actual Supabase credentials."),console.warn("Instructions:"),console.warn("1. Go to https://supabase.com and create a project"),console.warn("2. Go to Settings â†’ API in your Supabase dashboard"),console.warn("3. Copy your Project URL and anon key to the .env file"),console.warn("4. Restart your development server"));const k=$e?Xe(Ke,Cs):Xe("https://placeholder.supabase.co","placeholder-key"),ee=$e,Ye=a.createContext(void 0),_s=({children:s})=>{const[r,n]=a.useState(null),[i,t]=a.useState(null),[o,l]=a.useState(null),[m,x]=a.useState(!0),h=a.useCallback(async()=>{if(!ee){x(!1);return}try{const{data:{session:w}}=await k.auth.getSession();try{const c=w;console.debug("[Auth] checkSession -> hasSession:",!!w,"hasRefresh:",!!(c!=null&&c.refresh_token),"expires_at:",c==null?void 0:c.expires_at)}catch(c){console.debug("[Auth] checkSession -> debug log failed",c)}if(w){const c=w;if(!c.refresh_token){const v=Math.floor(Date.now()/1e3),g=c.expires_at??0;if(g&&g<=v){console.warn("Session found without refresh_token but access token is expired. Clearing session.");try{await k.auth.signOut()}catch(f){console.warn("Error signing out invalid session:",f)}n(null),t(null),l(null),x(!1);return}console.warn("Session found without refresh_token. Keeping session temporarily to allow immediate actions (e.g. complete profile).")}}n(w),t((w==null?void 0:w.user)??null),w!=null&&w.user&&await b(w.user.id)}catch(w){console.error("Error checking session:",w)}finally{x(!1)}},[]);a.useEffect(()=>{if(!ee){x(!1);return}const{data:{subscription:w}}=k.auth.onAuthStateChange(async(c,v)=>{try{const g=v;console.debug("[Auth] onAuthStateChange",c,"hasSession:",!!v,"hasRefresh:",!!(g!=null&&g.refresh_token),"expires_at:",g==null?void 0:g.expires_at)}catch(g){console.debug("[Auth] onAuthStateChange -> debug log failed",g)}if(v){const g=v;if(!g.refresh_token){const f=Math.floor(Date.now()/1e3),_=g.expires_at??0;if(_&&_<=f){console.warn("Received expired session without refresh_token via onAuthStateChange; clearing.");try{await k.auth.signOut()}catch(I){console.warn("Error signing out expired session:",I)}n(null),t(null),l(null);return}console.warn("Received session without refresh_token via onAuthStateChange; keeping temporarily to allow profile completion.")}}n(v),t((v==null?void 0:v.user)??null),v!=null&&v.user?b(v.user.id):l(null)});return h(),()=>{w.unsubscribe()}},[h]);const b=async w=>{if(!ee){console.warn("Supabase not configured - cannot fetch user profile");return}try{const{data:c,error:v}=await k.from("users").select("*").eq("id",w).maybeSingle();if(v)throw v;l(c)}catch(c){console.error("Error fetching user profile:",c),l(null)}},A={session:r,user:i,userProfile:o,signUp:async(w,c)=>{var v,g;if(!ee)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{const f=await k.auth.signUp({email:w,password:c});try{console.debug("[Auth] signUp -> session returned:",!!((v=f.data)!=null&&v.session),"error:",!!f.error)}catch(D){console.debug("[Auth] signUp -> debug log failed",D)}if(f.error)try{console.error("[Auth] signUp error details:",f.error,"res.data:",f.data)}catch(D){console.error("[Auth] signUp error logging failed",D)}const _=((g=f.data)==null?void 0:g.session)??null;let I=!_;if(_&&!_.refresh_token){I=!0;try{await k.auth.signOut()}catch(O){console.warn("Error signing out partial session after signUp:",O)}}return{error:f.error,requiresConfirmation:I,session:_}}catch(f){try{console.error("[Auth] signUp unexpected exception:",f)}catch(_){console.error("[Auth] signUp exception logging failed",_)}return{error:f}}},signIn:async(w,c)=>{var v,g;if(!ee)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{const f=await k.auth.signInWithPassword({email:w,password:c});try{console.debug("[Auth] signIn -> session returned:",!!((v=f.data)!=null&&v.session),"error:",!!f.error)}catch(I){console.debug("[Auth] signIn -> debug log failed",I)}const _=((g=f.data)==null?void 0:g.session)??null;if(_&&!_.refresh_token){try{await k.auth.signOut()}catch(D){console.warn("Error signing out partial session after signIn:",D)}return{error:new Error("Session invalide: token de rafraÃ®chissement manquant. Veuillez confirmer votre email ou rÃ©essayer.")}}return{error:f.error}}catch(f){return{error:f}}},signOut:async()=>{if(!ee)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{const{error:w}=await k.auth.signOut();return{error:w}}catch(w){return{error:w}}},createUserProfile:async w=>{if(!ee)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{if(!i)return{error:new Error("User not authenticated")};const{data:{session:c}}=await k.auth.getSession();if(!c)return{error:new Error("Session invalide. Veuillez vous reconnecter ou confirmer votre adresse email.")};const v=c;if(!v.refresh_token){const f=Math.floor(Date.now()/1e3),_=v.expires_at??0;if(_&&_<=f)return{error:new Error("Session expirÃ©e. Veuillez vous reconnecter.")};console.warn("Proceeding with DB write despite missing refresh_token; access token valid until",_)}const{error:g}=await k.from("users").insert({...w,id:i.id});return g||await b(i.id),{error:g}}catch(c){return{error:c}}},updateUserProfile:async w=>{if(!ee)return{error:new Error("Supabase not configured. Please check your environment variables.")};try{if(!i)return{error:new Error("User not authenticated")};const{data:{session:c}}=await k.auth.getSession();if(!c)return{error:new Error("Session invalide. Veuillez vous reconnecter ou confirmer votre adresse email.")};const v=c;if(!v.refresh_token){const f=Math.floor(Date.now()/1e3),_=v.expires_at??0;if(_&&_<=f)return{error:new Error("Session expirÃ©e. Veuillez vous reconnecter.")};console.warn("Proceeding with profile update despite missing refresh_token; access token valid until",_)}const{error:g}=await k.from("users").upsert({id:i.id,...w},{onConflict:"id"});return g||await b(i.id),{error:g}}catch(c){return{error:c}}},refreshUserProfile:async()=>{i&&ee&&await b(i.id)}};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsx(Ye.Provider,{value:A,children:s})},Ve=()=>{const s=a.useContext(Ye);if(s===void 0)throw new Error("useSupabase must be used within a SupabaseProvider");return s},H=Ve,es=!0,he=10,Ps=({onClose:s})=>{const{user:r,signOut:n,userProfile:i}=H(),t=G(),o=te(),l=async()=>{await n(),s(),t("/")},m=h=>{t(h),s()},x=h=>o.pathname===h;return e.jsxs("div",{className:"fixed inset-0 z-40 flex flex-col justify-end items-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-md mx-auto bottom-0 z-50 bg-white rounded-3xl shadow-2xl border-t border-primary-100 animate-slide-up overflow-hidden",children:[e.jsx("button",{onClick:s,className:"absolute top-3 right-3 p-2 rounded-full bg-white/80 shadow hover:bg-grey-100 transition z-50","aria-label":"Fermer le menu",children:e.jsx("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"grid grid-cols-5 gap-1 px-2 py-3",children:[e.jsxs("button",{onClick:()=>m("/"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all ${x("/")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(ts,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Accueil"})]}),e.jsxs("button",{onClick:()=>m("/search"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all ${x("/search")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(ye,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Recherche"})]}),e.jsxs("button",{onClick:()=>m("/create-listing"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all border-2 border-blue-200 shadow-xl scale-110 transform hover:scale-105 bg-gradient-to-br from-blue-500 to-blue-700 text-white ${x("/create-listing")?"ring-2 ring-blue-400":""}`,style:{zIndex:2},children:[e.jsx(rs,{className:"h-7 w-7 mb-1"}),e.jsx("span",{className:"text-xs font-bold",children:"Vendre"})]}),e.jsxs("button",{onClick:()=>m("/messages"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all relative ${x("/messages")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(we,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Messages"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-error-500 rounded-full border-2 border-white"})]}),e.jsxs("button",{onClick:()=>m("/profile"),className:`flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all ${x("/profile")?"bg-primary text-white shadow-xl scale-105":"text-grey-600 hover:bg-grey-100"}`,children:[e.jsx(se,{className:"h-6 w-6 mb-1"}),e.jsx("span",{className:"text-xs font-semibold",children:"Profil"})]})]}),r&&e.jsx("div",{className:"border-t border-grey-100 px-5 py-4 bg-gradient-to-r from-primary-50 to-orange-50",children:e.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[!es,e.jsxs("button",{onClick:()=>m("/settings"),className:"flex flex-col items-center py-2 px-3 bg-gradient-to-br from-grey-50 to-grey-100 rounded-lg border border-grey-200 hover:from-grey-100 hover:to-grey-200 transition-all",children:[e.jsx(Qe,{className:"h-4 w-4 text-grey-600 mb-1"}),e.jsx("span",{className:"text-xs font-medium text-grey-700",children:"RÃ©glages"})]}),e.jsxs("button",{onClick:l,className:"flex flex-col items-center py-2 px-3 bg-gradient-to-br from-red-50 to-red-100 rounded-lg border border-red-200 hover:from-red-100 hover:to-red-200 transition-all",children:[e.jsx(Ge,{className:"h-4 w-4 text-red-600 mb-1"}),e.jsx("span",{className:"text-xs font-medium text-red-700",children:"Sortir"})]})]})})]})]})},Ls=()=>e.jsx("span",{className:"text-xs bg-gradient-to-r from-orange-500 to-orange-600 text-white px-2 py-0.5 rounded-full font-bold",children:"BÃŠTA"}),qs=()=>{const[s,r]=a.useState(!1),[n,i]=a.useState(""),{user:t}=H(),o=G(),l=x=>{x.preventDefault(),n.trim()&&o(`/search?q=${encodeURIComponent(n.trim())}`)},m=()=>{r(!s)};return e.jsxs("header",{className:"sticky top-0 z-50 shadow-lg border-b border-grey-100 bg-white/90 md:bg-white/95 backdrop-blur-md",children:[e.jsxs("div",{className:"container-custom py-0 sm:py-3 lg:py-4",children:[e.jsxs("div",{className:"flex items-center justify-between md:justify-between",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center",children:e.jsxs(q,{to:"/",className:"flex items-center group flex-shrink-0",children:[e.jsx("div",{className:"h-8 w-8 sm:h-8 sm:w-8 lg:h-10 lg:w-10 bg-gradient-to-br from-primary to-primary-600 rounded-xl flex items-center justify-center mr-2 group-hover:scale-105 transition-transform shadow-md",children:e.jsx(ve,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-white"})}),e.jsx("span",{className:"text-lg lg:text-xl font-bold text-grey-900 leading-none",children:"DaloaMarket"}),e.jsx("div",{className:"scale-75 sm:scale-100 origin-left ml-1",children:e.jsx(Ls,{})})]})}),e.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-4 lg:mx-8",children:e.jsxs("form",{onSubmit:l,className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un produit...",className:"w-full py-2 lg:py-2.5 pl-9 lg:pl-10 pr-3 lg:pr-4 rounded-lg lg:rounded-xl border border-grey-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-grey-50 focus:bg-white transition-all text-sm lg:text-base",value:n,onChange:x=>i(x.target.value)}),e.jsx(ye,{className:"absolute left-2.5 lg:left-3 top-2 lg:top-2.5 h-4 w-4 lg:h-5 lg:w-5 text-grey-400"}),e.jsx("button",{type:"submit",className:"absolute right-1 lg:right-1.5 top-0.5 lg:top-1 bg-primary text-white py-1.5 lg:py-2 px-2.5 lg:px-3 rounded-md lg:rounded-lg hover:bg-primary-600 transition-colors font-medium text-xs lg:text-sm",children:"Rechercher"})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[e.jsx(q,{to:"/search",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Rechercher",children:e.jsx(ye,{className:"h-5 w-5 lg:h-6 lg:w-6"})}),e.jsx(q,{to:"/about",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Ã€ propos",children:"Ã€ propos"}),e.jsx(q,{to:"/help",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Aide & Support",children:"Aide"}),e.jsx(q,{to:"/messages",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all relative touch-target",title:"Messages",children:e.jsx(we,{className:"h-5 w-5 lg:h-6 lg:w-6"})}),t?e.jsx(q,{to:"/profile",className:"p-2 lg:p-2.5 rounded-lg text-grey-700 hover:text-primary hover:bg-primary-50 transition-all touch-target",title:"Mon profil",children:e.jsx(se,{className:"h-5 w-5 lg:h-6 lg:w-6"})}):e.jsx(q,{to:"/login",className:"btn-outline py-2 px-3 lg:py-2 lg:px-4 ml-2 text-xs lg:text-sm",children:"Connexion"}),e.jsx(q,{to:"/create-listing",className:"btn-primary py-2 lg:py-2.5 px-3 lg:px-4 ml-2 font-semibold text-xs lg:text-sm",children:"Vendre"})]}),e.jsx("button",{className:"md:hidden p-2 rounded-full bg-white/80 shadow-md text-grey-700 hover:bg-primary-50 transition-colors touch-target flex-shrink-0 ml-2",onClick:m,"aria-label":s?"Fermer le menu":"Ouvrir le menu",children:e.jsx(as,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"mt-2 md:hidden",children:e.jsxs("form",{onSubmit:l,className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un produit...",className:"w-full py-2.5 pl-9 pr-3 rounded-lg border border-grey-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white/80 focus:bg-white transition-all text-sm shadow-sm",value:n,onChange:x=>i(x.target.value)}),e.jsx(ye,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-grey-400"}),e.jsx("button",{type:"submit",className:"absolute right-1.5 top-1 bg-primary text-white py-1.5 px-3 rounded-md hover:bg-primary-600 transition-colors text-xs font-medium",children:"Rechercher"})]})})]}),s&&e.jsx(Ps,{onClose:m})]})},Es=()=>e.jsx("footer",{className:"bg-gradient-to-br from-grey-900 to-grey-800 text-white mt-auto",children:e.jsxs("div",{className:"container-custom py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[e.jsxs(q,{to:"/",className:"flex items-center mb-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-primary to-primary-600 rounded-xl flex items-center justify-center mr-3",children:e.jsx(ve,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold",children:"DaloaMarket"})]}),e.jsx("p",{className:"text-grey-300 leading-relaxed mb-4",children:"La premiÃ¨re marketplace P2P de Daloa. Achetez et vendez facilement depuis chez vous."}),e.jsxs("div",{className:"flex items-center text-sm text-grey-400",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2 text-primary"}),"Fait Ã  Daloa pour Daloa"]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6 text-primary-100",children:"Liens rapides"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(q,{to:"/",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Accueil"})})}),e.jsx("li",{children:e.jsx(q,{to:"/search",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Rechercher"})})}),e.jsx("li",{children:e.jsx(q,{to:"/create-listing",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Vendre un article"})})}),e.jsx("li",{children:e.jsx(q,{to:"/profile",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Mon compte"})})})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6 text-primary-100",children:"CatÃ©gories"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx(q,{to:"/search?category=fashion",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Mode & Accessoires"})})}),e.jsx("li",{children:e.jsx(q,{to:"/search?category=electronics",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Ã‰lectronique"})})}),e.jsx("li",{children:e.jsx(q,{to:"/search?category=home",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Maison & Jardin"})})}),e.jsx("li",{children:e.jsx(q,{to:"/search?category=vehicles",className:"text-grey-300 hover:text-primary transition-colors flex items-center group",children:e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"Auto & Moto"})})})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6 text-primary-100",children:"Contact"}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start group",children:[e.jsx(me,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-grey-300 group-hover:text-white transition-colors",children:"Daloa, CÃ´te d'Ivoire"})]}),e.jsxs("li",{className:"flex items-center group",children:[e.jsx(fe,{className:"h-5 w-5 text-primary mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("a",{href:"tel:+2250788000831",className:"text-grey-300 hover:text-primary transition-colors",children:"+225 07 88 00 08 31"}),e.jsx("a",{href:"tel:+2250555863953",className:"text-grey-300 hover:text-primary transition-colors text-sm",children:"+225 05 55 86 39 53"})]})]}),e.jsxs("li",{className:"flex items-center group",children:[e.jsx(Se,{className:"h-5 w-5 text-primary mr-3 flex-shrink-0"}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-grey-300 hover:text-primary transition-colors",children:"support@daloamarket.shop"})]})]})]})]}),e.jsx("div",{className:"border-t border-grey-700 mt-12 pt-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsxs("p",{className:"text-grey-400 text-sm mb-2",children:["Â© ",new Date().getFullYear()," DaloaMarket. Tous droits rÃ©servÃ©s."]}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500/20 to-orange-600/20 border border-orange-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-orange-300 leading-relaxed",children:["âš ï¸ ",e.jsx("strong",{children:"Version BÃªta"})," - Projet Ã©tudiant en dÃ©veloppement. Aucune structure juridique formelle n'a encore Ã©tÃ© crÃ©Ã©e."]})})]}),e.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-end gap-6",children:[e.jsxs(q,{to:"/terms",className:"text-grey-400 hover:text-primary text-sm transition-colors flex items-center",children:["Conditions d'utilisation",e.jsx(Ee,{className:"h-3 w-3 ml-1"})]}),e.jsxs(q,{to:"/privacy",className:"text-grey-400 hover:text-primary text-sm transition-colors flex items-center",children:["ConfidentialitÃ©",e.jsx(Ee,{className:"h-3 w-3 ml-1"})]}),e.jsxs(q,{to:"/help",className:"text-grey-400 hover:text-primary text-sm transition-colors flex items-center",children:["Aide",e.jsx(Ee,{className:"h-3 w-3 ml-1"})]})]})]})})]})}),T=({children:s})=>{const r=te();return a.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[r.pathname]),e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(qs,{}),e.jsx("main",{className:"flex-grow",children:s}),e.jsx(Es,{})]})},ne=({children:s,requireProfile:r=!1})=>{const{user:n,userProfile:i}=H(),t=te();return n?r&&!i?e.jsx(ge,{to:"/complete-profile\\",state:{from:t},replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(ge,{to:"/login\\",state:{from:t},replace:!0})};function zs(...s){return Ns(ws(s))}const ce=s=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),de=s=>{const r=new Date(s);return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(r)},Fs=s=>{if(!s)return"";const r=s.replace(/\D/g,"");return r.startsWith("225")&&r.length===13?`+${r.slice(0,3)} ${r.slice(3,5)} ${r.slice(5,8)} ${r.slice(8,10)} ${r.slice(10)}`:r.length===10?`+225 ${r.slice(0,2)} ${r.slice(2,5)} ${r.slice(5,7)} ${r.slice(7)}`:s},ss=s=>{const r=s.replace(/\D/g,"");return r.startsWith("225")?r.length===13:r.length===10},As=s=>({new:"Neuf",like_new:"TrÃ¨s bon Ã©tat",good:"Bon Ã©tat",used:"UsagÃ©"})[s]||s,Ms=s=>({fashion:"Mode & Accessoires",electronics:"Ã‰lectronique & High-tech",home:"Maison & Jardin",vehicles:"Auto & Moto",sports:"Sports & Loisirs",books:"Livres & Culture"})[s]||s,qe=["Abattoir 1","Abattoir 2 (Sud B)","Aviation","BaoulÃ©","Belleville","Bribouo","CAFOP","Commerce","Dalolabia","Dioulabougou","Gbeuliville","Gbokora","GbobÃ©lÃ©","Huberson","Kennedy 1","Kennedy 2","Kirman","Lobia","Marais","Orly 1","Piscine","Sapia","Soleil 1","Soleil 2","Sud A","Tagoura","Tazibouo","Tazibouo Piscine","Zakoua"],Ne=[{id:"fashion",label:"Mode & Accessoires"},{id:"electronics",label:"Ã‰lectronique & High-tech"},{id:"home",label:"Maison & Jardin"},{id:"vehicles",label:"Auto & Moto"},{id:"sports",label:"Sports & Loisirs"},{id:"books",label:"Livres & Culture"}],Re=[{id:"new",label:"Neuf"},{id:"like_new",label:"TrÃ¨s bon Ã©tat"},{id:"good",label:"Bon Ã©tat"},{id:"used",label:"UsagÃ©"}],Rs=({listing:s,onPress:r,sellerName:n,sellerRating:i})=>{const t=s.photos&&s.photos.length>0?s.photos[0]:"https://images.pexels.com/photos/4386321/pexels-photo-4386321.jpeg?auto=compress&cs=tinysrgb&w=400",o=s.boosted_until&&new Date(s.boosted_until)>new Date,l=Ze(),[m,x]=a.useState(!1),h=()=>e.jsxs("article",{className:"group bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-sm overflow-hidden border border-grey-100",role:"article",children:[e.jsxs("div",{className:"relative aspect-[4/3] md:aspect-square overflow-hidden bg-grey-100",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-grey-200 to-grey-100 ${m?"opacity-0":"opacity-100"} ${l?"":"animate-pulse"} transition-opacity duration-300`,"aria-hidden":"true"}),e.jsx("img",{src:t,alt:s.title,loading:"lazy",decoding:"async",onLoad:()=>x(!0),className:`w-full h-full object-cover ${m?"opacity-100":"opacity-0"} group-hover:scale-105 transition-all duration-300 will-change-transform`}),o&&e.jsxs("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-primary to-primary-600 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center shadow-md",children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"SponsorisÃ©"}),e.jsx("span",{className:"sm:hidden",children:"Boost"})]}),s.status==="sold"&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("span",{className:"bg-error-600 text-white px-3 py-1 rounded-full font-bold text-xs",children:"VENDU"})}),s.photos&&s.photos.length>1&&e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-0.5 rounded-full",children:s.photos.length})]}),e.jsxs("div",{className:"p-3 sm:p-3 lg:p-4 space-y-1.5 sm:space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold text-grey-900 line-clamp-2 text-sm md:text-base leading-tight group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-primary",children:ce(s.price)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-grey-600",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[e.jsx(me,{className:"h-3 w-3 mr-1 text-grey-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.district})]}),e.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1 text-grey-400"}),e.jsx("span",{className:"text-xs",children:de(s.created_at)})]})]}),n&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-grey-100",children:[e.jsx("span",{className:"text-xs text-grey-800 font-semibold truncate flex-1",title:`Voir l'annonce de ${n}`,children:n}),i&&e.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[e.jsx(ae,{className:"h-3 w-3 text-primary"}),e.jsx("span",{className:"text-xs font-medium ml-0.5",children:i.toFixed(1)})]}),e.jsx("div",{className:"ml-3 flex-shrink-0",children:e.jsxs("span",{className:"inline-flex items-center justify-center w-11 h-11 rounded-full bg-primary text-white shadow-md",children:[e.jsx(De,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Voir l'annonce"})]})})]})]})]}),b="w-full block text-left rounded-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40";return r?e.jsx("button",{type:"button",onClick:r,className:`${b} active:scale-98`,"aria-label":`Ouvrir l'annonce ${s.title}`,children:e.jsx(B.div,{whileHover:l?void 0:{y:-6,scale:1.02},whileTap:l?void 0:{scale:.985},transition:{type:"spring",stiffness:260,damping:20},children:e.jsx(h,{})})}):e.jsx(q,{to:`/listings/${s.id}`,className:`${b} ${l?"":"hover:shadow-lg"}`,"aria-label":`Voir ${s.title} â€” ${ce(s.price)}`,children:e.jsx(B.div,{whileHover:l?void 0:{y:-6,scale:1.02},whileTap:l?void 0:{scale:.985},transition:{type:"spring",stiffness:260,damping:20},children:e.jsx(h,{})})})},Is={small:"h-4 w-4",medium:"h-6 w-6",large:"h-12 w-12"},Ds={primary:"text-primary",white:"text-white",grey:"text-grey-400"},W=({size:s="medium",color:r="primary",className:n})=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(ls,{className:zs("animate-spin",Is[s],Ds[r],n)})}),$s=()=>{const[s,r]=a.useState([]),[n,i]=a.useState(!0),{userProfile:t,user:o}=H(),[l,m]=a.useState(null);return a.useEffect(()=>{(async()=>{if(!ee){i(!1);return}try{const{data:h,error:b}=await k.from("listings").select(`
            *,
            users:user_id (
              full_name,
              rating
            )
          `).eq("status","active").order("created_at",{ascending:!1}).limit(8);if(b)throw b;const p=h.map(u=>{var N,C;return{...u,seller_name:((N=u.users)==null?void 0:N.full_name)||"Utilisateur",seller_rating:((C=u.users)==null?void 0:C.rating)||null}});r(p)}catch(h){console.error("Error fetching listings:",h)}finally{i(!1)}})()},[]),a.useEffect(()=>{(async()=>{if(!(o!=null&&o.id)||!ee){m(null);return}const{data:h,error:b}=await k.from("user_credits").select("credits").eq("user_id",o.id).single();m(b?null:(h==null?void 0:h.credits)??0)})()},[o]),a.useEffect(()=>{localStorage.getItem("credit_purchase_pending")&&(L.success("CrÃ©dits ajoutÃ©s Ã  votre compte !"),localStorage.removeItem("credit_purchase_pending"))},[]),ee?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100 text-base",children:[e.jsxs(B.section,{className:"relative overflow-hidden bg-gradient-to-br from-primary-600 via-primary to-primary-400 py-8 px-2 sm:py-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative section-padding",children:e.jsxs("div",{className:"responsive-container text-center",children:[e.jsxs(B.h1,{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-extrabold text-white mb-4 sm:mb-6 lg:mb-8 leading-tight",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.8},children:["Achetez et vendez",e.jsx(B.span,{className:"block text-primary-100",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.6},children:"Ã  Daloa"})]}),e.jsx(B.p,{className:"text-white text-base sm:text-lg lg:text-xl opacity-95 mb-6 sm:mb-8 lg:mb-10 leading-relaxed px-2",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7,duration:.6},children:"La premiÃ¨re marketplace P2P de Daloa. Achetez et vendez simplement, sans boost ni paiement automatique. Les crÃ©dits servent uniquement Ã  publier des annonces."}),t&&(!t.full_name||!t.phone||!t.district)&&e.jsxs("div",{className:"mb-4 sm:mb-6 lg:mb-8 p-2.5 sm:p-3 lg:p-4 bg-warning-100 border border-warning-300 rounded-lg lg:rounded-xl max-w-xs sm:max-w-sm mx-auto",children:[e.jsx("p",{className:"text-warning-800 font-medium mb-2 text-base sm:text-lg lg:text-xl",children:"Profil incomplet"}),e.jsx(q,{to:"/complete-profile",className:"btn-primary bg-warning-600 hover:bg-warning-700 border-warning-600 text-base sm:text-lg lg:text-xl py-2 lg:py-3",children:"ComplÃ©ter mon profil"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 lg:gap-6 justify-center max-w-xs sm:max-w-md mx-auto",children:[e.jsx(q,{to:"/search",className:"btn-secondary bg-white text-primary hover:bg-grey-100 flex-1 py-3 sm:py-4 lg:py-5 text-base sm:text-lg lg:text-xl font-semibold",children:"Parcourir"}),e.jsx(q,{to:"/create-listing",className:"btn-primary bg-secondary hover:bg-secondary-600 flex-1 py-3 sm:py-4 lg:py-5 text-base sm:text-lg lg:text-xl font-semibold",children:"Vendre"})]})]})}),e.jsx("div",{className:"absolute top-5 left-5 w-8 h-8 sm:w-12 sm:h-12 lg:w-16 lg:h-16 bg-white opacity-10 rounded-full"}),e.jsx("div",{className:"absolute bottom-5 right-5 w-12 h-12 sm:w-16 sm:h-16 lg:w-24 lg:h-24 bg-white opacity-5 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-6 h-6 sm:w-8 sm:h-8 lg:w-12 lg:h-12 bg-white opacity-10 rounded-full"})]}),e.jsx("section",{className:"section-padding pt-8 pb-8",children:e.jsx("div",{className:"responsive-container",children:e.jsxs(B.div,{className:"grid grid-cols-3 gap-2 sm:gap-3 lg:gap-4 max-w-2xl mx-auto",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,staggerChildren:.2},viewport:{once:!0},children:[e.jsxs(B.div,{className:"text-center bg-white rounded-lg shadow-sm p-2 sm:p-3 lg:p-4 border border-grey-100 flex flex-col items-center",initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5},viewport:{once:!0},children:[e.jsx("div",{className:"w-7 h-7 sm:w-9 sm:h-9 lg:w-10 lg:h-10 bg-primary-100 rounded-lg flex items-center justify-center mb-1",children:e.jsx(is,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-primary"})}),e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-grey-900 mb-0.5",children:"500+"}),e.jsx("p",{className:"text-grey-600 text-xs sm:text-sm lg:text-base leading-tight",children:"Annonces publiÃ©es"})]}),e.jsxs(B.div,{className:"text-center bg-white rounded-lg shadow-sm p-2 sm:p-3 lg:p-4 border border-grey-100 flex flex-col items-center",initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5,delay:.1},viewport:{once:!0},children:[e.jsx("div",{className:"w-7 h-7 sm:w-9 sm:h-9 lg:w-10 lg:h-10 bg-secondary-100 rounded-lg flex items-center justify-center mb-1",children:e.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-secondary"})}),e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-grey-900 mb-0.5",children:"200+"}),e.jsx("p",{className:"text-grey-600 text-xs sm:text-sm lg:text-base leading-tight",children:"Utilisateurs actifs"})]}),e.jsxs(B.div,{className:"text-center bg-white rounded-lg shadow-sm p-2 sm:p-3 lg:p-4 border border-grey-100 flex flex-col items-center",initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5,delay:.2},viewport:{once:!0},children:[e.jsx("div",{className:"w-7 h-7 sm:w-9 sm:h-9 lg:w-10 lg:h-10 bg-success-100 rounded-lg flex items-center justify-center mb-1",children:e.jsx(os,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-success"})}),e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-bold text-grey-900 mb-0.5",children:"100%"}),e.jsx("p",{className:"text-grey-600 text-xs sm:text-sm lg:text-base leading-tight",children:"Transactions sÃ©curisÃ©es"})]})]})})}),e.jsx("section",{className:"section-padding bg-white",children:e.jsxs("div",{className:"responsive-container",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8 lg:mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-grey-900 mb-3 sm:mb-4 lg:mb-6",children:"Explorez par catÃ©gorie"}),e.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-grey-600",children:"Trouvez exactement ce que vous cherchez"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 lg:gap-6",children:Ne.map(x=>e.jsxs(q,{to:`/search?category=${x.id}`,className:"group bg-gradient-to-br from-grey-50 to-white rounded-lg lg:rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 p-3 sm:p-4 lg:p-6 text-center border border-grey-100 hover:border-primary-200 transform hover:-translate-y-1",children:[e.jsx("div",{className:"h-8 w-8 sm:h-12 sm:w-12 lg:h-16 lg:w-16 bg-gradient-to-br from-primary-100 to-primary-200 rounded-lg lg:rounded-xl flex items-center justify-center mx-auto mb-2 sm:mb-3 lg:mb-4 group-hover:scale-110 transition-transform",children:e.jsx(ve,{className:"h-4 w-4 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-grey-900 text-xs sm:text-sm lg:text-base leading-tight group-hover:text-primary transition-colors",children:x.label})]},x.id))})]})}),e.jsx("section",{className:"section-padding bg-gradient-to-br from-grey-50 to-grey-100",children:e.jsxs("div",{className:"responsive-container",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 sm:mb-8 lg:mb-12 gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-grey-900 mb-1 sm:mb-2",children:"DerniÃ¨res annonces"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl text-grey-600",children:"DÃ©couvrez les nouveautÃ©s"})]}),e.jsxs(q,{to:"/search",className:"text-primary font-semibold flex items-center hover:text-primary-700 transition-colors text-sm sm:text-base lg:text-lg flex-shrink-0",children:["Voir tout",e.jsx(De,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 ml-1 sm:ml-2"})]})]}),n?e.jsx("div",{className:"flex justify-center py-12 sm:py-16 lg:py-20",children:e.jsx(W,{size:"large"})}):s.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:s.map(x=>e.jsx(Rs,{listing:x,sellerName:x.seller_name,sellerRating:x.seller_rating},x.id))}):e.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-xl p-6 sm:p-8 lg:p-12 text-center max-w-xl mx-auto",children:[e.jsx(ve,{className:"h-12 w-12 sm:h-16 sm:w-16 lg:h-20 lg:w-20 text-primary mx-auto mb-3 sm:mb-4 lg:mb-6"}),e.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-3 lg:mb-4",children:"Aucune annonce pour le moment"}),e.jsx("p",{className:"text-grey-600 mb-4 sm:mb-6 lg:mb-8 text-sm sm:text-base lg:text-lg",children:"Aucune annonce n'est encore en ligne. Publiez la vÃ´tre, le paiement se fait dÃ©sormais manuellement aprÃ¨s crÃ©ation."}),e.jsx(q,{to:"/create-listing",className:"btn-primary text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8 py-2.5 sm:py-3 lg:py-4",children:"Publier une annonce"})]})]})}),e.jsx("section",{className:"section-padding bg-white",children:e.jsxs("div",{className:"responsive-container text-center",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-grey-900 mb-2 sm:mb-3 lg:mb-4",children:"Nouveau sur DaloaMarket ?"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl text-grey-600 mb-4",children:"DÃ©couvrez le fonctionnement de la plateforme en dÃ©tail."}),e.jsx(q,{to:"/how-it-works",className:"btn-primary text-base sm:text-lg px-6 py-3",children:"Voir comment Ã§a marche"})]})}),e.jsxs("section",{className:"section-padding bg-gradient-to-r from-secondary via-secondary-600 to-secondary-700 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsxs("div",{className:"relative responsive-container text-center",children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-4xl font-bold text-white mb-3 sm:mb-4 lg:mb-6",children:"PrÃªt Ã  vendre vos articles ?"}),e.jsx("p",{className:"text-white opacity-95 mb-6 sm:mb-8 lg:mb-10 text-sm sm:text-base lg:text-lg leading-relaxed",children:"Rejoignez DaloaMarket et commencez Ã  vendre dÃ¨s aujourd'hui !"}),e.jsx(q,{to:"/create-listing",className:"btn-primary bg-white text-secondary hover:bg-grey-100 text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8 py-2.5 sm:py-3 lg:py-4 font-semibold",children:"Publier une annonce"})]})]}),o&&e.jsx("div",{className:"fixed bottom-3 right-3 sm:bottom-4 sm:right-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg lg:rounded-xl shadow-lg px-3 sm:px-4 lg:px-6 py-2 sm:py-2.5 lg:py-3 flex items-center gap-1.5 sm:gap-2 lg:gap-3 border border-primary-200",children:[e.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 lg:w-3 lg:h-3 bg-primary rounded-full animate-pulse"}),e.jsx("span",{className:"font-semibold text-grey-700 text-xs sm:text-sm lg:text-base",children:"CrÃ©dits:"}),e.jsx("span",{className:"text-sm sm:text-lg lg:text-xl font-bold text-primary",children:l!==null?l:e.jsx(W,{size:"small"})}),e.jsx(q,{to:"/acheter-credits",className:"btn-primary py-1 sm:py-1.5 lg:py-2 px-2 sm:px-3 lg:px-4 text-xs lg:text-sm ml-1",children:"Acheter"})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:e.jsx("section",{className:"section-padding",children:e.jsx("div",{className:"responsive-container",children:e.jsxs("div",{className:"bg-white rounded-xl lg:rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 border border-warning-200",children:[e.jsx(R,{className:"h-12 w-12 sm:h-16 sm:w-16 lg:h-20 lg:w-20 text-warning-600 mx-auto mb-3 sm:mb-4 lg:mb-6"}),e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-warning-800 mb-2 sm:mb-3 lg:mb-4",children:"Configuration Required"}),e.jsx("p",{className:"text-warning-700 mb-4 sm:mb-6 lg:mb-8 text-sm sm:text-base lg:text-lg",children:"To use DaloaMarket, you need to configure your Supabase database connection."}),e.jsxs("div",{className:"bg-grey-50 rounded-lg lg:rounded-xl p-3 sm:p-4 lg:p-6 text-left",children:[e.jsx("h3",{className:"font-semibold mb-2 sm:mb-3 lg:mb-4 text-sm sm:text-base lg:text-lg",children:"Setup Instructions:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 sm:space-y-2 lg:space-y-3 text-xs sm:text-sm lg:text-base",children:[e.jsxs("li",{children:["Go to ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline font-medium",children:"supabase.com"})," and create a new project"]}),e.jsx("li",{children:"In your Supabase dashboard, go to Settings â†’ API"}),e.jsx("li",{children:"Copy your Project URL and anon/public key"}),e.jsx("li",{children:"Update the .env file with your actual credentials"}),e.jsx("li",{children:"Restart your development server"})]})]})]})})})})},Vs=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-10",children:e.jsxs("div",{className:"container-custom max-w-2xl bg-white rounded-card shadow-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Ã€ propos de Daloa Market"}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Daloa Market"})," est une plateforme locale permettant aux habitants de Daloa, notamment les Ã©tudiants, de vendre et dâ€™acheter facilement des objets dâ€™occasion entre eux.",e.jsx("br",{}),"Le projet est actuellement en ",e.jsx("span",{className:"text-orange-600 font-semibold",children:"phase de test (bÃªta)"})," Ã  lâ€™universitÃ© de Daloa, avant un lancement officiel plus large.",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Il n'y a plus de systÃ¨me de boost ni de paiement automatique."})," Toutes les publications d'annonces se font par crÃ©dit ou paiement manuel Ã  l'unitÃ© (200 FCFA/annonce)."]}),e.jsxs("div",{className:"mb-4 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ ",e.jsx("strong",{children:"Phase de test"})," : la plateforme Ã©volue rapidement grÃ¢ce Ã  vos retours. Certaines fonctionnalitÃ©s ou conditions peuvent changer sans prÃ©avis.",e.jsx("br",{}),e.jsx("strong",{children:"Aucune structure juridique formelle nâ€™est encore crÃ©Ã©e."})," Lâ€™activitÃ© reste Ã  petite Ã©chelle et sâ€™adapte selon les retours des utilisateurs."]}),e.jsxs("div",{className:"mb-8 text-sm text-grey-600",children:["Pour toute question sur la confidentialitÃ©, les conditions ou le fonctionnement, consultez aussi les pages ",e.jsx("a",{href:"/faq",className:"text-primary underline",children:"FAQ"}),", ",e.jsx("a",{href:"/help",className:"text-primary underline",children:"Aide"}),", ",e.jsx("a",{href:"/terms",className:"text-primary underline",children:"Conditions"})," et ",e.jsx("a",{href:"/privacy",className:"text-primary underline",children:"ConfidentialitÃ©"}),".",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Contact officiel :"})," ",e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-primary underline",children:"support@daloamarket.shop"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("a",{href:"https://wa.me/2250788000831",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 14.487c-.297-.149-1.758-.867-2.03-.967-.273-.099-.472-.148-.67.15-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.075-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.372-.025-.52-.075-.149-.669-1.612-.916-2.21-.242-.58-.487-.501-.67-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.099 3.21 5.077 4.377.71.306 1.263.489 1.695.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.288.173-1.413-.074-.124-.272-.198-.57-.347z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 1.591.418 3.086 1.144 4.375L3 21l4.755-1.244A8.963 8.963 0 0012 21c4.97 0 9-4.03 9-9z"})]}),"Contacter le support WhatsApp"]})}),e.jsx("h2",{className:"text-2xl font-bold mt-8 mb-4",children:"Ã€ propos du crÃ©ateur"}),e.jsxs("p",{className:"mb-4",children:["Je m'appelle Elmas Oulobo, Ã©tudiant en L3 Ã‰conomie, passionnÃ© de programmation et de dÃ©veloppement web.",e.jsx("br",{}),"Ce projet est dÃ©veloppÃ© sans budget, uniquement avec ma connexion et ma dÃ©termination, pour aider la communautÃ© locale."]}),e.jsx("p",{className:"mb-8",children:"Merci Ã  tous ceux qui soutiennent cette initiative locale ðŸ™"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-8 text-center",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"ðŸ’› Soutenir Daloa Market"}),e.jsx("p",{className:"mb-2 text-sm",children:"Aidez Ã  faire Ã©voluer ce projet local dÃ©veloppÃ© avec 0 budget !"}),e.jsxs("p",{className:"mb-2",children:["Envoyez un petit geste via Orange Money/Wave au ",e.jsx("strong",{children:"+225 07 88 00 08 31"})," ou MTN ",e.jsx("strong",{children:"05 55 86 39 53"}),"."]}),e.jsx("p",{className:"text-sm",children:"Merci pour votre soutien ðŸ™"})]})]})}),Us=({type:s,size:r=120,mouseTracking:n=!0,reaction:i="float",passwordState:t})=>{const[o,l]=a.useState({x:0,y:0}),m=a.useRef(null);a.useEffect(()=>{if(!n)return;const u=N=>{if(m.current){const C=m.current.getBoundingClientRect(),P=C.left+C.width/2,y=C.top+C.height/2,A=(N.clientX-P)/50,w=(N.clientY-y)/50;l({x:A,y:w})}};return window.addEventListener("mousemove",u),()=>window.removeEventListener("mousemove",u)},[n]);const x=()=>{switch(i){case"bounce":return"animate-mascot-bounce";case"wave":return"animate-mascot-wave";case"blink":return"animate-mascot-blink";case"float":return"animate-mascot-float";case"thinking":return"animate-mascot-float";default:return""}},h=t==="visible",b=t==="hidden"&&t!==void 0,p=()=>{const u={width:r,height:r,viewBox:"0 0 200 200",className:`transition-transform duration-300 ${x()}`};switch(s){case"happy":return e.jsxs("svg",{...u,children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#FFE4B5",stroke:"#FF7F00",strokeWidth:"3"}),h?e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:"60",y:"70",width:"30",height:"18",rx:"6",fill:"#FFE4B5",transform:"rotate(-12 60 70)"}),e.jsx("rect",{x:"110",y:"70",width:"30",height:"18",rx:"6",fill:"#FFE4B5",transform:"rotate(12 110 70)"})]}):b?e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:"70",cy:"88",r:"5",fill:"#000"}),e.jsx("circle",{cx:"130",cy:"88",r:"5",fill:"#000"})]}):e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:"80",cy:"85",r:"8",fill:"#000"}),e.jsx("circle",{cx:"120",cy:"85",r:"8",fill:"#000"})]}),e.jsx("path",{d:"M 70 120 Q 100 140 130 120",stroke:"#000",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"65",cy:"105",r:"5",fill:"#FF9999",opacity:"0.6"}),e.jsx("circle",{cx:"135",cy:"105",r:"5",fill:"#FF9999",opacity:"0.6"})]});case"excited":return e.jsxs("svg",{...u,children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#FFE4B5",stroke:"#FF7F00",strokeWidth:"3"}),e.jsx("ellipse",{cx:"80",cy:"85",rx:"10",ry:"8",fill:"#000"}),e.jsx("ellipse",{cx:"120",cy:"85",rx:"10",ry:"8",fill:"#000"}),e.jsx("path",{d:"M 75 125 Q 100 150 125 125",stroke:"#000",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"60",cy:"70",r:"3",fill:"#99CCFF"}),e.jsx("circle",{cx:"140",cy:"70",r:"3",fill:"#99CCFF"})]});case"thinking":return e.jsxs("svg",{...u,children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#FFE4B5",stroke:"#FF7F00",strokeWidth:"3"}),e.jsx("circle",{cx:"80",cy:"85",r:"6",fill:"#000"}),e.jsx("circle",{cx:"120",cy:"85",r:"6",fill:"#000"}),e.jsx("path",{d:"M 140 70 Q 160 50 180 70 Q 180 90 160 90 Q 140 90 140 70",fill:"#FFF",stroke:"#000",strokeWidth:"2"}),e.jsx("text",{x:"160",y:"82",fontSize:"12",textAnchor:"middle",fill:"#000",children:"?"}),e.jsx("ellipse",{cx:"85",cy:"130",rx:"15",ry:"8",fill:"#FFE4B5"})]});case"sleepy":return e.jsxs("svg",{...u,children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#FFE4B5",stroke:"#FF7F00",strokeWidth:"3"}),e.jsx("path",{d:"M 75 85 Q 85 80 95 85",stroke:"#000",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M 105 85 Q 115 80 125 85",stroke:"#000",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("text",{x:"150",y:"60",fontSize:"16",fill:"#666",children:"Z"}),e.jsx("text",{x:"155",y:"75",fontSize:"14",fill:"#666",children:"z"}),e.jsx("text",{x:"160",y:"88",fontSize:"12",fill:"#666",children:"z"})]});default:return null}};return e.jsx(B.div,{ref:m,className:"flex items-center justify-center",animate:{x:n?o.x:0,y:n?o.y:0},transition:{type:"spring",stiffness:300,damping:30},children:p()})},Ts=()=>{var C,P;const{signIn:s}=H(),r=G(),n=te(),[i,t]=a.useState(!1),[o,l]=a.useState("float"),[m,x]=a.useState(!1),h=((P=(C=n.state)==null?void 0:C.from)==null?void 0:P.pathname)||"/",{register:b,handleSubmit:p,formState:{errors:u}}=be(),N=async y=>{t(!0),l("bounce");try{const{error:A}=await s(y.email,y.password);if(A)throw A;l("wave"),L.success("Connexion rÃ©ussie"),setTimeout(()=>r(h,{replace:!0}),900)}catch(A){const w=A;l("blink");let c=w.message||"Erreur de connexion";c.includes("Invalid login credentials")&&(c="Identifiants incorrects."),L.error(c),setTimeout(()=>l("float"),2500)}finally{t(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 py-12 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-primary-200 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-secondary-200 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-primary-100 rounded-full blur-2xl"})]}),e.jsxs(B.div,{className:"container-custom max-w-md relative z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx(B.div,{className:"flex justify-center mb-6",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:200},children:e.jsx(Us,{type:i?"excited":"happy",size:100,reaction:o,passwordState:m?"visible":"hidden"})}),e.jsxs(B.div,{className:"bg-white/80 backdrop-blur-sm rounded-card shadow-card p-6 md:p-8 border border-white/20",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:[e.jsx(B.h1,{className:"text-2xl font-bold text-center mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"Bienvenue !"}),e.jsxs(B.form,{onSubmit:p(N),className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsxs(B.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6},children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",type:"email",className:`input-field pl-10 transition-all duration-300 ${u.email?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"votre@email.com",...b("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),disabled:i}),e.jsx(Se,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400 transition-colors"})]}),u.email&&e.jsxs(B.p,{className:"input-error flex items-center mt-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),u.email.message]})]}),e.jsxs(B.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.7},children:[e.jsx("label",{htmlFor:"password",className:"input-label",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:m?"text":"password",className:`input-field pl-10 pr-10 transition-all duration-300 ${u.password?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...b("password",{required:"Le mot de passe est requis",minLength:{value:6,message:"Le mot de passe doit contenir au moins 6 caractÃ¨res"}}),disabled:i}),e.jsx(Ae,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400 transition-colors"}),e.jsx("button",{type:"button","aria-pressed":m,"aria-label":m?"Masquer le mot de passe":"Afficher le mot de passe",onClick:()=>{x(y=>!y),m?(l("thinking"),setTimeout(()=>l("float"),700)):(l("blink"),setTimeout(()=>l("wave"),120))},className:"absolute right-3 top-3.5 h-6 w-6 flex items-center justify-center text-grey-500 hover:text-grey-700",children:m?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-4 w-4",children:e.jsx("path",{fill:"currentColor",d:"M12 5c4.97 0 9 4.03 9 7s-4.03 7-9 7-9-4.03-9-7 4.03-7 9-7m0-2C7.03 3 2 7.03 2 12s5.03 9 10 9 10-5.03 10-9S16.97 3 12 3z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-4 w-4",children:e.jsx("path",{fill:"currentColor",d:"M12 6.5C8.69 6.5 5.84 8.36 4 11.5c1.84 3.14 4.69 5 8 5s6.16-1.86 8-5c-1.84-3.14-4.69-5-8-5m0-2c5.25 0 9.75 3.58 11.99 8.38a1 1 0 0 1 0 .24C21.75 17.42 17.25 21 12 21s-9.75-3.58-11.99-8.38a1 1 0 0 1 0-.24C2.25 8.08 6.75 4.5 12 4.5z"})})})]}),u.password&&e.jsxs(B.p,{className:"input-error flex items-center mt-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),u.password.message]})]}),e.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:e.jsx(q,{to:"/auth/reset-password",className:"text-sm text-primary hover:underline transition-colors",children:"Mot de passe oubliÃ© ?"})}),e.jsx(B.button,{type:"submit",className:"btn-primary w-full flex justify-center items-center transform hover:scale-105 transition-all duration-200",disabled:i,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},whileHover:{scale:1.02},whileTap:{scale:.98},children:i?e.jsx(W,{size:"small",className:"text-white"}):"Se connecter"})]}),e.jsx(B.div,{className:"mt-6 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:e.jsxs("p",{className:"text-grey-600",children:["Vous n'avez pas de compte ?"," ",e.jsx(q,{to:"/register",className:"text-primary font-medium hover:underline transition-colors",children:"S'inscrire"})]})})]})]})]})},Xs=({onSwitchToEmail:s})=>{const[r,n]=a.useState(""),[i,t]=a.useState(""),[o,l]=a.useState("phone"),[m,x]=a.useState(!1),[h,b]=a.useState(null);function p(C){let P=C.replace(/\D/g,"");return P.startsWith("0")&&(P=P.slice(1)),"+225"+P}const u=async C=>{C.preventDefault(),x(!0),b(null);const P=p(r),{error:y}=await k.auth.signInWithOtp({phone:P});x(!1),y?b(y.message):l("otp")},N=async C=>{C.preventDefault(),x(!0),b(null);const{error:P}=await k.auth.verifyOtp({phone:r,token:i,type:"sms"});x(!1),P?b(P.message):l("success")};return e.jsxs("div",{className:"max-w-md mx-auto p-4 bg-white rounded shadow",children:[o==="phone"&&e.jsxs("form",{onSubmit:u,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Inscription par tÃ©lÃ©phone"}),e.jsx("input",{type:"tel",placeholder:"Ex: 0XXXXXXXXX",value:r,onChange:C=>n(C.target.value),className:"w-full border-2 border-black focus:border-orange-500 focus:ring-orange-500 p-2 rounded mb-2 text-black text-lg font-medium placeholder-gray-400",required:!0}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Vous pouvez entrer votre numÃ©ro ivoirien au format local (ex : ",e.jsx("span",{className:"font-semibold",children:"0XXXXXXXXX"}),")",e.jsx("br",{}),"Il sera automatiquement converti en ",e.jsx("span",{className:"font-semibold",children:"+225XXXXXXXXX"})," pour l'envoi du SMS."]}),e.jsx("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white p-2 rounded font-bold transition",disabled:m,children:m?"Envoi...":"Envoyer le code"}),h&&e.jsx("p",{className:"text-red-500 mt-2",children:h})]}),o==="otp"&&e.jsxs("form",{onSubmit:N,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"VÃ©rification du code"}),e.jsx("input",{type:"text",placeholder:"Code OTP reÃ§u",value:i,onChange:C=>t(C.target.value),className:"w-full border-2 border-black focus:border-orange-500 focus:ring-orange-500 p-2 rounded mb-2 text-black",required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white p-2 rounded font-bold transition",disabled:m,children:m?"VÃ©rification...":"VÃ©rifier le code"}),h&&e.jsx("p",{className:"text-red-500 mt-2",children:h})]}),o==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Inscription rÃ©ussie !"}),e.jsx("p",{className:"text-black",children:"Votre compte a Ã©tÃ© crÃ©Ã© avec succÃ¨s."})]}),s&&o==="phone"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",className:"text-orange-500 hover:underline font-semibold",onClick:s,children:"Continuer avec email"})}),s&&o==="otp"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",className:"text-orange-500 hover:underline font-semibold",onClick:()=>{l("phone"),t(""),b(null)},children:"Modifier le numÃ©ro"})})]})},Bs=()=>{const{signUp:s}=H(),[r,n]=a.useState(!1),[i,t]=a.useState(!1),[o,l]=a.useState(null),[m,x]=a.useState(null),{register:h,handleSubmit:b,watch:p,formState:{errors:u}}=be(),N=p("password"),C=async P=>{n(!0),l(null);try{const{data:y}=await k.from("users").select("id").eq("email",P.email).single();if(y){L.error("Cet email est dÃ©jÃ  utilisÃ©. Veuillez vous connecter ou utiliser un autre email."),n(!1);return}const A=await s(P.email,P.password),w=A.error,c=A.requiresConfirmation??!1;if(w){console.error("Supabase signup error:",w);let v="";typeof w=="object"&&w!==null?("message"in w&&(v=String(w.message).toLowerCase()),"code"in w&&(v+=" "+String(w.code).toLowerCase())):v=String(w).toLowerCase(),v.includes("email")&&(v.includes("existe")||v.includes("dÃ©jÃ ")||v.includes("used")||v.includes("duplicate")||v.includes("already"))||v.includes("auth/duplicate-email")||v.includes("auth/email-already-exists")||v.includes("duplicate key")?L.error("Cet email est dÃ©jÃ  utilisÃ©. Veuillez vous connecter ou utiliser un autre email."):L.error("Erreur lors de l'inscription. Veuillez rÃ©essayer."),(String(v).includes("refresh_token")||String(v).includes("refresh token"))&&l("Inscription partielle dÃ©tectÃ©e. VÃ©rifiez votre email pour confirmer votre compte, puis reconnectez-vous.");return}c?(L.success("Inscription reÃ§ue â€” vÃ©rifiez votre boÃ®te mail pour confirmer votre adresse."),t(!0)):(L.success("Inscription rÃ©ussie ! Vous Ãªtes connectÃ©(e)."),t(!0))}catch(y){console.error("Registration error:",y),L.error("Erreur lors de l'inscription. Veuillez rÃ©essayer.")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-md",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"CrÃ©er un compte"}),!m&&e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsx("button",{className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg shadow transition-all duration-150",style:{letterSpacing:.5},onClick:()=>x("email"),children:"Continuer avec email"}),e.jsx("button",{className:"w-full bg-black hover:bg-gray-900 text-white font-bold py-3 rounded-xl text-lg shadow transition-all duration-150",style:{letterSpacing:.5},onClick:()=>x("phone"),children:"Continuer avec numÃ©ro de tÃ©lÃ©phone"})]}),m==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:b(C),className:"space-y-4",children:[o&&e.jsxs("div",{className:"text-error-500 text-sm mb-2 flex items-center",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),o]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",type:"email",className:`input-field pl-10 ${u.email?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"votre@email.com",...h("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),disabled:r}),e.jsx(Se,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),u.email&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),u.email.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"input-label",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:"password",className:`input-field pl-10 ${u.password?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...h("password",{required:"Le mot de passe est requis",minLength:{value:6,message:"Le mot de passe doit contenir au moins 6 caractÃ¨res"}}),disabled:r}),e.jsx(Ae,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),u.password&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),u.password.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"input-label",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:"password",className:`input-field pl-10 ${u.confirmPassword?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...h("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:P=>P===N||"Les mots de passe ne correspondent pas"}),disabled:r}),e.jsx(Ae,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),u.confirmPassword&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),u.confirmPassword.message]})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center",disabled:r,children:r?e.jsx(W,{size:"small",className:"text-white"}):"S'inscrire"})]}),i&&e.jsxs("div",{className:"bg-info-50 border-l-4 border-info-500 p-4 mb-6 text-info-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"VÃ©rification de l'email requise"}),e.jsx("p",{children:"Un email de confirmation vient de vous Ãªtre envoyÃ©. Merci de cliquer sur le lien reÃ§u pour activer votre compte."})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("p",{className:"text-grey-600",children:["Vous avez dÃ©jÃ  un compte ?"," ",e.jsx(q,{to:"/login",className:"text-primary font-medium hover:underline",children:"Se connecter"})]}),e.jsx("button",{className:"mt-4 text-orange-500 hover:underline font-semibold",onClick:()=>x("phone"),children:"Continuer avec numÃ©ro de tÃ©lÃ©phone"})]})]}),m==="phone"&&e.jsx(Xs,{onSwitchToEmail:()=>x("email")})]})})})},Os=()=>{const[s,r]=a.useState(""),[n,i]=a.useState(!1),t=G(),o=async l=>{if(l.preventDefault(),!s){L.error("Veuillez entrer votre email");return}i(!0);try{const{error:m}=await k.auth.resetPasswordForEmail(s,{redirectTo:window.location.origin+"/auth/update-password"});if(m)throw m;L.success("Un email de rÃ©initialisation a Ã©tÃ© envoyÃ©."),t("/login")}catch(m){const x=m instanceof Error?m.message:"Erreur lors de la demande";L.error(x)}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-grey-50 to-grey-100 p-4",children:e.jsxs("form",{onSubmit:o,className:"bg-white rounded-2xl shadow-xl p-6 max-w-md w-full space-y-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-grey-900 mb-2",children:"RÃ©initialiser le mot de passe"}),e.jsx("p",{className:"text-grey-600 mb-4 text-sm",children:"Entrez votre adresse email pour recevoir un lien de rÃ©initialisation."}),e.jsx("input",{type:"email",className:"input-field w-full",placeholder:"Votre email",value:s,onChange:l=>r(l.target.value),required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:n,children:n?"Envoi en cours...":"Envoyer le lien"}),e.jsx("button",{type:"button",className:"w-full text-primary mt-2 text-sm hover:underline",onClick:()=>t("/login"),children:"Retour Ã  la connexion"})]})})},Ws=()=>{const[s,r]=a.useState(""),[n,i]=a.useState(""),[t,o]=a.useState(!1),l=G(),m=async x=>{if(x.preventDefault(),!s||!n){L.error("Veuillez remplir les deux champs");return}if(s!==n){L.error("Les mots de passe ne correspondent pas");return}o(!0);try{const{error:h}=await k.auth.updateUser({password:s});if(h)throw h;L.success("Mot de passe mis Ã  jour ! Vous pouvez vous connecter."),l("/login")}catch(h){const b=h instanceof Error?h.message:"Erreur lors de la mise Ã  jour";L.error(b)}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-grey-50 to-grey-100 p-4",children:e.jsxs("form",{onSubmit:m,className:"bg-white rounded-2xl shadow-xl p-6 max-w-md w-full space-y-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-grey-900 mb-2",children:"Nouveau mot de passe"}),e.jsx("p",{className:"text-grey-600 mb-4 text-sm",children:"Choisissez un nouveau mot de passe pour votre compte."}),e.jsx("input",{type:"password",className:"input-field w-full",placeholder:"Nouveau mot de passe",value:s,onChange:x=>r(x.target.value),required:!0}),e.jsx("input",{type:"password",className:"input-field w-full",placeholder:"Confirmer le mot de passe",value:n,onChange:x=>i(x.target.value),required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:t,children:t?"Mise Ã  jour...":"Mettre Ã  jour le mot de passe"}),e.jsx("button",{type:"button",className:"w-full text-primary mt-2 text-sm hover:underline",onClick:()=>l("/login"),children:"Retour Ã  la connexion"})]})})},Qs=()=>{const{user:s,updateUserProfile:r}=H(),n=G(),[i,t]=a.useState(!1),{register:o,handleSubmit:l,formState:{errors:m}}=be(),x=async h=>{t(!0);try{try{const p=k.auth;typeof p.getSessionFromUrl=="function"&&await p.getSessionFromUrl({storeSession:!0})}catch(p){console.warn("getSessionFromUrl unavailable or failed:",p)}if(!s)throw new Error("Vous devez Ãªtre connectÃ© pour complÃ©ter votre profil");const{error:b}=await r({email:s.email||"",full_name:h.full_name,phone:h.phone,district:h.district});if(b)throw b;L.success("Profil complÃ©tÃ© avec succÃ¨s !"),n("/")}catch(b){console.error("Profile completion error:",b),L.error(b instanceof Error?b.message:"Erreur lors de la crÃ©ation du profil")}finally{t(!1)}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-md",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"ComplÃ©ter votre profil"}),e.jsx("p",{className:"text-grey-600 text-center mb-6",children:"Ces informations sont nÃ©cessaires pour utiliser DaloaMarket"}),e.jsxs("form",{onSubmit:l(x),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full_name",className:"input-label",children:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"full_name",type:"text",className:`input-field pl-10 ${m.full_name?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre nom complet",...o("full_name",{required:"Le nom complet est requis",minLength:{value:3,message:"Le nom doit contenir au moins 3 caractÃ¨res"}}),disabled:i}),e.jsx(se,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),m.full_name&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),m.full_name.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"input-label",children:"NumÃ©ro de tÃ©lÃ©phone"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"phone",type:"tel",className:`input-field pl-10 ${m.phone?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"+225 XX XX XX XX XX",...o("phone",{required:"Le numÃ©ro de tÃ©lÃ©phone est requis",validate:h=>ss(h)||"Veuillez entrer un numÃ©ro de tÃ©lÃ©phone ivoirien valide"}),disabled:i}),e.jsx(fe,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),m.phone&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),m.phone.message]}),e.jsx("p",{className:"text-xs text-grey-500 mt-1",children:"Format: +225 XX XX XX XX XX ou 07 XX XX XX XX"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label",children:"Quartier Ã  Daloa"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"district",className:`input-field pl-10 ${m.district?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...o("district",{required:"Le quartier est requis"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez votre quartier"}),qe.map(h=>e.jsx("option",{value:h,children:h},h))]}),e.jsx(me,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),m.district&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),m.district.message]})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center",disabled:i,children:i?e.jsx(W,{size:"small",className:"text-white"}):"ComplÃ©ter mon profil"})]})]})})})},Pe=({listing:s,onPress:r,sellerName:n,sellerRating:i})=>{const t=s.photos&&s.photos.length>0?s.photos[0]:"https://images.pexels.com/photos/4386321/pexels-photo-4386321.jpeg?auto=compress&cs=tinysrgb&w=400",o=s.boosted_until&&new Date(s.boosted_until)>new Date,l=Ze(),[m,x]=a.useState(!1),h=()=>e.jsxs("article",{className:"group bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-sm overflow-hidden border border-grey-100",role:"article",children:[e.jsxs("div",{className:"relative aspect-[4/3] md:aspect-square overflow-hidden bg-grey-100",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-grey-200 to-grey-100 ${m?"opacity-0":"opacity-100"} ${l?"":"animate-pulse"} transition-opacity duration-300`,"aria-hidden":"true"}),e.jsx("img",{src:t,alt:s.title,loading:"lazy",decoding:"async",onLoad:()=>x(!0),className:`w-full h-full object-cover ${m?"opacity-100":"opacity-0"} group-hover:scale-105 transition-all duration-300 will-change-transform`}),o&&e.jsxs("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-primary to-primary-600 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center shadow-md",children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"SponsorisÃ©"}),e.jsx("span",{className:"sm:hidden",children:"Boost"})]}),s.status==="sold"&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("span",{className:"bg-error-600 text-white px-3 py-1 rounded-full font-bold text-xs",children:"VENDU"})}),s.photos&&s.photos.length>1&&e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-0.5 rounded-full",children:s.photos.length})]}),e.jsxs("div",{className:"p-3 sm:p-3 lg:p-4 space-y-1.5 sm:space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold text-grey-900 line-clamp-2 text-sm md:text-base leading-tight group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-primary",children:ce(s.price)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-grey-600",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[e.jsx(me,{className:"h-3 w-3 mr-1 text-grey-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.district})]}),e.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1 text-grey-400"}),e.jsx("span",{className:"text-xs",children:de(s.created_at)})]})]}),n&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-grey-100",children:[e.jsx("span",{className:"text-xs text-grey-800 font-semibold truncate flex-1",title:`Voir l'annonce de ${n}`,children:n}),i&&e.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[e.jsx(ae,{className:"h-3 w-3 text-primary"}),e.jsx("span",{className:"text-xs font-medium ml-0.5",children:i.toFixed(1)})]}),e.jsx("div",{className:"ml-3 flex-shrink-0",children:e.jsxs("span",{className:"inline-flex items-center justify-center w-11 h-11 rounded-full bg-primary text-white shadow-md",children:[e.jsx(De,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Voir l'annonce"})]})})]})]})]}),b="w-full block text-left rounded-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40";return r?e.jsx("button",{type:"button",onClick:r,className:`${b} active:scale-98`,"aria-label":`Ouvrir l'annonce ${s.title}`,children:e.jsx(B.div,{whileHover:l?void 0:{y:-6,scale:1.02},whileTap:l?void 0:{scale:.985},transition:{type:"spring",stiffness:260,damping:20},children:e.jsx(h,{})})}):e.jsx(q,{to:`/listings/${s.id}`,className:`${b} ${l?"":"hover:shadow-lg"}`,"aria-label":`Voir ${s.title} â€” ${ce(s.price)}`,children:e.jsx(B.div,{whileHover:l?void 0:{y:-6,scale:1.02},whileTap:l?void 0:{scale:.985},transition:{type:"spring",stiffness:260,damping:20},children:e.jsx(h,{})})})},Gs=()=>{const{user:s,userProfile:r,signOut:n}=H(),[i,t]=a.useState("listings"),[o,l]=a.useState([]),[m,x]=a.useState([]),[h,b]=a.useState([]),[p,u]=a.useState(!0),[N,C]=a.useState(null),[P,y]=a.useState(null),[A,w]=a.useState(null);a.useEffect(()=>{if(!s)return;(async()=>{try{const{data:f,error:_}=await k.from("listings").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});if(_)throw _;l(f||[]);const{data:I,error:D}=await k.from("reviews").select(`
            *,
            reviewer:users!reviews_reviewer_id_fkey (
              full_name
            ),
            listing:listings!reviews_listing_id_fkey (
              title
            )
          `).eq("reviewed_id",s.id).order("created_at",{ascending:!1});if(D)throw D;x(I||[]);const{data:O,error:J}=await k.from("favorites").select("listing:listings(*)").eq("user_id",s.id).order("created_at",{ascending:!1});if(J)throw J;b((O||[]).map(Q=>Q.listing).filter(Boolean))}catch(f){console.error("Error fetching user data:",f),L.error("Erreur lors du chargement des donnÃ©es")}finally{u(!1)}})()},[s]),a.useEffect(()=>{if(!s)return;(async()=>{const{data:f,error:_}=await k.from("user_credits").select("credits").eq("user_id",s.id).single();C(_?null:(f==null?void 0:f.credits)??0)})()},[s]);const c=async()=>{try{await n(),L.success("DÃ©connexion rÃ©ussie")}catch(g){console.error("Sign out error:",g),L.error("Erreur lors de la dÃ©connexion")}};async function v(g){y(g);try{const{error:f}=await k.from("listings").delete().eq("id",g);if(f)throw f;L.success("Annonce supprimÃ©e"),l(_=>_.filter(I=>I.id!==g))}catch{L.error("Erreur lors de la suppression")}finally{y(null),w(null)}}return p?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(W,{size:"large"})}):r?e.jsx("div",{className:"min-h-screen bg-grey-50 py-4 sm:py-6 lg:py-8",children:e.jsxs("div",{className:"container-custom max-w-6xl",children:[s&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"bg-white rounded-lg lg:rounded-xl shadow-md px-3 sm:px-4 py-2 flex items-center gap-1.5 sm:gap-2 text-primary font-semibold",children:[e.jsx("span",{className:"text-sm sm:text-base",children:"CrÃ©dits:"}),e.jsx("span",{className:"text-base sm:text-lg",children:N!==null?N:e.jsx(W,{size:"small"})}),e.jsx(q,{to:"/acheter-credits",className:"ml-2 btn-secondary py-1 px-2 text-xs sm:text-sm",children:"Acheter"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-4 sm:mb-6",children:[e.jsx("div",{className:"h-16 w-16 sm:h-20 sm:w-20 lg:h-24 lg:w-24 rounded-full bg-primary-100 flex items-center justify-center mb-3 sm:mb-4",children:e.jsx(se,{className:"h-8 w-8 sm:h-10 sm:w-10 lg:h-12 lg:w-12 text-primary"})}),e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold",children:r.full_name}),e.jsx("p",{className:"text-grey-600 mt-1 text-sm sm:text-base",children:s==null?void 0:s.email}),e.jsx(q,{to:"/settings",className:"btn-secondary mt-2 sm:mt-3 mb-2 w-full max-w-xs text-sm sm:text-base",children:"Modifier mon profil"}),r.rating&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(ae,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary fill-current"}),e.jsx("span",{className:"ml-1 font-medium text-sm sm:text-base",children:r.rating.toFixed(1)}),e.jsxs("span",{className:"text-grey-500 ml-1 text-sm",children:["(",m.length," avis)"]})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-grey-500 mt-2",children:["Membre depuis ",de(r.created_at)]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 sm:h-5 sm:w-5 text-grey-500"}),e.jsx("span",{className:"text-sm sm:text-base",children:Fs(r.phone)}),r.phone&&e.jsxs("a",{href:`https://wa.me/${(()=>{const g=r.phone.replace(/[^\d]/g,"");return g.startsWith("225")?g:g.length===10&&g.startsWith("0")?"225"+g:g.length===8?"2250"+g:(g.length>10&&!g.startsWith("225"),g)})()}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 px-2 py-1 bg-green-500 hover:bg-green-600 text-white rounded flex items-center gap-1 text-xs sm:text-sm transition",title:"Contacter sur WhatsApp",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 14.487c-.297-.149-1.758-.867-2.03-.967-.273-.099-.472-.148-.67.15-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.075-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.372-.025-.52-.075-.149-.669-1.612-.916-2.21-.242-.58-.487-.501-.67-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.099 3.21 5.077 4.377.71.306 1.263.489 1.695.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.288.173-1.413-.074-.124-.272-.198-.57-.347z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 1.591.418 3.086 1.144 4.375L3 21l4.755-1.244A8.963 8.963 0 0012 21c4.97 0 9-4.03 9-9z"})]}),"WhatsApp"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"h-4 w-4 sm:h-5 sm:w-5 text-grey-500 mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:r.district})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:space-y-3",children:[e.jsxs(q,{to:"/settings",className:"btn-outline flex items-center justify-center text-sm sm:text-base",children:[e.jsx(Qe,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"ParamÃ¨tres"]}),e.jsxs("button",{onClick:c,className:"btn-outline text-error-600 border-error-600 hover:bg-error-50 flex items-center justify-center text-sm sm:text-base",children:[e.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"DÃ©connexion"]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg mb-4 sm:mb-6 overflow-hidden",children:e.jsxs("div",{className:"flex border-b border-grey-200",children:[e.jsx("button",{onClick:()=>t("listings"),className:`flex-1 py-3 sm:py-4 px-4 sm:px-6 text-center font-medium text-sm sm:text-base ${i==="listings"?"text-primary border-b-2 border-primary":"text-grey-600 hover:text-grey-900"}`,children:"Mes annonces"}),e.jsx("button",{onClick:()=>t("reviews"),className:`flex-1 py-3 sm:py-4 px-4 sm:px-6 text-center font-medium text-sm sm:text-base ${i==="reviews"?"text-primary border-b-2 border-primary":"text-grey-600 hover:text-grey-900"}`,children:"Avis reÃ§us"}),e.jsxs("button",{onClick:()=>t("favorites"),className:`flex-1 py-3 sm:py-4 px-4 sm:px-6 text-center font-medium text-sm sm:text-base ${i==="favorites"?"text-primary border-b-2 border-primary":"text-grey-600 hover:text-grey-900"}`,children:[e.jsx(Fe,{className:"inline h-4 w-4 mr-1"})," Favoris"]})]})}),i==="listings"&&(o.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:o.map(g=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"scale-90 sm:scale-95 lg:scale-100 origin-center",children:e.jsx(Pe,{listing:g})}),e.jsxs("div",{className:"absolute top-1 right-1 flex flex-col gap-1",children:[g.status==="pending"&&e.jsx("span",{className:"text-xs bg-warning-100 text-warning-700 px-1.5 py-0.5 rounded font-medium",children:"En attente"}),g.status==="sold"&&e.jsx("span",{className:"text-xs bg-success-100 text-success-700 px-1.5 py-0.5 rounded font-medium",children:"Vendu"})]})]},g.id))}):e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-6 sm:p-8 text-center",children:[e.jsx(ve,{className:"h-12 w-12 sm:h-16 sm:w-16 text-grey-400 mx-auto mb-3 sm:mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Aucune annonce"}),e.jsx("p",{className:"text-grey-600 mb-4 sm:mb-6 text-sm sm:text-base",children:"Vous n'avez pas encore publiÃ© d'annonces."}),e.jsx(q,{to:"/create-listing",className:"btn-primary text-sm sm:text-base",children:"Publier une annonce"})]})),i==="reviews"&&e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-4 sm:p-6",children:m.length>0?e.jsx("div",{className:"space-y-3 sm:space-y-4",children:m.map(g=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-grey-200 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary mr-2 sm:mr-3"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-grey-800 text-sm sm:text-base",children:g.reviewer.full_name}),e.jsx("p",{className:"text-xs sm:text-sm text-grey-500",children:de(g.created_at)})]})]}),g.listing&&e.jsx("span",{className:"text-primary text-xs sm:text-sm font-medium",children:g.listing.title})]}),e.jsx("div",{className:"text-grey-700 text-sm sm:text-base",children:g.comment||"Aucun commentaire."})]},g.id))}):e.jsxs("div",{className:"text-center text-grey-500 py-8",children:[e.jsx(ae,{className:"h-12 w-12 sm:h-16 sm:w-16 text-grey-400 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base",children:"Aucun avis reÃ§u pour le moment."})]})}),i==="favorites"&&e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-md lg:shadow-lg p-4 sm:p-6",children:h.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:h.map(g=>e.jsx(Pe,{listing:g},g.id))}):e.jsxs("div",{className:"text-center text-grey-500 py-8",children:[e.jsx(Fe,{className:"h-12 w-12 sm:h-16 sm:w-16 text-grey-400 mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base",children:"Aucun favori pour le moment."})]})})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-grey-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-xl p-4 sm:p-6 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4",children:"Supprimer l'annonce ?"}),e.jsx("p",{className:"text-grey-700 mb-4 sm:mb-6 text-sm sm:text-base",children:"Cette action est irrÃ©versible. Voulez-vous vraiment supprimer cette annonce ?"}),e.jsxs("div",{className:"flex justify-center gap-3 sm:gap-4",children:[e.jsx("button",{className:"btn-outline text-sm sm:text-base",onClick:()=>w(null),disabled:!!P,children:"Annuler"}),e.jsx("button",{className:"btn-primary bg-error-600 hover:bg-error-700 border-error-600 text-sm sm:text-base",onClick:()=>v(A),disabled:!!P,children:"Confirmer la suppression"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(R,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Profil incomplet"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Vous devez complÃ©ter votre profil pour accÃ©der Ã  cette page."}),e.jsx(q,{to:"/complete-profile",className:"btn-primary",children:"ComplÃ©ter mon profil"})]})})})},Hs=()=>{const{sellerId:s}=Le();G();const[r,n]=a.useState(null),[i,t]=a.useState([]),[o,l]=a.useState([]),[m,x]=a.useState(!0),[h,b]=a.useState(null);if(a.useEffect(()=>{console.log("SellerProfilePage sellerId:",s);let y;const A=async()=>{x(!0),b(null),y=setTimeout(()=>{x(!1),b("Chargement trop long. VÃ©rifiez votre connexion ou contactez le support.")},1e4);const{data:w,error:c}=await k.from("users").select("id, full_name, created_at").eq("id",s).single();if(clearTimeout(y),c){b("Erreur lors du chargement du vendeur : "+c.message),console.error("Erreur vendeur:",c),x(!1);return}if(!w){b("Vendeur introuvable."),x(!1);return}const{data:v}=await k.from("listings").select("*").eq("user_id",s).order("created_at",{ascending:!1}),{data:g}=await k.from("reviews").select("id, rating, comment, created_at, reviewer:users!reviews_reviewer_id_fkey(full_name)").eq("reviewed_id",s).order("created_at",{ascending:!1});n(w),t(v||[]),l(g||[]),x(!1)};if(!s){b("Aucun vendeur sÃ©lectionnÃ©."),x(!1);return}return A(),()=>clearTimeout(y)},[s,k]),m)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsx(W,{size:"large"})});if(h)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-card shadow-card text-center",children:[e.jsx(R,{className:"mx-auto mb-2 text-error-500",size:32}),e.jsx("p",{children:h})]})});const p=o.map(y=>y.rating),u=p.length?(p.reduce((y,A)=>y+A,0)/p.length).toFixed(1):"â€”",N=o.filter(y=>y.rating>=3),C=o.filter(y=>y.rating<3),P=()=>{const y=encodeURIComponent("Signalement vendeur DaloaMarket"),A=encodeURIComponent(`Je souhaite signaler le vendeur avec l'ID : ${r.id}
Nom : ${r.full_name}`);window.location.href=`mailto:support@daloamarket.shop?subject=${y}&body=${A}`};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsxs("div",{className:"container-custom max-w-3xl",children:[e.jsx("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-grey-100 flex items-center justify-center border border-grey-200 shadow",children:e.jsx(se,{className:"h-12 w-12 text-grey-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center gap-2",children:[r.full_name,e.jsx(se,{className:"text-primary-500",size:22})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-yellow-500 flex items-center",children:[e.jsx(ae,{className:"inline-block mr-1",size:18}),u]}),e.jsxs("span",{className:"text-grey-500 text-sm",children:["(",p.length," avis)"]})]}),e.jsx("button",{onClick:P,className:"btn-outline text-error-600 mt-2",children:"Signaler ce vendeur"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Meilleurs avis"}),N.length===0?e.jsx("p",{className:"text-grey-500 text-sm",children:"Aucun avis positif pour ce vendeur."}):e.jsx("ul",{className:"space-y-4",children:N.map(y=>{var A;return e.jsxs("li",{className:"bg-grey-50 rounded p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[[...Array(y.rating)].map((w,c)=>e.jsx(ae,{className:"text-yellow-500",size:16},c)),[...Array(5-y.rating)].map((w,c)=>e.jsx(ae,{className:"text-grey-300",size:16},c)),e.jsx("span",{className:"ml-2 text-xs text-grey-400",children:new Date(y.created_at).toLocaleDateString()}),((A=y.reviewer)==null?void 0:A.full_name)&&e.jsxs("span",{className:"ml-2 text-xs text-grey-500",children:["par ",y.reviewer.full_name]})]}),e.jsx("div",{className:"text-sm text-grey-800",children:y.comment})]},y.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Pires avis"}),C.length===0?e.jsx("p",{className:"text-grey-500 text-sm",children:"Aucun mauvais avis pour ce vendeur."}):e.jsx("ul",{className:"space-y-4",children:C.map(y=>{var A;return e.jsxs("li",{className:"bg-grey-50 rounded p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[[...Array(y.rating)].map((w,c)=>e.jsx(ae,{className:"text-yellow-500",size:16},c)),[...Array(5-y.rating)].map((w,c)=>e.jsx(ae,{className:"text-grey-300",size:16},c)),e.jsx("span",{className:"ml-2 text-xs text-grey-400",children:new Date(y.created_at).toLocaleDateString()}),((A=y.reviewer)==null?void 0:A.full_name)&&e.jsxs("span",{className:"ml-2 text-xs text-grey-500",children:["par ",y.reviewer.full_name]})]}),e.jsx("div",{className:"text-sm text-grey-800",children:y.comment})]},y.id)})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Annonces de ce vendeur"}),i.length===0?e.jsx("p",{className:"text-grey-500 text-sm",children:"Aucune annonce publiÃ©e par ce vendeur."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:i.map(y=>e.jsx(Pe,{listing:y},y.id))})]})]})})},Js=()=>{const{user:s}=Ve(),r=G(),n=te(),[i,t]=a.useState(!1),[o,l]=a.useState(!1),[m,x]=a.useState(null),[h,b]=a.useState([]),[p,u]=a.useState([]),[N,C]=a.useState(!1),[P,y]=a.useState(!0),[A,w]=a.useState(null),[c,v]=a.useState(null),[g,f]=a.useState(!1),[,_]=a.useState(!1),[I,D]=a.useState(0),[O,J]=a.useState(!1),{register:Q,handleSubmit:le,formState:{errors:V},setValue:Y}=be();a.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){y(!1);return}try{const{data:E,error:M}=await k.from("users").select("id").eq("id",s.id).single();if(M)throw M;C(!!E)}catch(E){console.error("Error verifying user:",E),C(!1)}finally{y(!1)}})()},[s]),a.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){w(null);return}const{data:E,error:M}=await k.from("users").select("first_listing_at").eq("id",s.id).single();if(M){w(null);return}w(!(E!=null&&E.first_listing_at))})()},[s]),a.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){D(0);return}const{count:E,error:M}=await k.from("listings").select("*",{count:"exact",head:!0}).eq("user_id",s.id);if(M){console.error("Error fetching listings count:",M),D(0);return}const U=E||0;D(U),J(U>=he)})()},[s]),a.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){v(null);return}const{data:E,error:M}=await k.from("user_credits").select("credits").eq("user_id",s.id).single();v(M?null:(E==null?void 0:E.credits)??0)})()},[s]);const ie=async()=>{if(!(s!=null&&s.id))return!1;const{error:z}=await k.rpc("decrement_user_credit",{user_id_input:s.id});return z?!1:(v(E=>E!==null?E-1:null),!0)},{getRootProps:xe,getInputProps:ue}=cs({accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},maxSize:5*1024*1024,maxFiles:5,onDrop:(z,E)=>{if(E.length>0){const M=E.map(U=>U.errors[0].code==="file-too-large"?"Image trop volumineuse (max 5MB)":U.errors[0].message);x(M[0]);return}if(z.length+h.length>5){x("Maximum 5 photos autorisÃ©es");return}x(null),b(M=>[...M,...z])}}),d=z=>{b(E=>E.filter((M,U)=>U!==z))},S=z=>{u(E=>E.filter((M,U)=>U!==z))},j=async()=>{if(h.length===0&&p.length===0)throw new Error("Veuillez ajouter au moins une photo");l(!0);const z=[];p.length>0&&z.push(...p);try{for(let E=0;E<h.length;E++){const M=h[E],U=M.name.split(".").pop(),X=`${Date.now()}-${Math.random().toString(36).substring(7)}.${U}`,K=`${s.id}/${X}`,{error:Ce}=await k.storage.from("listings").upload(K,M);if(Ce)throw Ce;const{data:{publicUrl:re}}=k.storage.from("listings").getPublicUrl(K);z.push(re)}return z}catch(E){throw l(!1),E}finally{l(!1)}},F=async(z,E,M="active")=>{if(!(s!=null&&s.id)||!N)throw new Error("Votre compte n'est pas correctement configurÃ©");const{data:U,error:X}=await k.from("listings").insert({user_id:s.id,title:z.title.trim(),description:z.description.trim(),price:z.price,category:z.category,condition:z.condition,district:z.district,photos:E,status:M}).select().single();if(X)throw X;return U},Z=async z=>{if(h.length===0&&p.length===0){x("Veuillez ajouter au moins une photo");return}if(O){L.error(`Limite de ${he} publications atteinte pour la pÃ©riode bÃªta.`);return}x(null),t(!0);try{const E=await j();if(es){const M=await F(z,E,"active"),U=he-I-1;L.success(`Annonce publiÃ©e gratuitement ! ${U} publication(s) restante(s).`),r(`/listings/${M.id}`);return}if(A){const M=await F(z,E,"active");L.success("Votre premiÃ¨re annonce a Ã©tÃ© publiÃ©e gratuitement !"),r(`/listings/${M.id}`);return}if(c&&c>0){if(!await ie()){L.error("Erreur lors de la consommation du crÃ©dit."),t(!1);return}const U=await F(z,E,"active");L.success("Annonce publiÃ©e ! 1 crÃ©dit consommÃ©."),r(`/listings/${U.id}`);return}await F(z,E,"pending"),f(!0)}catch(E){console.error("Error creating listing:",E),L.error("Erreur lors de la crÃ©ation de l'annonce")}finally{t(!1)}};return a.useEffect(()=>{const E=new URLSearchParams(n.search).get("id");E&&(_(!0),(async()=>{const{data:M,error:U}=await k.from("listings").select("*").eq("id",E).single();if(U||!M){L.error("Impossible de prÃ©-remplir l'annonce"),_(!1);return}Y("title",M.title||""),Y("description",M.description||""),Y("price",typeof M.price=="number"?M.price:0),Y("category",M.category||""),Y("condition",M.condition||""),Y("district",M.district||""),Array.isArray(M.photos)&&M.photos.length>0&&(b([]),u(M.photos)),_(!1)})())},[n.search,Y]),P?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(W,{size:"large"})}):N?g?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>r("/profile"),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(oe,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Annonce crÃ©Ã©e"})]})}),e.jsx("div",{className:"container-custom py-4 lg:py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-xl p-6 lg:p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center mx-auto mb-4 lg:mb-6",children:e.jsx(ke,{className:"h-8 w-8 lg:h-10 lg:w-10 text-green-600"})}),e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-3 lg:mb-4",children:"Annonce crÃ©Ã©e avec succÃ¨s !"}),e.jsx("p",{className:"text-grey-600 mb-6 lg:mb-8 text-base lg:text-lg leading-relaxed",children:"Votre annonce a Ã©tÃ© crÃ©Ã©e mais n'est pas encore visible. Pour la publier, vous devez soit acheter des crÃ©dits, soit payer 200 FCFA."}),e.jsxs("div",{className:"space-y-4 mb-6 lg:mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-orange-50 rounded-xl p-4 lg:p-6 border border-primary-200",children:[e.jsx("h3",{className:"font-semibold text-primary-800 mb-2 lg:mb-3",children:"Option 1 : Acheter des crÃ©dits"}),e.jsx("p",{className:"text-primary-700 text-sm lg:text-base mb-3 lg:mb-4",children:"Achetez un pack de crÃ©dits pour publier plusieurs annonces"}),e.jsx("button",{onClick:()=>r("/acheter-credits"),className:"btn-primary w-full",children:"Acheter des crÃ©dits"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-primary-50 rounded-xl p-4 lg:p-6 border border-orange-200",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-2 lg:mb-3",children:"Option 2 : Paiement mobile (200 FCFA)"}),e.jsx("p",{className:"text-orange-700 text-sm lg:text-base mb-3 lg:mb-4",children:"Payez par mobile money pour publier cette annonce immÃ©diatement."}),e.jsxs("p",{className:"text-sm lg:text-base text-grey-700 mb-2",children:[e.jsx("strong",{children:"MTN :"})," +225 05 55 86 39 53"]}),e.jsxs("p",{className:"text-sm lg:text-base text-grey-700",children:[e.jsx("strong",{children:"Nom :"})," Oulobo Elmas Tresor"]})]})]}),e.jsx("p",{className:"text-xs lg:text-sm text-blue-600 mb-3 lg:mb-4",children:"AprÃ¨s le paiement, envoyez la capture d'Ã©cran via WhatsApp au mÃªme numÃ©ro avec votre email pour identification."}),e.jsx("a",{href:"https://wa.me/2250788000831?text=Bonjour,%20j'ai%20effectuÃ©%20le%20paiement%20de%20200%20FCFA%20pour%20publier%20mon%20annonce.%20Voici%20ma%20capture%20d'Ã©cran%20et%20mon%20email%20:",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-green-600 text-white font-semibold py-2.5 lg:py-3 px-4 lg:px-6 rounded-lg lg:rounded-xl hover:bg-green-700 transition-all duration-200 text-sm lg:text-base inline-block",children:"Envoyer via WhatsApp"}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsx("button",{onClick:()=>r("/profile"),className:"w-full border-2 border-grey-300 text-grey-700 font-semibold py-2.5 lg:py-3 px-4 lg:px-6 rounded-lg lg:rounded-xl hover:border-grey-400 hover:bg-grey-50 transition-all duration-200 text-sm lg:text-base",children:"Voir mes annonces"}),e.jsx("button",{onClick:()=>r("/"),className:"w-full text-grey-600 hover:text-grey-900 transition-colors text-sm lg:text-base",children:"Retour Ã  l'accueil"})]}),e.jsx("div",{className:"mt-6 lg:mt-8 p-3 lg:p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-2 lg:gap-3",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs lg:text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Traitement manuel"}),e.jsx("p",{children:"Votre annonce sera publiÃ©e dans les 24h aprÃ¨s rÃ©ception du paiement."})]})]})})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(oe,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Publier une annonce"})]})}),e.jsx("div",{className:"container-custom py-4 lg:py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"hidden lg:block mb-8",children:[e.jsxs("button",{onClick:()=>r(-1),className:"flex items-center text-grey-600 hover:text-grey-900 transition-colors mb-4",children:[e.jsx(oe,{className:"h-5 w-5 mr-2"}),"Retour"]}),e.jsx("h1",{className:"text-3xl font-bold text-grey-900",children:"Publier une annonce"})]}),e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-xl overflow-hidden border border-primary-100",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-400 px-4 lg:px-8 py-6 lg:py-8 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-extrabold text-white drop-shadow mb-2 sm:mb-0",children:"Publier une annonce"}),s&&e.jsx("div",{className:"flex items-center gap-3 lg:gap-4",children:e.jsxs("span",{className:"bg-white/20 text-white px-3 lg:px-4 py-1.5 lg:py-2 rounded-full font-semibold text-sm lg:text-base shadow",children:["BÃªta gratuite : ",e.jsxs("span",{className:"font-bold",children:[I,"/",he]})]})})]}),e.jsxs("form",{onSubmit:le(Z),className:"space-y-6 lg:space-y-10 px-4 lg:px-8 py-6 lg:py-10",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:["Photos ",e.jsx("span",{className:"text-grey-500 font-normal",children:"(max 5)"})]}),e.jsxs("div",{...xe(),className:`border-2 border-dashed rounded-xl lg:rounded-2xl p-6 lg:p-8 text-center cursor-pointer transition-colors bg-grey-50 hover:bg-primary-50/40 ${m?"border-error-500 bg-error-50":"border-primary-200"}`,children:[e.jsx("input",{...ue()}),e.jsx(Je,{className:"h-10 w-10 lg:h-12 lg:w-12 text-primary mx-auto mb-3"}),e.jsx("p",{className:"text-grey-700 text-base lg:text-lg font-medium",children:"Glissez-dÃ©posez vos photos ici, ou cliquez pour sÃ©lectionner"}),e.jsx("p",{className:"text-sm lg:text-base text-grey-500 mt-1",children:"Formats acceptÃ©s : JPG, PNG, WEBP (max 5MB)"})]}),e.jsx("div",{className:"mt-4 lg:mt-6",children:e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 lg:grid lg:grid-cols-3 md:grid-cols-5 lg:gap-4",children:[p&&p.length>0&&p.map((z,E)=>e.jsxs("div",{className:"relative min-w-[96px] max-w-[120px] aspect-square rounded-xl overflow-hidden group shadow border border-grey-200 flex-shrink-0",children:[e.jsx("img",{src:z,alt:`Photo ${E+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>S(E),className:"absolute top-1 right-1 bg-white/80 hover:bg-error-500 hover:text-white text-error-500 rounded-full p-1 shadow transition-colors z-10 group-hover:opacity-100 opacity-80",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 lg:h-5 lg:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},E)),h.map((z,E)=>e.jsxs("div",{className:"relative min-w-[96px] max-w-[120px] aspect-square rounded-xl overflow-hidden group shadow border border-grey-200 flex-shrink-0",children:[e.jsx("img",{src:URL.createObjectURL(z),alt:`Preview ${E+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>d(E),className:"absolute top-1 right-1 bg-white/80 hover:bg-error-500 hover:text-white text-error-500 rounded-full p-1 shadow transition-colors z-10 group-hover:opacity-100 opacity-80",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 lg:h-5 lg:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},E))]})}),m&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),m]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Titre de l'annonce"}),e.jsx("input",{id:"title",type:"text",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${V.title?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Ex: Manette PS4 en trÃ¨s bon Ã©tat",...Q("title",{required:"Le titre est requis",minLength:{value:5,message:"Le titre doit contenir au moins 5 caractÃ¨res"},maxLength:{value:100,message:"Le titre ne doit pas dÃ©passer 100 caractÃ¨res"}}),disabled:i}),V.title&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),V.title.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Prix (FCFA)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"price",type:"number",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm pr-16 lg:pr-20 ${V.price?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Ex: 15000",...Q("price",{required:"Le prix est requis",min:{value:200,message:"Le prix minimum est de 200 FCFA"},max:{value:1e7,message:"Le prix maximum est de 10 000 000 FCFA"}}),disabled:i}),e.jsx("span",{className:"absolute right-3 lg:right-4 top-3 text-grey-500 font-bold text-base lg:text-lg",children:"FCFA"})]}),V.price&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),V.price.message]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Description"}),e.jsx("textarea",{id:"description",rows:4,className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${V.description?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"DÃ©crivez votre article en dÃ©tail (Ã©tat, caractÃ©ristiques, raison de la vente...)",...Q("description",{required:"La description est requise",minLength:{value:20,message:"La description doit contenir au moins 20 caractÃ¨res"}}),disabled:i}),V.description&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),V.description.message]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"CatÃ©gorie"}),e.jsxs("select",{id:"category",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${V.category?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...Q("category",{required:"La catÃ©gorie est requise"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez une catÃ©gorie"}),Ne.map(z=>e.jsx("option",{value:z.id,children:z.label},z.id))]}),V.category&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),V.category.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"condition",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Ã‰tat"}),e.jsxs("select",{id:"condition",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${V.condition?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...Q("condition",{required:"L'Ã©tat est requis"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez l'Ã©tat"}),Re.map(z=>e.jsx("option",{value:z.id,children:z.label},z.id))]}),V.condition&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),V.condition.message]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label text-base lg:text-lg font-semibold mb-2 block",children:"Quartier Ã  Daloa"}),e.jsxs("select",{id:"district",className:`input-field text-base lg:text-lg px-4 lg:px-5 py-3 rounded-lg lg:rounded-xl shadow-sm ${V.district?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...Q("district",{required:"Le quartier est requis"}),disabled:i,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez votre quartier"}),qe.map(z=>e.jsx("option",{value:z,children:z},z))]}),V.district&&e.jsxs("p",{className:"input-error flex items-center mt-2 text-sm lg:text-base",children:[e.jsx(R,{className:"h-4 w-4 lg:h-5 lg:w-5 mr-2"}),V.district.message]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 rounded-xl lg:rounded-2xl p-4 lg:p-8 border border-primary-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg lg:text-xl font-bold mb-4 lg:mb-6 text-primary",children:"Phase BÃªta Gratuite"}),e.jsx("div",{className:`rounded-lg p-4 ${O?"bg-orange-50 border border-orange-200":"bg-green-50 border border-green-200"}`,children:e.jsx("div",{className:"flex items-center gap-3",children:O?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-6 w-6 text-orange-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-orange-800 text-base lg:text-lg",children:"Limite atteinte"}),e.jsxs("p",{className:"text-orange-700 text-sm lg:text-base",children:["Vous avez atteint la limite de ",he," publications gratuites pour la pÃ©riode bÃªta."]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800 text-base lg:text-lg",children:"Publication gratuite !"}),e.jsxs("p",{className:"text-green-700 text-sm lg:text-base",children:["Pendant la phase bÃªta, vous pouvez publier gratuitement jusqu'Ã  ",he," annonces. Vous avez utilisÃ© ",I," publication(s). Il vous reste ",he-I," publication(s)."]})]})]})})})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary-100 to-primary-50 rounded-lg lg:rounded-xl p-4 lg:p-6 border border-primary-200 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ke,{className:"h-5 w-5 lg:h-6 lg:w-6 text-success mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm lg:text-base text-grey-800",children:["En publiant cette annonce, vous acceptez les",e.jsx("a",{href:"/terms",className:"text-primary font-semibold underline hover:text-primary-700 transition ml-1",target:"_blank",rel:"noopener noreferrer",children:"conditions d'utilisation"}),"de DaloaMarket et confirmez que votre article est conforme Ã  nos rÃ¨gles."]})]})}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex justify-center items-center text-base lg:text-lg py-3 lg:py-4",disabled:i||o||A===null||O,children:i?e.jsx(W,{size:"small",className:"text-white"}):O?"Limite atteinte":"Publier gratuitement"})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-3xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8 text-center",children:[e.jsx(R,{className:"h-12 w-12 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Compte non configurÃ©"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Votre compte n'est pas correctement configurÃ©. Veuillez vous reconnecter pour rÃ©soudre ce problÃ¨me."}),e.jsx("button",{onClick:()=>r("/login"),className:"btn-primary",children:"Se reconnecter"})]})})})},Zs=({listingId:s,reviewedId:r,onSuccess:n})=>{const{user:i}=Ve(),[t,o]=a.useState(0),[l,m]=a.useState(""),[x,h]=a.useState(!1),[b,p]=a.useState(null),[u,N]=a.useState(!1),[C,P]=a.useState(null),[y,A]=a.useState([]),[w,c]=a.useState(!0);if(a.useEffect(()=>{(async()=>{if(!i)return;const{data:f,error:_}=await k.from("reviews").select("id").eq("reviewer_id",i.id).eq("listing_id",s).maybeSingle();if(_){P(!1);return}P(!!f)})()},[i,s]),a.useEffect(()=>{(async()=>{c(!0);const{data:f,error:_}=await k.from("reviews").select("*, reviewer:reviewer_id (full_name)").eq("listing_id",s).order("created_at",{ascending:!1});!_&&f&&A(f),c(!1)})()},[s,u]),!i)return null;const v=async g=>{if(g.preventDefault(),p(null),!t){p("Merci de donner une note.");return}h(!0);try{const{error:f}=await k.from("reviews").insert({reviewer_id:i.id,reviewed_id:r,listing_id:s,rating:t,comment:l});if(f)throw f;N(!0),n&&n()}catch(f){const _=f instanceof Error?f.message:"Erreur lors de lâ€™envoi de lâ€™avis.";p(_)}finally{h(!1)}};return C===null?e.jsx("div",{className:"text-grey-500 text-sm mt-6",children:"Chargement..."}):C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg text-blue-700 mt-6",children:"Vous avez dÃ©jÃ  laissÃ© un avis pour cette annonce."}),e.jsx(ze,{reviews:y,loading:w})]}):u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-green-50 rounded-lg text-green-700",children:"Merci pour votre avis !"}),e.jsx(ze,{reviews:y,loading:w})]}):e.jsxs("div",{children:[e.jsxs("form",{onSubmit:v,className:"space-y-3 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Note"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(g=>e.jsx("button",{type:"button",className:g<=t?"text-yellow-400":"text-grey-300",onClick:()=>o(g),"aria-label":`Donner ${g} Ã©toile${g>1?"s":""}`,children:"â˜…"},g))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Commentaire (optionnel)"}),e.jsx("textarea",{className:"input-field w-full",rows:3,value:l,onChange:g=>m(g.target.value),placeholder:"Votre retour sur la transaction..."})]}),b&&e.jsx("div",{className:"text-error-500 text-sm",children:b}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:x,children:x?"Envoi...":"Laisser un avis"})]}),e.jsx(ze,{reviews:y,loading:w})]})},ze=({reviews:s,loading:r})=>r?e.jsx("div",{className:"text-grey-500 text-sm mt-4",children:"Chargement des avis..."}):s.length?e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-base mb-2",children:"Avis sur cette annonce"}),s.map(n=>{var i;return e.jsxs("div",{className:"bg-grey-50 rounded-lg p-3 border border-grey-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold text-primary",children:((i=n.reviewer)==null?void 0:i.full_name)||"Utilisateur"}),e.jsx("span",{className:"flex gap-0.5 ml-2",children:[1,2,3,4,5].map(t=>e.jsx("span",{className:t<=n.rating?"text-yellow-400":"text-grey-300",children:"â˜…"},t))}),e.jsx("span",{className:"text-xs text-grey-500 ml-2",children:new Date(n.created_at).toLocaleDateString()})]}),n.comment&&e.jsx("div",{className:"text-grey-800 text-sm",children:n.comment})]},n.id)})]}):e.jsx("div",{className:"text-grey-400 text-sm mt-4",children:"Aucun avis pour cette annonce."}),Ks=()=>{const{id:s}=Le(),{user:r,userProfile:n}=H(),i=G(),[t,o]=a.useState(null),[l,m]=a.useState(!0),[x,h]=a.useState(0),[b,p]=a.useState(!1),[u,N]=a.useState(""),[C,P]=a.useState(!1),[y,A]=a.useState(!1),[w,c]=a.useState(!1),[v,g]=a.useState(null),[f,_]=a.useState(!1),[I,D]=a.useState(!1),[O,J]=a.useState(!1),[Q,le]=a.useState([]);a.useEffect(()=>{(async()=>{try{if(!s)return;const{data:F,error:Z}=await k.from("listings").select(`
            *,
            seller:users!listings_user_id_fkey (*)
          `).eq("id",s).single();if(Z)throw Z;if(o(F),F){const{data:z,error:E}=await k.from("listings").select("*").eq("category",F.category).eq("status","active").neq("id",F.id).limit(4);!E&&z&&le(z)}}catch(F){console.error("Error fetching listing:",F),L.error("Impossible de charger cette annonce")}finally{m(!1)}})()},[s]);const V=()=>{t!=null&&t.photos&&h(j=>j===t.photos.length-1?0:j+1)},Y=()=>{t!=null&&t.photos&&h(j=>j===0?t.photos.length-1:j-1)},ie=async()=>{if(!u.trim()){L.error("Veuillez indiquer une raison");return}P(!0);try{await new Promise(j=>setTimeout(j,1e3)),L.success("Annonce signalÃ©e avec succÃ¨s"),p(!1),N("")}catch(j){console.error("Error reporting listing:",j),L.error("Erreur lors du signalement")}finally{P(!1)}};async function xe(){if(t){A(!0);try{const{error:j}=await k.from("listings").update({status:"sold"}).eq("id",t.id);if(j)throw j;L.success("Annonce marquÃ©e comme vendue"),o({...t,status:"sold"})}catch{L.error("Erreur lors du marquage comme vendue")}finally{A(!1)}}}async function ue(){if(!(!t||v===null)){_(!0);try{const{error:j}=await k.from("listings").update({price:v}).eq("id",t.id);if(j)throw j;L.success("Prix modifiÃ© avec succÃ¨s"),o({...t,price:v}),c(!1)}catch{L.error("Erreur lors de la modification du prix")}finally{_(!1)}}}async function d(){if(t){J(!0);try{const{error:j}=await k.from("listings").delete().eq("id",t.id);if(j)throw j;L.success("Annonce supprimÃ©e"),i("/profile")}catch{L.error("Erreur lors de la suppression")}finally{J(!1),D(!1)}}}const S=()=>{if(!r){L.error("Vous devez Ãªtre connectÃ© pour contacter le vendeur"),i("/login",{state:{from:`/listings/${s}`}});return}if((t==null?void 0:t.seller.id)===r.id){L.error("Vous ne pouvez pas contacter votre propre annonce");return}i(`/messages/${t==null?void 0:t.id}/${t==null?void 0:t.seller.id}`)};return l?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(W,{size:"large"})}):t?t&&t.status!=="active"&&(!r||r.id!==t.user_id)?e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(R,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce non disponible"}),e.jsxs("p",{className:"text-grey-600 mb-6",children:["Cette annonce n'est pas accessible. Elle a peut-Ãªtre Ã©tÃ© dÃ©jÃ  vendue, supprimÃ©e, ou vous n'avez pas l'autorisation pour la consulter.",e.jsx("br",{}),e.jsxs("span",{className:"block mt-2 text-sm text-grey-500",children:["Si vous pensez qu'il s'agit d'une erreur, contactez le ",e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-grey-800 hover:text-primary transition-colors",children:"support"})," ou vÃ©rifiez l'Ã©tat de l'annonce dans l'espace personnel du vendeur."]})]}),e.jsx(q,{to:"/",className:"btn-primary",children:"Retour Ã  l'accueil"})]})})}):e.jsxs("div",{className:"min-h-screen bg-grey-50 py-8",children:[e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden mb-6",children:[e.jsx("div",{className:"relative aspect-video",children:t.photos&&t.photos.length>0?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.photos[x],alt:t.title,className:"w-full h-full object-contain"}),t.photos.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Y,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 rounded-full p-2 shadow-md hover:bg-opacity-100 transition-all","aria-label":"Image prÃ©cÃ©dente",children:e.jsx(ds,{className:"h-6 w-6 text-grey-800"})}),e.jsx("button",{onClick:V,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 rounded-full p-2 shadow-md hover:bg-opacity-100 transition-all","aria-label":"Image suivante",children:e.jsx(ms,{className:"h-6 w-6 text-grey-800"})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.photos.map((j,F)=>e.jsx("button",{onClick:()=>h(F),className:`h-2 w-2 rounded-full ${F===x?"bg-primary":"bg-white bg-opacity-60"}`,"aria-label":`Voir image ${F+1}`},F))})]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-grey-100",children:e.jsx("p",{className:"text-grey-500",children:"Aucune image disponible"})})}),t.photos&&t.photos.length>1&&e.jsx("div",{className:"p-4 flex space-x-2 overflow-x-auto",children:t.photos.map((j,F)=>e.jsx("button",{onClick:()=>h(F),className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 ${F===x?"border-primary":"border-transparent"}`,children:e.jsx("img",{src:j,alt:`Thumbnail ${F+1}`,className:"w-full h-full object-cover"})},F))})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-grey-900 mb-2",children:t.title}),e.jsx("p",{className:"text-3xl font-bold text-primary mb-4",children:ce(t.price)}),e.jsxs("div",{className:"flex flex-wrap gap-y-2 mb-6",children:[e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx(me,{className:"h-5 w-5 text-grey-500 mr-1"}),e.jsx("span",{className:"text-grey-700",children:t.district})]}),e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx(xs,{className:"h-5 w-5 text-grey-500 mr-1"}),e.jsx("span",{className:"text-grey-700",children:de(t.created_at)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-grey-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"CatÃ©gorie"}),e.jsx("p",{className:"font-medium",children:Ms(t.category)})]}),e.jsxs("div",{className:"bg-grey-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"Ã‰tat"}),e.jsx("p",{className:"font-medium",children:As(t.condition)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-grey-700 whitespace-pre-line",children:t.description})]}),(r==null?void 0:r.id)&&r.id!==t.seller.id&&e.jsx(Zs,{listingId:t.id,reviewedId:t.seller.id}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>p(!0),className:"text-grey-500 flex items-center text-sm hover:text-error-600 transition-colors",children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),"Signaler l'annonce"]})}),(r==null?void 0:r.id)&&t&&r.id===t.seller.id&&(t.status==="active"||t.status==="pending")&&e.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[t.status==="active"&&e.jsx("button",{className:"btn-outline btn-xs text-success-700 border-success-700 hover:bg-success-50",onClick:xe,disabled:y,children:y?"Traitement...":"Marquer comme vendu"}),t.status==="active"&&(w?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",min:200,step:100,value:v??t.price,onChange:j=>g(Number(j.target.value)),className:"input-field w-28 border-primary-300 focus:border-primary-500 rounded-lg",disabled:f}),e.jsx("button",{className:"btn-primary btn-xs",onClick:ue,disabled:f,children:f?"Mise Ã  jour...":"Valider"}),e.jsx("button",{className:"btn-outline btn-xs",onClick:()=>c(!1),disabled:f,children:"Annuler"})]}):e.jsx("button",{className:"btn-outline btn-xs hover:bg-primary-50 border-primary-200 text-primary",onClick:()=>{c(!0),g(t.price)},children:"Modifier le prix"})),e.jsx("button",{className:"btn-outline btn-xs text-error-700 border-error-700 hover:bg-error-50",onClick:()=>D(!0),disabled:O,children:O?"Suppression...":"Supprimer"})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-grey-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Supprimer l'annonce ?"}),e.jsx("p",{className:"text-grey-700 mb-6",children:"Cette action est irrÃ©versible. Voulez-vous vraiment supprimer cette annonce ?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{className:"btn-outline",onClick:()=>D(!1),disabled:O,children:"Annuler"}),e.jsx("button",{className:"btn-primary bg-error-600 hover:bg-error-700 border-error-600",onClick:d,disabled:O,children:"Confirmer la suppression"})]})]})}),(r==null?void 0:r.id)&&t&&r.id===t.seller.id&&t.status==="pending"&&e.jsxs("div",{className:"my-6 flex flex-col items-center",children:[e.jsx("div",{className:"mb-4 text-lg text-warning-700 font-semibold",children:"Cette annonce est en attente de paiement. Elle ne sera pas visible tant que le paiement n'est pas effectuÃ©."}),e.jsxs("button",{className:"btn-primary w-full max-w-md text-center py-3 text-lg font-semibold rounded-xl shadow-card border border-warning-200 bg-warning-500 hover:bg-warning-600 text-white transition mb-2",onClick:()=>i(`/paiement-annonce/${t.id}`),children:[e.jsx("span",{role:"img","aria-label":"paiement",children:"ðŸ’³"})," Payer maintenant pour publier"]}),e.jsx("div",{className:"mt-2 text-base text-grey-600 text-center",children:"Toutes les informations de l'annonce seront prÃ©-remplies, y compris le boost si sÃ©lectionnÃ©."})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Vendeur"}),e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs(q,{to:`/profile/seller/${t.seller.id}`,className:"flex items-center group",children:[t.seller.avatar_url?e.jsx("img",{src:t.seller.avatar_url,alt:t.seller.full_name,className:"h-12 w-12 rounded-full object-cover border border-grey-200 shadow"}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-grey-100 flex items-center justify-center",children:e.jsx(se,{className:"h-6 w-6 text-grey-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-primary group-hover:underline cursor-pointer",children:t.seller.full_name}),t.seller.rating&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 text-primary fill-current"}),e.jsx("span",{className:"text-sm ml-1",children:t.seller.rating.toFixed(1)})]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"Quartier"}),e.jsx("p",{className:"font-medium",children:t.seller.district})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-grey-500",children:"Membre depuis"}),e.jsx("p",{className:"font-medium",children:de(t.seller.created_at)})]}),e.jsxs("button",{onClick:S,className:"btn-primary w-full flex items-center justify-center mb-2",disabled:t.seller.id===(r==null?void 0:r.id),children:[e.jsx(we,{className:"h-5 w-5 mr-2"}),"Contacter le vendeur (chat)"]}),t.seller.phone&&e.jsxs("a",{href:`https://wa.me/${(()=>{const j=t.seller.phone.replace(/[^\d]/g,"");return j.startsWith("225")?j:j.length===10&&j.startsWith("0")?"225"+j:j.length===8?"2250"+j:(j.length>10&&!j.startsWith("225"),j)})()}`,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition mb-2",title:"Contacter sur WhatsApp",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-2",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 14.487c-.297-.149-1.758-.867-2.03-.967-.273-.099-.472-.148-.67.15-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.075-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.372-.025-.52-.075-.149-.669-1.612-.916-2.21-.242-.58-.487-.501-.67-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.099 3.21 5.077 4.377.71.306 1.263.489 1.695.626.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.288.173-1.413-.074-.124-.272-.198-.57-.347z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 1.591.418 3.086 1.144 4.375L3 21l4.755-1.244A8.963 8.963 0 0012 21c4.97 0 9-4.03 9-9z"})]}),"Contacter sur WhatsApp"]}),t.seller.id===(r==null?void 0:r.id)&&e.jsx("p",{className:"text-sm text-grey-500 text-center mt-2",children:"C'est votre annonce"})]}),Q.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Annonces similaires"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:Q.map(j=>e.jsxs(q,{to:`/listings/${j.id}`,className:"flex flex-col items-center hover:bg-grey-50 p-2 rounded-lg transition-colors border border-grey-100",children:[e.jsx("div",{className:"h-24 w-full rounded-md overflow-hidden flex-shrink-0 mb-2 flex items-center justify-center bg-grey-50",children:e.jsx("img",{src:j.photos[0]||"https://via.placeholder.com/96",alt:j.title,className:"h-24 w-auto max-w-full object-cover"})}),e.jsxs("div",{className:"w-full text-center",children:[e.jsx("p",{className:"font-medium line-clamp-1 text-sm mb-1",children:j.title}),e.jsx("p",{className:"text-primary font-bold text-base",children:ce(j.price)})]})]},j.id))})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-grey-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Signaler l'annonce"}),e.jsx("p",{className:"text-grey-600 mb-4",children:"Veuillez indiquer la raison pour laquelle vous signalez cette annonce."}),e.jsxs("select",{value:u,onChange:j=>N(j.target.value),className:"input-field mb-4",disabled:C,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez une raison"}),e.jsx("option",{value:"fake",children:"Annonce frauduleuse"}),e.jsx("option",{value:"inappropriate",children:"Contenu inappropriÃ©"}),e.jsx("option",{value:"duplicate",children:"Annonce en double"}),e.jsx("option",{value:"wrong_category",children:"Mauvaise catÃ©gorie"}),e.jsx("option",{value:"other",children:"Autre raison"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"btn-outline",disabled:C,children:"Annuler"}),e.jsx("button",{onClick:ie,className:"btn-primary flex items-center",disabled:C||!u,children:C?e.jsx(W,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Signaler"]})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(R,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce introuvable"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Cette annonce n'existe pas ou a Ã©tÃ© supprimÃ©e."}),e.jsx(q,{to:"/",className:"btn-primary",children:"Retour Ã  l'accueil"})]})})})},Ys=({initialQuery:s="",className:r="",selectedCategory:n})=>{const[i,t]=a.useState(s),o=G(),l=te(),m=new URLSearchParams(l.search),x=(n??m.get("category")??"")+"",h=b=>{b.preventDefault(),i.trim()&&o(`/search?q=${encodeURIComponent(i.trim())}`)};return e.jsxs("div",{className:`relative ${r}`,children:[e.jsx("form",{onSubmit:h,className:"relative group",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Que recherchez-vous ?",className:"w-full py-3 sm:py-3.5 lg:py-4 pl-10 sm:pl-12 lg:pl-14 pr-24 sm:pr-28 lg:pr-32 text-sm sm:text-base lg:text-lg rounded-xl lg:rounded-2xl border-2 border-grey-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white shadow-md group-hover:shadow-lg transition-all",value:i,onChange:b=>t(b.target.value)}),e.jsx(ye,{className:"absolute left-3 sm:left-4 lg:left-5 top-3 sm:top-3.5 lg:top-4.5 h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-grey-400"}),e.jsx("button",{type:"submit",className:"absolute right-2 sm:right-2.5 lg:right-3 top-1.5 sm:top-2 lg:top-2 bg-primary text-white py-1.5 sm:py-2 lg:py-2.5 px-3 sm:px-4 lg:px-6 rounded-lg lg:rounded-xl hover:bg-primary-600 transition-colors font-semibold shadow-md hover:shadow-lg text-xs sm:text-sm lg:text-base",children:"Rechercher"})]})}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mt-3 sm:mt-4 justify-center",children:Ne.map(b=>{const p=x===b.id;return e.jsx("button",{onClick:()=>{const u=new URLSearchParams(l.search);u.get("category")===b.id?(u.delete("category"),o(`/search?${u.toString()}`,{replace:!0})):(u.set("category",b.id),o(`/search?${u.toString()}`,{replace:!0}))},className:"px-2.5 sm:px-3 lg:px-4 py-1.5 sm:py-2 border rounded-full text-xs sm:text-sm font-medium transition-all "+(p?"bg-primary text-white border-primary-500 shadow-md":"bg-white border-grey-200 text-grey-700 hover:bg-primary-50 hover:border-primary-200 hover:text-primary"),children:b.label},b.id)})})]})},et=()=>{const s=te(),r=G(),n=new URLSearchParams(s.search),[i,t]=a.useState([]),[o,l]=a.useState(!0),[m,x]=a.useState(0),[h,b]=a.useState(1),[p,u]=a.useState(!1),[N,C]=a.useState("created_at"),[P,y]=a.useState("desc"),[A,w]=a.useState(!1),c={category:n.get("category")||"",condition:n.get("condition")||"",district:n.get("district")||"",minPrice:n.get("minPrice")||"",maxPrice:n.get("maxPrice")||""},v=n.get("q")||"",g=12,{category:f,condition:_,district:I,minPrice:D,maxPrice:O}=c,J=a.useCallback(async d=>{l(!0);try{let S=k.from("listings").select(`
          *,
          users:user_id (
            full_name,
            rating
          )
        `,{count:"exact"}).eq("status","active").order(N,{ascending:P==="asc"});v&&(S=S.or(`title.ilike.%${v}%,description.ilike.%${v}%`)),f&&(S=S.eq("category",f)),_&&(S=S.eq("condition",_)),I&&(S=S.eq("district",I)),D&&(S=S.gte("price",parseInt(D))),O&&(S=S.lte("price",parseInt(O)));const j=(d-1)*g,F=j+g-1;S=S.range(j,F);const{data:Z,error:z,count:E}=await S;if(z)throw z;const M=Z.map(U=>{var X,K;return{...U,seller_name:((X=U.users)==null?void 0:X.full_name)||"Utilisateur",seller_rating:((K=U.users)==null?void 0:K.rating)||null}});t(d===1?M:U=>[...U,...M]),E!==null&&(x(E),u(j+M.length<E))}catch(S){console.error("Error fetching listings:",S)}finally{l(!1)}},[N,P,v,f,_,I,D,O]);a.useEffect(()=>{b(1),J(1)},[s.search,N,P,J]);const Q=()=>{const d=h+1;b(d),J(d)},le=d=>{d==="price_asc"?(C("price"),y("asc")):d==="price_desc"?(C("price"),y("desc")):(C("created_at"),y("desc"))},V=d=>{const{name:S,value:j}=d.target,F=new URLSearchParams(s.search);j?F.set(S,j):F.delete(S),r(`/search?${F.toString()}`)},Y=()=>{w(!1)},ie=()=>{r(v?`/search?q=${v}`:"/search"),w(!1)},xe=d=>{const S=Ne.find(j=>j.id===d);return S?S.label:""},ue=d=>{const S=Re.find(j=>j.id===d);return S?S.label:""};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsxs("div",{className:"container-custom py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(Ys,{initialQuery:v,selectedCategory:c.category})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>w(!0),className:"btn-outline flex items-center gap-2 px-4 py-2",children:[e.jsx(us,{className:"h-4 w-4"}),"Filtres",(c.category||c.condition||c.district||c.minPrice||c.maxPrice)&&e.jsx("span",{className:"bg-primary text-white text-xs rounded-full px-2 py-0.5 ml-1",children:[c.category,c.condition,c.district,c.minPrice||c.maxPrice].filter(Boolean).length})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.category&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:[xe(c.category),e.jsx("button",{onClick:()=>{const d={...c,category:""};setFilters(d);const S=new URLSearchParams(s.search);S.delete("category"),r(`/search?${S.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(je,{className:"h-3 w-3"})})]}),c.condition&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:[ue(c.condition),e.jsx("button",{onClick:()=>{const d={...c,condition:""};setFilters(d);const S=new URLSearchParams(s.search);S.delete("condition"),r(`/search?${S.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(je,{className:"h-3 w-3"})})]}),c.district&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:[c.district,e.jsx("button",{onClick:()=>{const d={...c,district:""};setFilters(d);const S=new URLSearchParams(s.search);S.delete("district"),r(`/search?${S.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(je,{className:"h-3 w-3"})})]}),(c.minPrice||c.maxPrice)&&e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm flex items-center",children:["Prix: ",c.minPrice?ce(parseInt(c.minPrice)):"0"," - ",c.maxPrice?ce(parseInt(c.maxPrice)):"âˆž",e.jsx("button",{onClick:()=>{const d={...c,minPrice:"",maxPrice:""};setFilters(d);const S=new URLSearchParams(s.search);S.delete("minPrice"),S.delete("maxPrice"),r(`/search?${S.toString()}`)},className:"ml-2 hover:bg-primary-200 rounded-full p-0.5",children:e.jsx(je,{className:"h-3 w-3"})})]})]}),(c.category||c.condition||c.district||c.minPrice||c.maxPrice)&&e.jsx("button",{onClick:ie,className:"text-grey-600 text-sm hover:text-grey-900 transition-colors underline",children:"Tout effacer"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-grey-600 text-sm",children:"Trier par:"}),e.jsxs("select",{className:"input-field py-2 text-sm min-w-0",value:N==="created_at"?"newest":N==="price"&&P==="asc"?"price_asc":"price_desc",onChange:d=>le(d.target.value),children:[e.jsx("option",{value:"newest",children:"Plus rÃ©cent"}),e.jsx("option",{value:"price_asc",children:"Prix croissant"}),e.jsx("option",{value:"price_desc",children:"Prix dÃ©croissant"})]})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-grey-600 text-lg",children:[e.jsx("span",{className:"font-semibold text-grey-900",children:m})," rÃ©sultat",m!==1?"s":"",v&&e.jsxs("span",{children:[" pour ",e.jsxs("span",{className:"font-semibold text-primary",children:['"',v,'"']})]})]})}),o&&h===1?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(W,{size:"large"})}):i.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:i.map(d=>e.jsx(Pe,{listing:d,sellerName:d.seller_name,sellerRating:d.seller_rating},d.id))}),p&&e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:Q,className:"btn-outline flex items-center mx-auto px-8 py-3 text-lg",disabled:o,children:[o?e.jsx(W,{size:"small",className:"mr-2"}):e.jsx(Ie,{className:"h-5 w-5 mr-2"}),"Charger plus d'annonces"]})})]}):e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center max-w-2xl mx-auto",children:[e.jsx(R,{className:"h-20 w-20 text-grey-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Aucune annonce trouvÃ©e"}),e.jsx("p",{className:"text-grey-600 mb-8 text-lg",children:"Aucune annonce ne correspond Ã  votre recherche. Essayez de modifier vos filtres ou votre recherche."}),e.jsx("button",{onClick:ie,className:"btn-primary text-lg px-8 py-4",children:"RÃ©initialiser les filtres"})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Filtres"}),e.jsx("button",{onClick:()=>w(!1),className:"p-2 rounded-xl text-grey-500 hover:text-grey-700 hover:bg-grey-100 transition-colors",children:e.jsx(je,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"input-label text-base font-semibold",children:"CatÃ©gorie"}),e.jsxs("select",{id:"category",name:"category",className:"input-field",value:c.category,onChange:V,children:[e.jsx("option",{value:"",children:"Toutes les catÃ©gories"}),Ne.map(d=>e.jsx("option",{value:d.id,children:d.label},d.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"condition",className:"input-label text-base font-semibold",children:"Ã‰tat"}),e.jsxs("select",{id:"condition",name:"condition",className:"input-field",value:c.condition,onChange:V,children:[e.jsx("option",{value:"",children:"Tous les Ã©tats"}),Re.map(d=>e.jsx("option",{value:d.id,children:d.label},d.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label text-base font-semibold",children:"Quartier"}),e.jsxs("select",{id:"district",name:"district",className:"input-field",value:c.district,onChange:V,children:[e.jsx("option",{value:"",children:"Tous les quartiers"}),qe.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label text-base font-semibold",children:"Prix (FCFA)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"number",name:"minPrice",placeholder:"Prix min",className:"input-field",value:c.minPrice,onChange:V,min:"0"})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"maxPrice",placeholder:"Prix max",className:"input-field",value:c.maxPrice,onChange:V,min:"0"})})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("button",{onClick:ie,className:"btn-outline flex-1 py-3",children:"RÃ©initialiser"}),e.jsx("button",{onClick:Y,className:"btn-primary flex-1 py-3",children:"Appliquer"})]})]})})]})},st=()=>{const{user:s}=H(),[r,n]=a.useState([]),[i,t]=a.useState(!0);return a.useEffect(()=>{if(!s)return;const o=async()=>{try{const{data:m,error:x}=await k.from("messages").select(`
            *,
            listing:listings!messages_listing_id_fkey (
              id,
              title,
              photos,
              user_id
            ),
            sender:users!messages_sender_id_fkey (
              full_name
            ),
            receiver:users!messages_receiver_id_fkey (
              full_name
            )
          `).or(`sender_id.eq.${s.id},receiver_id.eq.${s.id}`).order("created_at",{ascending:!1});if(x)throw x;const h=new Map;m==null||m.forEach(p=>{const u=p.sender_id===s.id,N=u?p.receiver_id:p.sender_id,C=u?p.receiver.full_name:p.sender.full_name,P=`${p.listing_id}_${N}`;if(!h.has(P))h.set(P,{listing_id:p.listing_id,listing_title:p.listing.title,listing_photo:p.listing.photos[0]||"",other_user_id:N,other_user_name:C,last_message:p.content,last_message_date:p.created_at,unread_count:!u&&!p.read?1:0});else if(!u&&!p.read){const y=h.get(P);y.unread_count+=1}});const b=Array.from(h.values()).sort((p,u)=>new Date(u.last_message_date).getTime()-new Date(p.last_message_date).getTime());n(b)}catch(m){console.error("Error fetching conversations:",m),L.error("Erreur lors du chargement des conversations")}finally{t(!1)}};o();const l=k.channel("messages-changes").on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`sender_id=eq.${s.id},receiver_id=eq.${s.id}`},()=>{o()}).subscribe();return()=>{l.unsubscribe()}},[s]),i?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(W,{size:"large"})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsxs("div",{className:"container-custom max-w-4xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Messages"}),r.length>0?e.jsx("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:e.jsx("div",{className:"divide-y divide-grey-200",children:r.map(o=>e.jsx(q,{to:`/messages/${o.listing_id}/${o.other_user_id}`,className:"block p-4 hover:bg-grey-50 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:o.listing_photo||"https://via.placeholder.com/64",alt:o.listing_title,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"ml-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-medium text-grey-900 line-clamp-1",children:o.listing_title}),e.jsx("span",{className:"text-xs text-grey-500",children:de(o.last_message_date)})]}),e.jsx("p",{className:"text-sm text-grey-600 mt-1",children:o.other_user_name}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-sm text-grey-500 line-clamp-1",children:o.last_message}),o.unread_count>0&&e.jsx("span",{className:"bg-primary text-white text-xs font-medium px-2 py-0.5 rounded-full",children:o.unread_count})]})]})]})},`${o.listing_id}_${o.other_user_id}`))})}):e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(we,{className:"h-16 w-16 text-grey-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun message"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Vous n'avez pas encore de conversations. Parcourez les annonces et contactez les vendeurs pour commencer Ã  discuter."}),e.jsx(q,{to:"/search",className:"btn-primary",children:"Parcourir les annonces"})]})]})})},tt=()=>{const{listingId:s,userId:r}=Le(),{user:n}=H(),i=G(),t=s||"",o=r||"";a.useEffect(()=>{(!t||!o)&&(L.error("ParamÃ¨tres de conversation invalides."),i("/messages")),n&&n.id===o&&(L.error("Vous ne pouvez pas discuter avec vous-mÃªme."),i("/messages"))},[t,o,n,i]);const[l,m]=a.useState([]),[x,h]=a.useState(""),[b,p]=a.useState(!0),[u,N]=a.useState(!1),[C,P]=a.useState(null),[y,A]=a.useState(null),w=a.useRef(null),c=async()=>{if(!(!n||!t||!o))try{const{data:f,error:_}=await k.from("messages").select(`
          *,
          sender:users!messages_sender_id_fkey (
            full_name
          ),
          receiver:users!messages_receiver_id_fkey (
            full_name
          )
        `).eq("listing_id",t).or(`and(sender_id.eq.${n.id},receiver_id.eq.${o}),and(sender_id.eq.${o},receiver_id.eq.${n.id})`).order("created_at",{ascending:!0});if(_)throw _;m(f||[])}catch(f){console.error("Error fetching messages:",f)}},v=async()=>{try{const{data:f,error:_}=await k.from("listings").select("id, title, photos, price, user_id").eq("id",t).single();if(_)throw _;P({id:f.id,title:f.title,photo:f.photos[0]||"",price:f.price,seller_id:f.user_id});const{data:I,error:D}=await k.from("users").select("id, full_name").eq("id",o).single();if(D)throw D;A({id:I.id,full_name:I.full_name}),await c()}catch(f){console.error("Error fetching data:",f),L.error("Erreur lors du chargement de la conversation"),i("/messages")}finally{p(!1)}};a.useEffect(()=>{if(!n||!t||!o)return;(async()=>{try{await v()}catch(I){console.error("Error fetching data:",I),L.error("Erreur lors du chargement de la conversation"),i("/messages")}finally{p(!1)}})();const _=k.channel("chat-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`listing_id=eq.${t}`},()=>{c()}).subscribe();return()=>{_.unsubscribe()}},[n,t,o,i]),a.useEffect(()=>{var I,D;const f=(I=w.current)==null?void 0:I.parentElement;if(!f)return;f.scrollHeight-f.scrollTop-f.clientHeight<50&&((D=w.current)==null||D.scrollIntoView({behavior:"smooth"})),l.length>0&&n&&(async()=>await k.from("messages").update({read:!0}).eq("listing_id",t).eq("receiver_id",n.id).eq("read",!1))()},[l,t,n]);const g=async f=>{if(f.preventDefault(),!(!x.trim()||!n||!t||!o)){N(!0);try{const{error:_}=await k.from("messages").insert({listing_id:t,sender_id:n.id,receiver_id:o,content:x.trim(),read:!1});if(_)throw _;h(""),await c()}catch(_){console.error("Error sending message:",_),L.error("Erreur lors de l'envoi du message")}finally{N(!1)}}};return b?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(W,{size:"large"})}):!C||!y?e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(R,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Conversation introuvable"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Cette conversation n'existe pas, a Ã©tÃ© supprimÃ©e, ou les paramÃ¨tres sont invalides."}),e.jsx(q,{to:"/messages",className:"btn-primary",children:"Retour aux messages"})]})})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-grey-200 flex items-center",children:[e.jsx(q,{to:"/messages",className:"mr-3 text-grey-500 hover:text-grey-700",children:e.jsx(oe,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-12 w-12 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:C.photo||"https://via.placeholder.com/48",alt:C.title,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"ml-3 flex-grow",children:[e.jsx(q,{to:`/listings/${C.id}`,className:"font-medium text-grey-900 hover:underline line-clamp-1",children:C.title}),e.jsx("p",{className:"text-sm text-grey-600",children:y.full_name})]})]}),e.jsx("div",{className:"p-4 h-[60vh] overflow-y-auto bg-grey-50",children:l.length>0?e.jsxs("div",{className:"space-y-4",children:[l.map(f=>{const _=f.sender_id===(n==null?void 0:n.id);return e.jsxs("div",{className:`flex ${_?"justify-end":"justify-start"}`,children:[!_&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-grey-200 flex items-center justify-center mr-2 flex-shrink-0",children:e.jsx(se,{className:"h-4 w-4 text-grey-500"})}),e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${_?"bg-primary text-white rounded-tr-none":"bg-white border border-grey-200 rounded-tl-none"}`,children:[e.jsx("p",{className:"break-words",children:f.content}),e.jsx("p",{className:`text-xs mt-1 ${_?"text-primary-100":"text-grey-500"}`,children:de(f.created_at)})]})]},f.id)}),e.jsx("div",{ref:w})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"bg-grey-100 rounded-full p-4 mb-4",children:e.jsx(we,{className:"h-8 w-8 text-grey-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Commencez la conversation"}),e.jsxs("p",{className:"text-grey-600 max-w-md",children:["Envoyez un message Ã  ",y.full_name,' Ã  propos de "',C.title,'"']})]})}),e.jsx("div",{className:"p-4 border-t border-grey-200",children:e.jsxs("form",{onSubmit:g,className:"flex items-center",children:[e.jsx("input",{type:"text",value:x,onChange:f=>h(f.target.value),placeholder:"Ã‰crivez votre message...",className:"input-field flex-grow",disabled:u}),e.jsx("button",{type:"submit",className:"btn-primary ml-2 flex items-center justify-center",disabled:!x.trim()||u,children:u?e.jsx(W,{size:"small",className:"text-white"}):e.jsx(Me,{className:"h-5 w-5"})})]})})]})})})},rt=()=>{const s=te(),r=new URLSearchParams(s.search),n=r.get("listing_id"),i=r.get("type"),t=r.get("user_id"),o=G(),[l,m]=a.useState(!0),[x,h]=a.useState(null),[b,p]=a.useState("Votre paiement a Ã©tÃ© traitÃ© avec succÃ¨s !");return a.useEffect(()=>{(async()=>{try{if(await new Promise(N=>setTimeout(N,2e3)),n){const{data:N,error:C}=await k.from("listings").select("status").eq("id",n).single();!C&&N&&(N.status==="active"?p("Votre annonce a Ã©tÃ© publiÃ©e avec succÃ¨s !"):p("Paiement reÃ§u. Votre annonce sera publiÃ©e sous peu."))}else i==="pack"?(p("Vos crÃ©dits ont Ã©tÃ© ajoutÃ©s Ã  votre compte !"),localStorage.setItem("credit_purchase_pending","true")):i==="boost"&&p("Votre boost a Ã©tÃ© appliquÃ© avec succÃ¨s !");if(t){const{data:N,error:C}=await k.from("transactions").select("*").eq("user_id",t).eq("status","completed").order("created_at",{ascending:!1}).limit(1);!C&&N&&N.length>0&&h(N[0].id)}}catch(N){console.error("Error updating transaction:",N)}finally{m(!1)}})()},[n,i,t]),l?e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(W,{size:"large"}),e.jsx("p",{className:"mt-4 text-grey-600",children:"Traitement de votre paiement..."})]})}):e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-success-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(_e,{className:"h-12 w-12 text-success"})}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Paiement rÃ©ussi !"}),e.jsx("p",{className:"text-grey-600 mb-6",children:b}),x&&e.jsxs("p",{className:"text-sm text-grey-500 mb-6",children:["RÃ©fÃ©rence de transaction: ",x]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[n&&e.jsx(q,{to:`/listings/${n}`,className:"btn-primary",children:"Voir mon annonce"}),i==="pack"&&e.jsx(q,{to:"/profile",className:"btn-primary",children:"Voir mes crÃ©dits"}),e.jsx("button",{onClick:()=>o("/"),className:"btn-secondary",children:"Retour Ã  l'accueil"})]}),e.jsx("div",{className:"mt-8 p-4 bg-primary-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-primary-700",children:["ðŸ’¡ ",e.jsx("strong",{children:"Merci d'utiliser DaloaMarket !"}),e.jsx("br",{}),"Votre paiement a Ã©tÃ© traitÃ© via PayDunya de maniÃ¨re sÃ©curisÃ©e."]})})]})})})},at=()=>{const s=G(),r=te(),i=new URLSearchParams(r.search).get("type"),t=()=>{switch(i){case"pack":return()=>s("/acheter-credits");case"annonce":return()=>s("/create-listing");case"boost":return()=>s("/profile");default:return()=>s("/")}},o=()=>{switch(i){case"pack":return"RÃ©essayer l'achat de crÃ©dits";case"annonce":return"CrÃ©er une nouvelle annonce";case"boost":return"Retour au profil";default:return"Retour Ã  l'accueil"}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-error-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(R,{className:"h-12 w-12 text-error"})}),e.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Paiement annulÃ©"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Votre paiement a Ã©tÃ© annulÃ© ou n'a pas pu Ãªtre traitÃ©. Aucun montant n'a Ã©tÃ© dÃ©bitÃ© de votre compte."}),e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"Que s'est-il passÃ© ?"}),e.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Le paiement a Ã©tÃ© annulÃ© par l'utilisateur"}),e.jsx("li",{children:"â€¢ ProblÃ¨me de connexion avec PayDunya"}),e.jsx("li",{children:"â€¢ Solde insuffisant sur votre compte mobile money"}),e.jsx("li",{children:"â€¢ Timeout de la session de paiement"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx("button",{onClick:t(),className:"btn-primary",children:o()}),e.jsx(q,{to:"/help",className:"btn-outline",children:"Contacter le support"})]}),e.jsx("div",{className:"mt-8 p-4 bg-grey-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-grey-600",children:[e.jsx("strong",{children:"Besoin d'aide ?"}),e.jsx("br",{}),"Si vous rencontrez des difficultÃ©s rÃ©currentes, n'hÃ©sitez pas Ã  nous contacter via la page d'aide."]})})]})})})},lt=({listingId:s,userEmail:r,userPhone:n,userFullName:i,onSuccess:t})=>{const[o,l]=a.useState(i||""),[m,x]=a.useState(r||""),[h,b]=a.useState(n||""),[p,u]=a.useState(null),[N,C]=a.useState(null),[P,y]=a.useState(!1),A=c=>{if(c.target.files&&c.target.files[0]){const v=c.target.files[0];u(v);const g=new FileReader;g.onloadend=()=>C(g.result),g.readAsDataURL(v)}},w=async c=>{if(c.preventDefault(),!o||!m||!h||!p){L.error("Tous les champs sont obligatoires.");return}y(!0);try{const g=await(D=>new Promise((O,J)=>{const Q=new FileReader;Q.readAsDataURL(D),Q.onload=()=>O(Q.result),Q.onerror=le=>J(le)}))(p);let f="/api/send-listing-payment";(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(f="/.netlify/functions/send-listing-payment");let _,I;try{_=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listingId:s,fullName:o,email:m,phone:h,screenshotBase64:g,screenshotFilename:p.name})}),I=await _.json()}catch{L.error(`Erreur rÃ©seau ou API. VÃ©rifiez que la Netlify Function est bien dÃ©ployÃ©e.
DÃ©tail: rÃ©ponse non JSON reÃ§ue.`),y(!1);return}if(!_.ok)throw new Error(I.error||"Erreur lors de l'envoi");L.success("Demande envoyÃ©e, nous validerons votre paiement rapidement !"),t&&t()}catch(v){L.error(v.message||"Erreur lors de l'envoi.")}finally{y(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-8 border border-primary-100 animate-fade-in",children:[e.jsxs("h2",{className:"text-2xl font-bold text-center mb-6 text-primary flex items-center justify-center gap-2",children:[e.jsx("span",{role:"img","aria-label":"paiement",children:"ðŸ’³"})," Paiement de l'annonce"]}),e.jsxs("form",{onSubmit:w,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-grey-800",children:"Nom complet"}),e.jsx("input",{type:"text",className:"input-field w-full rounded-lg border-2 border-primary-100 focus:border-primary-400 transition",value:o,onChange:c=>l(c.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-grey-800",children:"TÃ©lÃ©phone"}),e.jsx("input",{type:"tel",className:"input-field w-full rounded-lg border-2 border-primary-100 focus:border-primary-400 transition",value:h,onChange:c=>b(c.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-semibold text-grey-800",children:"Email"}),e.jsx("input",{type:"email",className:"input-field w-full rounded-lg border-2 border-primary-100 focus:border-primary-400 transition",value:m,onChange:c=>x(c.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 font-semibold text-grey-800",children:["Preuve de paiement ",e.jsx("span",{className:"text-xs text-grey-500",children:"(screenshot)"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:A,required:!0,className:"block w-full text-sm text-grey-700 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary hover:file:bg-primary-100"}),N&&e.jsxs("div",{className:"mt-3 flex flex-col items-center",children:[e.jsx("img",{src:N,alt:"AperÃ§u",className:"rounded-lg shadow-md max-h-40 border border-primary-200"}),e.jsx("span",{className:"text-xs text-grey-500 mt-1",children:"AperÃ§u de la preuve"})]})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full flex items-center justify-center py-3 text-lg font-semibold rounded-xl shadow-card border border-primary-200 bg-primary hover:bg-primary-600 text-white transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:P,children:P?e.jsx(W,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{role:"img","aria-label":"envoyer",children:"ðŸ“¤"})," Envoyer la demande"]})}),P&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("span",{className:"text-primary-600 text-sm animate-pulse",children:"Envoi en cours..."})})]})]})},it=()=>{var x;const{id:s}=Le(),{user:r,userProfile:n}=H(),i=G(),[t,o]=a.useState(!0),[l,m]=a.useState(null);return a.useEffect(()=>{(async()=>{o(!0);try{if(!s)return;const{data:b,error:p}=await k.from("listings").select("*").eq("id",s).single();if(p)throw p;m(b)}catch{L.error("Impossible de charger l'annonce"),i("/")}finally{o(!1)}})()},[s,i]),t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsx(W,{size:"large"})}):l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-warning-50 to-white flex items-center justify-center py-8 px-2",children:e.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-2xl p-8 border border-warning-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-warning-700 mb-2 text-center",children:"Paiement de l'annonce"}),e.jsxs("p",{className:"text-base text-grey-700 mb-6 text-center",children:["Merci de rÃ©gler les frais de publication (200 FCFA) pour activer votre annonce.",e.jsx("br",{}),"Un membre de l'Ã©quipe validera la publication sous 24h."]}),e.jsxs("div",{className:"mb-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl overflow-hidden mb-2 border-2 border-warning-200 flex items-center justify-center bg-grey-50",children:e.jsx("img",{src:((x=l.photos)==null?void 0:x[0])||"https://via.placeholder.com/96",alt:l.title,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"text-lg font-semibold text-grey-900 mb-1",children:l.title}),e.jsx("div",{className:"text-warning-700 font-bold",children:"200 FCFA"})]}),e.jsx(lt,{listingId:l.id,userEmail:(r==null?void 0:r.email)||"",userPhone:(n==null?void 0:n.phone)||"",userFullName:(n==null?void 0:n.full_name)||"",onSuccess:()=>{L.success("Preuve envoyÃ©e, nous validerons votre annonce rapidement !"),i(`/listings/${l.id}`)}}),e.jsxs("div",{className:"mt-6 text-center text-grey-500 text-xs",children:["Besoin d'aide ? Contactez-nous sur WhatsApp ou par email.",e.jsx("br",{}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"underline",children:"support@daloamarket.shop"})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce introuvable"}),e.jsx("button",{className:"btn-primary",onClick:()=>i("/"),children:"Retour Ã  l'accueil"})]})})},nt=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-12",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx(R,{className:"h-16 w-16 text-error-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvÃ©e"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"La page que vous recherchez n'existe pas ou a Ã©tÃ© dÃ©placÃ©e."}),e.jsx(q,{to:"/",className:"btn-primary",children:"Retour Ã  l'accueil"})]})})}),ot=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grey-50",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-error-600",children:"Compte suspendu"}),e.jsx("p",{className:"text-grey-700",children:"Votre compte a Ã©tÃ© suspendu. Contactez le support si vous pensez qu'il s'agit d'une erreur."})]})}),ct=()=>{const[s,r]=a.useState([]),[n,i]=a.useState({}),[t,o]=a.useState({});a.useEffect(()=>{s.length>0&&i(s.reduce((d,S)=>(d[S.id]={credits:S.credits,role:S.role},d),{}))},[s]);const{userProfile:l}=H();a.useEffect(()=>{console.log("DEBUG SUPABASE:",k)},[]);const[m,x]=a.useState(!0),[h,b]=a.useState(null),[p,u]=a.useState([]),[N,C]=a.useState(!0),[P,y]=a.useState(null),[A,w]=a.useState([]),[c,v]=a.useState(!0),[g,f]=a.useState(null),[_,I]=a.useState([]),[D,O]=a.useState(!0),[J,Q]=a.useState(null);a.useEffect(()=>{if(!l||l.role!=="admin")return;(async()=>{x(!0),b(null);try{const{data:S,error:j}=await k.from("users").select("id, email, full_name, role, banned, user_credits(credits)");if(j)throw j;const F=(S||[]).map(Z=>{var z;return{id:Z.id,email:Z.email,full_name:Z.full_name,role:Z.role,banned:Z.banned,credits:((z=Z.user_credits)==null?void 0:z.credits)??0}});r(F)}catch(S){b(S.message||"Erreur lors du chargement des utilisateurs")}finally{x(!1)}})()},[l]),a.useEffect(()=>{if(!l||l.role!=="admin")return;(async()=>{C(!0),y(null);try{const{data:S,error:j}=await k.from("listings").select("id, title, user_id, price, status, created_at").order("created_at",{ascending:!1});if(j)throw j;u(S||[])}catch(S){y(S.message||"Erreur lors du chargement des annonces")}finally{C(!1)}})()},[l]),a.useEffect(()=>{if(!l||l.role!=="admin")return;(async()=>{v(!0),f(null);try{const{data:S,error:j}=await k.from("user_credits").select("user_id, credits, total_earned, total_spent");if(j)throw j;w(S||[])}catch(S){f(S.message||"Erreur lors du chargement des crÃ©dits")}finally{v(!1)}})()},[l]),a.useEffect(()=>{if(!l||l.role!=="admin")return;(async()=>{O(!0),Q(null);try{const{data:S,error:j}=await k.from("transactions").select("id, user_id, amount, type, status, created_at").order("created_at",{ascending:!1});if(j)throw j;I(S||[])}catch(S){Q(S.message||"Erreur lors du chargement des transactions")}finally{O(!1)}})()},[l]);const le=async(d,S)=>{await k.from("users").update({banned:!S}).eq("id",d),r(j=>j.map(F=>F.id===d?{...F,banned:!S}:F))},V=async(d,S)=>{await k.from("user_credits").update({credits:S}).eq("user_id",d),r(j=>j.map(F=>F.id===d?{...F,credits:S}:F))},Y=async(d,S)=>{await k.from("users").update({role:S}).eq("id",d),r(j=>j.map(F=>F.id===d?{...F,role:S}:F))},ie=async d=>{window.confirm("Supprimer cette annonce ?")&&(await k.from("listings").delete().eq("id",d),u(S=>S.filter(j=>j.id!==d)))},xe=async d=>{await k.from("listings").update({status:"disabled"}).eq("id",d),u(S=>S.map(j=>j.id===d?{...j,status:"disabled"}:j))},ue=async d=>{await k.from("listings").update({status:"sold"}).eq("id",d),u(S=>S.map(j=>j.id===d?{...j,status:"sold"}:j))};return!l||l.role!=="admin"?e.jsx(ge,{to:"/",replace:!0}):e.jsxs("div",{className:"min-h-screen bg-grey-50 py-10",children:[e.jsxs("div",{className:"container-custom max-w-5xl bg-white rounded-card shadow-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Tableau de bord Admin"}),e.jsx("p",{className:"mb-4 text-grey-700",children:"GÃ©rez les utilisateurs, bannissements et crÃ©dits."}),h&&e.jsx("div",{className:"text-error-600 mb-4",children:h}),m?e.jsx("div",{children:"Chargement..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"ID (court)"}),e.jsx("th",{className:"p-2",children:"Email"}),e.jsx("th",{className:"p-2",children:"Nom"}),e.jsx("th",{className:"p-2",children:"RÃ´le"}),e.jsx("th",{className:"p-2",children:"Banni"}),e.jsx("th",{className:"p-2",children:"CrÃ©dits"}),e.jsx("th",{className:"p-2",children:"Ajouter un pack"}),e.jsx("th",{className:"p-2",children:"Actions"}),e.jsx("th",{className:"p-2",children:"Sauvegarder"})]})}),e.jsx("tbody",{children:s.map(d=>{var M,U;const S=d.id.slice(0,6)+"..."+d.id.slice(-4),j=[{label:"+3 crÃ©dits (500 FCFA)",value:3,price:500},{label:"+10 crÃ©dits (1500 FCFA)",value:10,price:1500},{label:"+30 crÃ©dits (3500 FCFA)",value:30,price:3500}],F=n[d.id]||{credits:d.credits,role:d.role},Z=X=>{i(K=>({...K,[d.id]:{...F,credits:F.credits+X}}))},z=X=>{i(K=>({...K,[d.id]:{...F,role:X}}))},E=async()=>{o(X=>({...X,[d.id]:{success:void 0,error:void 0}}));try{await V(d.id,F.credits),await Y(d.id,F.role),x(!0),b(null);const{data:X,error:K}=await k.from("users").select("id, email, full_name, role, banned, user_credits(credits)");if(K)throw K;const Ce=(X||[]).map(re=>{var Ue;return{id:re.id,email:re.email,full_name:re.full_name,role:re.role,banned:re.banned,credits:((Ue=re.user_credits)==null?void 0:Ue.credits)??0}});r(Ce),o(re=>({...re,[d.id]:{success:!0}}))}catch(X){b(X.message||"Erreur lors du rechargement"),o(K=>({...K,[d.id]:{error:X.message||"Erreur lors de la sauvegarde"}}))}finally{x(!1),setTimeout(()=>{o(X=>({...X,[d.id]:{}}))},2500)}};return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-mono text-xs",children:S}),e.jsx("td",{className:"p-2",children:d.email}),e.jsx("td",{className:"p-2",children:d.full_name}),e.jsx("td",{className:"p-2",children:e.jsxs("select",{className:"px-2 py-1 rounded border bg-white text-grey-800",value:F.role,onChange:X=>z(X.target.value),"aria-label":"Changer le rÃ´le",children:[e.jsx("option",{value:"user",children:"Utilisateur"}),e.jsx("option",{value:"moderator",children:"ModÃ©rateur"}),e.jsx("option",{value:"admin",children:"Admin"})]})}),e.jsx("td",{className:"p-2",children:d.banned?"Oui":"Non"}),e.jsx("td",{className:"p-2",children:F.credits}),e.jsx("td",{className:"p-2 flex flex-col gap-1",children:j.map(X=>e.jsx("button",{className:"px-2 py-1 rounded bg-blue-100 text-blue-800 border border-blue-300 hover:bg-blue-200",onClick:()=>Z(X.value),children:X.label},X.value))}),e.jsx("td",{className:"p-2 flex gap-2 flex-wrap",children:e.jsx("button",{className:`px-2 py-1 rounded ${d.banned?"bg-green-500":"bg-red-500"} text-white`,onClick:()=>le(d.id,d.banned),children:d.banned?"DÃ©bannir":"Bannir"})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex flex-col gap-1 items-start",children:[e.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:E,children:"Sauvegarder"}),((M=t[d.id])==null?void 0:M.success)&&e.jsx("span",{className:"text-green-600 text-xs",children:"Modifications enregistrÃ©es !"}),((U=t[d.id])==null?void 0:U.error)&&e.jsx("span",{className:"text-red-600 text-xs",children:t[d.id].error})]})})]},d.id)})})]})})]}),e.jsxs("div",{className:"container-custom max-w-5xl bg-white rounded-card shadow-card p-8 mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gestion des annonces"}),P&&e.jsx("div",{className:"text-error-600 mb-4",children:P}),N?e.jsx("div",{children:"Chargement des annonces..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"Titre"}),e.jsx("th",{className:"p-2",children:"ID utilisateur"}),e.jsx("th",{className:"p-2",children:"Prix"}),e.jsx("th",{className:"p-2",children:"Statut"}),e.jsx("th",{className:"p-2",children:"CrÃ©Ã©e le"}),e.jsx("th",{className:"p-2",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(d=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:d.title}),e.jsx("td",{className:"p-2",children:d.user_id}),e.jsxs("td",{className:"p-2",children:[d.price," FCFA"]}),e.jsx("td",{className:"p-2",children:d.status}),e.jsx("td",{className:"p-2",children:new Date(d.created_at).toLocaleString()}),e.jsxs("td",{className:"p-2 flex gap-2 flex-wrap",children:[e.jsx("button",{className:"px-2 py-1 rounded bg-red-500 text-white",onClick:()=>ie(d.id),children:"Supprimer"}),e.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white",onClick:()=>xe(d.id),disabled:d.status==="disabled",children:"DÃ©sactiver"}),e.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white",onClick:()=>ue(d.id),disabled:d.status==="sold",children:"Marquer comme vendue"})]})]},d.id))})]})})]}),e.jsxs("div",{className:"container-custom max-w-5xl bg-white rounded-card shadow-card p-8 mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"CrÃ©dits & Gains utilisateurs"}),g&&e.jsx("div",{className:"text-error-600 mb-4",children:g}),c?e.jsx("div",{children:"Chargement des crÃ©dits..."}):e.jsx("div",{className:"overflow-x-auto mb-8",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"ID utilisateur"}),e.jsx("th",{className:"p-2",children:"CrÃ©dits"}),e.jsx("th",{className:"p-2",children:"Total gagnÃ©"}),e.jsx("th",{className:"p-2",children:"Total dÃ©pensÃ©"})]})}),e.jsx("tbody",{children:A.map(d=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:d.user_id}),e.jsx("td",{className:"p-2",children:d.credits}),e.jsxs("td",{className:"p-2",children:[d.total_earned," FCFA"]}),e.jsxs("td",{className:"p-2",children:[d.total_spent," FCFA"]})]},d.user_id))})]})}),e.jsx("h3",{className:"text-xl font-bold mb-2 mt-8",children:"Historique des transactions"}),J&&e.jsx("div",{className:"text-error-600 mb-4",children:J}),D?e.jsx("div",{children:"Chargement des transactions..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-grey-100",children:[e.jsx("th",{className:"p-2",children:"ID"}),e.jsx("th",{className:"p-2",children:"Utilisateur"}),e.jsx("th",{className:"p-2",children:"Montant"}),e.jsx("th",{className:"p-2",children:"Type"}),e.jsx("th",{className:"p-2",children:"Statut"}),e.jsx("th",{className:"p-2",children:"Date"})]})}),e.jsx("tbody",{children:_.map(d=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:d.id}),e.jsx("td",{className:"p-2",children:d.user_id}),e.jsxs("td",{className:"p-2",children:[d.amount," FCFA"]}),e.jsx("td",{className:"p-2",children:d.type}),e.jsx("td",{className:"p-2",children:d.status}),e.jsx("td",{className:"p-2",children:new Date(d.created_at).toLocaleString()})]},d.id))})]})})]})]})},dt=()=>{const[s,r]=pe.useState(null),n=t=>{r(s===t?null:t)},i=[{question:"Comment fonctionne le paiement des annonces ?",answer:"Le paiement se fait manuellement aprÃ¨s la crÃ©ation de votre annonce. Vous recevrez les instructions Ã  l'Ã©cran. Il n'y a plus de paiement automatique ni de boost."},{question:"Ã€ quoi servent les crÃ©dits ?",answer:"Les crÃ©dits servent uniquement Ã  publier des annonces. Il n'y a plus de boost ni d'autres options payantes."},{question:"Comment acheter des crÃ©dits ?",answer:"Rendez-vous sur la page 'Acheter des crÃ©dits' et suivez les instructions. Le paiement est manuel."},{question:"Puis-je booster mon annonce ?",answer:"Non, la fonctionnalitÃ© de boost a Ã©tÃ© retirÃ©e. Toutes les annonces sont affichÃ©es de faÃ§on Ã©quitable."}];return e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-3xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ DaloaMarket est en ",e.jsx("strong",{children:"phase de test (version bÃªta)"}),". Certaines fonctionnalitÃ©s peuvent Ã©voluer rapidement. Merci pour votre comprÃ©hension et vos retours !"]}),e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Questions frÃ©quentes"}),e.jsx("div",{className:"space-y-4",children:i.map((t,o)=>e.jsxs("div",{className:"border border-grey-200 rounded-lg overflow-hidden transition-shadow duration-300 hover:shadow-lg",children:[e.jsxs("button",{onClick:()=>n(o),className:"w-full flex justify-between items-center p-4 text-left font-medium focus:outline-none","aria-label":`Toggle FAQ ${o+1}: ${t.question}`,children:[e.jsx("span",{children:t.question}),s===o?e.jsx(hs,{className:"h-5 w-5 text-grey-500"}):e.jsx(ps,{className:"h-5 w-5 text-grey-500"})]}),s===o&&e.jsx("div",{className:"p-4 pt-0 text-grey-600 border-t border-grey-200",children:t.answer})]},o))}),e.jsxs("div",{className:"mt-8 p-4 bg-primary-50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Vous avez d'autres questions ?"}),e.jsx("p",{className:"text-grey-600 mb-4",children:"N'hÃ©sitez pas Ã  nous contacter si vous ne trouvez pas la rÃ©ponse Ã  votre question."}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"btn-primary inline-block transition-all duration-300 ease-in-out transform hover:scale-105",children:"Contacter le support"})]}),e.jsxs("div",{className:"mt-8 text-sm text-grey-600 text-center",children:["Besoin d'informations sur le projet ou son crÃ©ateur ? ",e.jsx("a",{href:"/about",className:"text-primary underline",children:"Voir la page Ã€ propos"})]})]})})})},mt=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Conditions d'utilisation"}),e.jsxs("div",{className:"prose max-w-none text-grey-700",children:[e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ Daloa Market est actuellement en ",e.jsx("strong",{children:"phase de test (version bÃªta)"}),".",e.jsx("br",{}),"Cette plateforme Ã©volue rapidement grÃ¢ce Ã  vos retours. Certaines fonctionnalitÃ©s ou conditions peuvent changer sans prÃ©avis.",e.jsx("br",{}),e.jsx("strong",{children:"Aucune structure juridique formelle nâ€™est encore crÃ©Ã©e."})," Lâ€™activitÃ© reste Ã  petite Ã©chelle et sâ€™adapte selon les retours des utilisateurs."]}),e.jsx("p",{children:"Bienvenue sur DaloaMarket. En utilisant notre plateforme, vous acceptez les prÃ©sentes conditions d'utilisation. Veuillez les lire attentivement."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"1. Acceptation des conditions"}),e.jsx("p",{children:"En accÃ©dant Ã  DaloaMarket, vous acceptez d'Ãªtre liÃ© par ces conditions d'utilisation, toutes les lois et rÃ©glementations applicables, et vous acceptez que vous Ãªtes responsable du respect des lois locales applicables. Si vous n'acceptez pas ces conditions, vous ne devez pas utiliser ce site."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"2. Inscription et compte"}),e.jsx("p",{children:"Pour utiliser certaines fonctionnalitÃ©s de DaloaMarket, vous devez crÃ©er un compte. Vous Ãªtes responsable de maintenir la confidentialitÃ© de votre compte et mot de passe et de restreindre l'accÃ¨s Ã  votre ordinateur. Vous acceptez d'assumer la responsabilitÃ© de toutes les activitÃ©s qui se produisent sous votre compte."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"3. Publication d'annonces"}),e.jsxs("p",{children:["Pour publier une annonce sur DaloaMarket, vous devez disposer d'un crÃ©dit ou payer l'annonce Ã  l'unitÃ© (200 FCFA) par paiement manuel. Il n'y a plus de systÃ¨me de boost ou de mise en avant payante.",e.jsx("br",{}),"En publiant une annonce, vous garantissez que :"]}),e.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[e.jsx("li",{children:"Vous Ãªtes le propriÃ©taire lÃ©gitime de l'article ou autorisÃ© Ã  le vendre"}),e.jsx("li",{children:"L'article est lÃ©gal Ã  vendre en CÃ´te d'Ivoire"}),e.jsx("li",{children:"Les informations fournies sont exactes et complÃ¨tes"}),e.jsx("li",{children:"Les photos tÃ©lÃ©chargÃ©es reprÃ©sentent fidÃ¨lement l'article vendu"}),e.jsx("li",{children:"Vous respectez toutes les lois et rÃ©glementations applicables"})]}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"4. Articles interdits"}),e.jsx("p",{children:"Les articles suivants sont interdits sur DaloaMarket :"}),e.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[e.jsx("li",{children:"Produits illÃ©gaux ou contrefaits"}),e.jsx("li",{children:"Armes, explosifs et matÃ©riel dangereux"}),e.jsx("li",{children:"Drogues, mÃ©dicaments sur ordonnance et substances contrÃ´lÃ©es"}),e.jsx("li",{children:"Produits Ã  caractÃ¨re pornographique"}),e.jsx("li",{children:"Animaux vivants"}),e.jsx("li",{children:"Services illÃ©gaux ou contraires Ã  l'Ã©thique"}),e.jsx("li",{children:"Tout autre article interdit par la loi ivoirienne"})]}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"5. CrÃ©dits, frais et paiements"}),e.jsx("h2",{children:"1. Fonctionnement gÃ©nÃ©ral"}),e.jsx("p",{children:"DaloaMarket est une plateforme de mise en relation entre particuliers pour l'achat et la vente d'articles d'occasion Ã  Daloa. Les utilisateurs peuvent publier des annonces en utilisant des crÃ©dits. Le paiement de la publication se fait manuellement aprÃ¨s crÃ©ation de l'annonce. Il n'y a plus de boost ni de paiement automatique."}),e.jsx("h2",{children:"2. CrÃ©dits"}),e.jsx("p",{children:"Les crÃ©dits servent uniquement Ã  publier des annonces. Ils sont achetÃ©s manuellement via les moyens de paiement proposÃ©s (Mobile Money, etc.). Aucun crÃ©dit n'est remboursÃ© en cas de suppression d'annonce."}),e.jsx("h2",{children:"3. Paiement"}),e.jsx("p",{children:"Le paiement des crÃ©dits et des annonces se fait uniquement de faÃ§on manuelle. Aucune transaction automatique n'est effectuÃ©e par la plateforme. Les transactions entre acheteurs et vendeurs se font en personne, sans intervention de DaloaMarket."}),e.jsx("h2",{children:"4. Suppression des boosts"}),e.jsx("p",{children:"La fonctionnalitÃ© de boost d'annonce a Ã©tÃ© retirÃ©e. Toutes les annonces sont affichÃ©es de faÃ§on Ã©quitable."}),e.jsx("h2",{children:"5. ResponsabilitÃ©"}),e.jsx("p",{children:"DaloaMarket n'est pas responsable des transactions entre utilisateurs. Les utilisateurs doivent rester vigilants lors des Ã©changes."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"6. Transactions entre utilisateurs"}),e.jsx("p",{children:"DaloaMarket est une plateforme qui met en relation acheteurs et vendeurs. Nous ne sommes pas partie aux transactions entre utilisateurs et n'assumons aucune responsabilitÃ© pour les problÃ¨mes pouvant survenir lors de ces transactions. Nous recommandons aux utilisateurs de prendre les prÃ©cautions nÃ©cessaires lors des rencontres en personne et des Ã©changes d'argent."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"7. PropriÃ©tÃ© intellectuelle"}),e.jsx("p",{children:"Le contenu de DaloaMarket, y compris les textes, graphiques, logos, images, ainsi que leur compilation, est la propriÃ©tÃ© de DaloaMarket et est protÃ©gÃ© par les lois sur le droit d'auteur et la propriÃ©tÃ© intellectuelle. Vous ne pouvez pas reproduire, dupliquer, copier, vendre, revendre ou exploiter une partie du service sans autorisation expresse Ã©crite."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"8. Limitation de responsabilitÃ©"}),e.jsx("p",{children:"DaloaMarket ne garantit pas que le service sera ininterrompu, opportun, sÃ©curisÃ© ou sans erreur. DaloaMarket ne sera pas responsable des dommages directs, indirects, accessoires, spÃ©ciaux ou consÃ©cutifs rÃ©sultant de l'utilisation ou de l'impossibilitÃ© d'utiliser le service."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"9. Modifications des conditions"}),e.jsx("p",{children:"DaloaMarket se rÃ©serve le droit de modifier ces conditions d'utilisation Ã  tout moment. Les modifications entrent en vigueur dÃ¨s leur publication sur le site. Il est de votre responsabilitÃ© de consulter rÃ©guliÃ¨rement ces conditions."}),e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:"10. Loi applicable"}),e.jsx("p",{children:"Ces conditions sont rÃ©gies par les lois de la RÃ©publique de CÃ´te d'Ivoire. Tout litige relatif Ã  l'utilisation de DaloaMarket sera soumis Ã  la compÃ©tence exclusive des tribunaux d'Abidjan."}),e.jsx("p",{className:"mt-8",children:"Date de derniÃ¨re mise Ã  jour : 11 AoÃ»t 2025"})]})]})})}),xt=()=>e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Politique de confidentialitÃ©"}),e.jsxs("div",{className:"prose max-w-none text-grey-700",children:[e.jsx("h2",{children:"Collecte des donnÃ©es"}),e.jsx("p",{children:"Nous collectons uniquement les informations nÃ©cessaires Ã  la crÃ©ation de votre compte et Ã  la publication d'annonces (nom, email, tÃ©lÃ©phone, quartier)."}),e.jsx("h2",{children:"Utilisation des donnÃ©es"}),e.jsx("p",{children:"Vos donnÃ©es sont utilisÃ©es uniquement pour le fonctionnement de la plateforme. Aucun partage Ã  des tiers, aucun usage commercial externe."}),e.jsx("h2",{children:"Paiement"}),e.jsx("p",{children:"Les paiements sont rÃ©alisÃ©s manuellement. Aucune donnÃ©e bancaire n'est collectÃ©e ni stockÃ©e par DaloaMarket."}),e.jsx("h2",{children:"Suppression des donnÃ©es"}),e.jsx("p",{children:"Vous pouvez demander la suppression de votre compte et de vos donnÃ©es Ã  tout moment via le support."})]})]})})}),ut=()=>{const{user:s,userProfile:r,updateUserProfile:n}=H(),i=G(),[t,o]=a.useState(!1),{register:l,handleSubmit:m,formState:{errors:x,isDirty:h}}=be({defaultValues:{full_name:(r==null?void 0:r.full_name)||"",phone:(r==null?void 0:r.phone)||"",district:(r==null?void 0:r.district)||""}}),b=async p=>{o(!0);try{const{error:u}=await n({full_name:p.full_name,phone:p.phone,district:p.district});if(u)throw u;L.success("Profil mis Ã  jour avec succÃ¨s"),i("/profile")}catch(u){console.error("Profile update error:",u),L.error(u.message||"Erreur lors de la mise Ã  jour du profil")}finally{o(!1)}};return r?e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsx("div",{className:"container-custom max-w-2xl",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 md:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"ParamÃ¨tres du compte"}),e.jsxs("form",{onSubmit:m(b),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:"input-field bg-grey-50",value:(s==null?void 0:s.email)||"",disabled:!0}),e.jsx("p",{className:"text-xs text-grey-500 mt-1",children:"L'email ne peut pas Ãªtre modifiÃ©"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full_name",className:"input-label",children:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"full_name",type:"text",className:`input-field pl-10 ${x.full_name?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre nom complet",...l("full_name",{required:"Le nom complet est requis",minLength:{value:3,message:"Le nom doit contenir au moins 3 caractÃ¨res"}}),disabled:t}),e.jsx(se,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.full_name&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),x.full_name.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"input-label",children:"NumÃ©ro de tÃ©lÃ©phone"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"phone",type:"tel",className:`input-field pl-10 ${x.phone?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"+225 XX XX XX XX XX",...l("phone",{required:"Le numÃ©ro de tÃ©lÃ©phone est requis",validate:p=>ss(p)||"Veuillez entrer un numÃ©ro de tÃ©lÃ©phone ivoirien valide"}),disabled:t}),e.jsx(fe,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.phone&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),x.phone.message]}),e.jsx("p",{className:"text-xs text-grey-500 mt-1",children:"Format: +225 XX XX XX XX XX ou 07 XX XX XX XX"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"district",className:"input-label",children:"Quartier Ã  Daloa"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"district",className:`input-field pl-10 ${x.district?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,...l("district",{required:"Le quartier est requis"}),disabled:t,children:[e.jsx("option",{value:"",children:"SÃ©lectionnez votre quartier"}),qe.map(p=>e.jsx("option",{value:p,children:p},p))]}),e.jsx(me,{className:"absolute left-3 top-3.5 h-5 w-5 text-grey-400"})]}),x.district&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),x.district.message]})]}),e.jsxs("div",{className:"flex justify-end pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i("/profile"),className:"btn-outline mr-3",disabled:t,children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:t||!h,children:t?e.jsx(W,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"h-5 w-5 mr-2"}),"Enregistrer"]})})]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx(W,{size:"large"})})},ht=()=>{const[s,r]=a.useState(!1),[n,i]=a.useState(!1),{register:t,handleSubmit:o,reset:l,formState:{errors:m}}=be(),x=async()=>{r(!0);try{await new Promise(h=>setTimeout(h,1500)),L.success("Message envoyÃ© avec succÃ¨s"),i(!0),l()}catch(h){console.error("Error sending message:",h),L.error("Erreur lors de l'envoi du message")}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-8",children:e.jsxs("div",{className:"container-custom max-w-6xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Aide & Support"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Contactez-nous"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(Se,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email"}),e.jsx("a",{href:"mailto:support@daloamarket.shop",className:"text-grey-600 hover:text-primary",children:"support@daloamarket.shop"})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(fe,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"TÃ©lÃ©phones"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("a",{href:"tel:+2250788000831",className:"text-grey-600 hover:text-primary block",children:"+225 07 88 00 08 31 (Orange/Wave)"}),e.jsx("a",{href:"tel:+2250555863953",className:"text-grey-600 hover:text-primary block",children:"+225 05 55 86 39 53 (MTN)"})]})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Adresse"}),e.jsxs("p",{className:"text-grey-600",children:["Quartier Lobia",e.jsx("br",{}),"Daloa, CÃ´te d'Ivoire"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Liens utiles"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(q,{to:"/faq",className:"text-grey-600 hover:text-primary transition-colors",children:"Questions frÃ©quentes"})}),e.jsx("li",{children:e.jsx(q,{to:"/terms",className:"text-grey-600 hover:text-primary transition-colors",children:"Conditions d'utilisation"})}),e.jsx("li",{children:e.jsx(q,{to:"/privacy",className:"text-grey-600 hover:text-primary transition-colors",children:"Politique de confidentialitÃ©"})})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Envoyez-nous un message"}),e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border-l-4 border-orange-500 text-orange-800 rounded",children:["âš ï¸ Daloa Market est actuellement en ",e.jsx("strong",{children:"phase de test (version bÃªta)"}),".",e.jsx("br",{}),"Cette plateforme Ã©volue rapidement grÃ¢ce Ã  vos retours. Certaines fonctionnalitÃ©s ou conditions peuvent changer sans prÃ©avis.",e.jsx("br",{}),e.jsx("strong",{children:"Aucune structure juridique formelle n'est encore crÃ©Ã©e."})," L'activitÃ© reste Ã  petite Ã©chelle et s'adapte selon les retours des utilisateurs."]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"h-16 w-16 bg-success-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Me,{className:"h-8 w-8 text-success"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Message envoyÃ© !"}),e.jsx("p",{className:"text-grey-600 mb-6",children:"Merci de nous avoir contactÃ©s. Nous vous rÃ©pondrons dans les plus brefs dÃ©lais."}),e.jsx("button",{onClick:()=>i(!1),className:"btn-primary",children:"Envoyer un autre message"})]}):e.jsxs("form",{onSubmit:o(x),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"input-label",children:"Nom complet"}),e.jsx("input",{id:"name",type:"text",className:`input-field ${m.name?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre nom",...t("name",{required:"Le nom est requis"}),disabled:s}),m.name&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),m.name.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsx("input",{id:"email",type:"email",className:`input-field ${m.email?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"votre@email.com",...t("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),disabled:s}),m.email&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),m.email.message]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"input-label",children:"Sujet"}),e.jsx("input",{id:"subject",type:"text",className:`input-field ${m.subject?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Sujet de votre message",...t("subject",{required:"Le sujet est requis"}),disabled:s}),m.subject&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),m.subject.message]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"input-label",children:"Message"}),e.jsx("textarea",{id:"message",rows:6,className:`input-field ${m.message?"border-error-500 focus:ring-error-500 focus:border-error-500":""}`,placeholder:"Votre message...",...t("message",{required:"Le message est requis",minLength:{value:10,message:"Le message doit contenir au moins 10 caractÃ¨res"}}),disabled:s}),m.message&&e.jsxs("p",{className:"input-error flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),m.message.message]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:s,children:s?e.jsx(W,{size:"small",className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-5 w-5 mr-2"}),"Envoyer le message"]})})})]})]})})]})]})})},pt=()=>{const r=te().hash,n=new URLSearchParams(r.replace("#","")),i=n.get("error"),t=n.get("error_description"),[o,l]=pe.useState(!1),[m,x]=pe.useState(!1),[h,b]=pe.useState(!1),[p,u]=pe.useState(150),N=G(),{refreshUserProfile:C}=H();pe.useEffect(()=>{(async()=>{var y,A,w;try{const c=k.auth;if(typeof c.getSessionFromUrl=="function"){const g=await c.getSessionFromUrl({storeSession:!0});if((A=(y=g==null?void 0:g.data)==null?void 0:y.session)!=null&&A.user){await C(),N("/complete-profile");return}}const{data:v}=await k.auth.getSession();(w=v.session)!=null&&w.user&&(await C(),N("/complete-profile"))}catch(c){console.warn("No session available after email confirmation or error parsing URL session:",c)}})()},[N,C]),pe.useEffect(()=>{if(i){l(!1),u(150);const y=setInterval(()=>{u(A=>A<=1?(clearInterval(y),l(!0),0):A-1)},1e3);return()=>clearInterval(y)}},[i]);const P=async()=>{x(!0),await new Promise(y=>setTimeout(y,1200)),x(!1),b(!0)};return e.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-card shadow-card p-8 max-w-md w-full text-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-16 w-16 text-error-500 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Lien invalide ou expirÃ©"}),e.jsx("p",{className:"text-grey-700 mb-4",children:decodeURIComponent(t||"Le lien de confirmation est invalide ou a expirÃ©. Vous pouvez demander un nouveau lien ou vous inscrire Ã  nouveau.")}),e.jsx(q,{to:"/login",className:"btn-primary w-full mb-3",children:"Retour Ã  la connexion"}),o&&!h&&e.jsx("button",{className:"btn-outline w-full",onClick:P,disabled:m,children:m?"Envoi en cours...":"Renvoyer l'email de confirmation"}),h&&e.jsx("div",{className:"text-success-700 mt-2 text-sm",children:"Email de confirmation renvoyÃ© !"}),!o&&e.jsxs("div",{className:"text-grey-500 mt-2 text-xs",children:["Vous pourrez demander un nouvel email dans ",Math.floor(p/60),":",(p%60).toString().padStart(2,"0"),"."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-16 w-16 text-success mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Email confirmÃ© !"}),e.jsx("p",{className:"text-grey-700 mb-4",children:"Votre adresse email a bien Ã©tÃ© confirmÃ©e. Vous pouvez maintenant vous connecter et profiter de DaloaMarket."}),e.jsx(q,{to:"/login",className:"btn-primary w-full",children:"Revenir sur DaloaMarket"})]})})})},Be=[{id:"starter",name:"Starter",credits:3,price:500,description:"Pour publier vos premiÃ¨res annonces",popular:!1},{id:"regular",name:"Regular",credits:10,price:1500,description:"Le plus populaire pour publier plusieurs annonces",popular:!0},{id:"pro",name:"Pro",credits:30,price:3500,description:"Pour publier beaucoup dâ€™annonces",popular:!1}],Oe=()=>{const{user:s}=H(),r=G(),[n,i]=a.useState("explanation"),[t,o]=a.useState(!1),[l,m]=a.useState({selectedPack:"",phoneNumber:"",email:(s==null?void 0:s.email)||"",fullName:"",screenshot:null}),x=u=>{var C;const N=(C=u.target.files)==null?void 0:C[0];if(N){if(N.size>5*1024*1024){L.error("Le fichier ne doit pas dÃ©passer 5MB");return}if(!N.type.startsWith("image/")){L.error("Veuillez sÃ©lectionner une image");return}m(P=>({...P,screenshot:N}))}},h=u=>new Promise((N,C)=>{const P=new FileReader;P.readAsDataURL(u),P.onload=()=>N(P.result),P.onerror=y=>C(y)}),b=async u=>{if(u.preventDefault(),!l.selectedPack||!l.phoneNumber||!l.email||!l.fullName||!l.screenshot){L.error("Veuillez remplir tous les champs");return}o(!0);try{const N=await h(l.screenshot),C=await fetch("/.netlify/functions/send-credit-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedPack:l.selectedPack,phoneNumber:l.phoneNumber,email:l.email,fullName:l.fullName,screenshotBase64:N,screenshotFilename:l.screenshot.name})}),P=await C.json();if(!C.ok)throw new Error(P.error||"Erreur lors de l'envoi");L.success("Demande envoyÃ©e avec succÃ¨s !"),i("success")}catch(N){console.error("Erreur:",N),L.error(N instanceof Error?N.message:"Erreur lors de l'envoi")}finally{o(!1)}},p=Be.find(u=>u.id===l.selectedPack);return n==="explanation"?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(oe,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Acheter des crÃ©dits"})]})}),e.jsxs("div",{className:"container-custom py-4 lg:py-8",children:[e.jsxs("div",{className:"hidden lg:block mb-8",children:[e.jsxs("button",{onClick:()=>r(-1),className:"flex items-center text-grey-600 hover:text-grey-900 transition-colors mb-4",children:[e.jsx(oe,{className:"h-5 w-5 mr-2"}),"Retour"]}),e.jsx("h1",{className:"text-3xl font-bold text-grey-900",children:"Acheter des crÃ©dits"})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-lg lg:shadow-xl p-6 lg:p-8 mb-6",children:[e.jsxs("div",{className:"text-center mb-6 lg:mb-8",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-orange-100 to-orange-200 rounded-2xl lg:rounded-3xl flex items-center justify-center mx-auto mb-4 lg:mb-6",children:e.jsx(fs,{className:"h-8 w-8 lg:h-10 lg:w-10 text-orange-600"})}),e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-3 lg:mb-4",children:"Processus d'achat avec envoi automatique"}),e.jsx("p",{className:"text-grey-600 text-base lg:text-lg leading-relaxed",children:"Effectuez votre paiement puis envoyez-nous la preuve. Votre demande sera traitÃ©e automatiquement par email."})]}),e.jsxs("div",{className:"space-y-4 lg:space-y-6 mb-6 lg:mb-8",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm lg:text-base",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-grey-900 mb-1 lg:mb-2",children:"Choisissez votre pack"}),e.jsx("p",{className:"text-grey-600 text-sm lg:text-base",children:"SÃ©lectionnez le nombre de crÃ©dits souhaitÃ©"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm lg:text-base",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-grey-900 mb-1 lg:mb-2",children:"Effectuez le paiement"}),e.jsx("p",{className:"text-grey-600 text-sm lg:text-base",children:"Envoyez le montant via :"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-grey-700 font-medium text-sm lg:text-base",children:[e.jsx("strong",{children:"Orange Money/Wave :"})," +225 07 88 00 08 31"]}),e.jsxs("p",{className:"text-grey-700 font-medium text-sm lg:text-base",children:[e.jsx("strong",{children:"MTN Mobile Money :"})," +225 05 55 86 39 53"]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm lg:text-base",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-grey-900 mb-1 lg:mb-2",children:"Envoyez les preuves automatiquement"}),e.jsx("p",{className:"text-grey-600 text-sm lg:text-base",children:"TÃ©lÃ©chargez votre capture d'Ã©cran et remplissez le formulaire. Un email sera envoyÃ© automatiquement Ã  notre Ã©quipe."})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-orange-50 rounded-xl lg:rounded-2xl p-4 lg:p-6 mb-6 lg:mb-8",children:[e.jsxs("h3",{className:"font-semibold text-primary-800 mb-3 lg:mb-4 flex items-center",children:[e.jsx(fe,{className:"h-5 w-5 mr-2"}),"Informations de paiement"]}),e.jsxs("div",{className:"space-y-2 text-sm lg:text-base",children:[e.jsxs("p",{className:"text-primary-700",children:[e.jsx("strong",{children:"Orange Money/Wave :"})," +225 07 88 00 08 31"]}),e.jsxs("p",{className:"text-primary-700",children:[e.jsx("strong",{children:"MTN Mobile Money :"})," +225 05 55 86 39 53"]})]})]}),e.jsx("button",{onClick:()=>i("form"),className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:from-primary-600 hover:to-orange-600 transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl text-base lg:text-lg",children:"Continuer vers l'achat"})]})})]})]}):n==="form"?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100",children:[e.jsx("div",{className:"lg:hidden bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>i("explanation"),className:"p-2 -ml-2 rounded-xl hover:bg-grey-100 transition-colors",children:e.jsx(oe,{className:"h-5 w-5 text-grey-600"})}),e.jsx("h1",{className:"ml-3 text-lg font-semibold text-grey-900",children:"Formulaire d'achat"})]})}),e.jsxs("div",{className:"container-custom py-4 lg:py-8",children:[e.jsxs("div",{className:"hidden lg:block mb-8",children:[e.jsxs("button",{onClick:()=>i("explanation"),className:"flex items-center text-grey-600 hover:text-grey-900 transition-colors mb-4",children:[e.jsx(oe,{className:"h-5 w-5 mr-2"}),"Retour"]}),e.jsx("h1",{className:"text-3xl font-bold text-grey-900",children:"Formulaire d'achat"})]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-lg lg:shadow-xl p-6 lg:p-8 mb-6",children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-4 lg:mb-6",children:"Choisissez votre pack"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:Be.map(u=>e.jsxs("div",{onClick:()=>m(N=>({...N,selectedPack:u.id})),className:`relative cursor-pointer rounded-xl lg:rounded-2xl border-2 p-4 lg:p-6 transition-all duration-200 transform hover:scale-105 ${l.selectedPack===u.id?"border-primary bg-primary-50 shadow-lg":"border-grey-200 bg-white hover:border-primary-200 hover:shadow-md"}`,children:[u.popular&&e.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"POPULAIRE"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-bold text-lg lg:text-xl text-grey-900 mb-2",children:u.name}),e.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-primary mb-2",children:u.credits}),e.jsx("div",{className:"text-sm text-grey-600 mb-2",children:"crÃ©dits"}),e.jsxs("div",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-2",children:[u.price," FCFA"]}),e.jsx("div",{className:"text-xs lg:text-sm text-grey-500",children:u.description})]}),l.selectedPack===u.id&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(_e,{className:"h-5 w-5 lg:h-6 lg:w-6 text-primary"})})]},u.id))})]}),l.selectedPack&&e.jsxs("form",{onSubmit:b,className:"bg-white rounded-2xl lg:rounded-3xl shadow-lg lg:shadow-xl p-6 lg:p-8",children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-4 lg:mb-6",children:"Informations de transaction"}),e.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-orange-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-primary-800",children:"Pack sÃ©lectionnÃ©"}),e.jsxs("p",{className:"text-primary-700",children:[p==null?void 0:p.name," - ",p==null?void 0:p.credits," crÃ©dits"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[p==null?void 0:p.price," FCFA"]})})]})}),e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"Capture d'Ã©cran de la transaction *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",id:"screenshot-upload",required:!0}),e.jsx("label",{htmlFor:"screenshot-upload",className:`flex flex-col items-center justify-center w-full h-32 lg:h-40 border-2 border-dashed rounded-xl lg:rounded-2xl cursor-pointer transition-colors ${l.screenshot?"border-primary bg-primary-50":"border-grey-300 bg-grey-50 hover:border-primary hover:bg-primary-50"}`,children:l.screenshot?e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"h-8 w-8 lg:h-10 lg:w-10 text-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm lg:text-base font-medium text-primary",children:l.screenshot.name}),e.jsx("p",{className:"text-xs lg:text-sm text-grey-600",children:"Cliquez pour changer"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"h-8 w-8 lg:h-10 lg:w-10 text-grey-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm lg:text-base font-medium text-grey-600",children:"TÃ©lÃ©charger la capture"}),e.jsx("p",{className:"text-xs lg:text-sm text-grey-500",children:"PNG, JPG jusqu'Ã  5MB"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"NumÃ©ro qui a Ã©tÃ© dÃ©bitÃ© *"}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-grey-400"}),e.jsx("input",{type:"tel",id:"phone",value:l.phoneNumber,onChange:u=>m(N=>({...N,phoneNumber:u.target.value})),className:"w-full pl-10 pr-4 py-3 lg:py-4 border border-grey-300 rounded-xl lg:rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-base lg:text-lg",placeholder:"+225 XX XX XX XX XX",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-grey-400"}),e.jsx("input",{type:"email",id:"email",value:l.email,onChange:u=>m(N=>({...N,email:u.target.value})),className:"w-full pl-10 pr-4 py-3 lg:py-4 border border-grey-300 rounded-xl lg:rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-base lg:text-lg",placeholder:"votre@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm lg:text-base font-semibold text-grey-700 mb-2 lg:mb-3",children:"Nom complet *"}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-grey-400"}),e.jsx("input",{type:"text",id:"fullName",value:l.fullName,onChange:u=>m(N=>({...N,fullName:u.target.value})),className:"w-full pl-10 pr-4 py-3 lg:py-4 border border-grey-300 rounded-xl lg:rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary transition-colors text-base lg:text-lg",placeholder:"Votre nom complet",required:!0})]})]})]}),e.jsx("div",{className:"mt-6 lg:mt-8",children:e.jsx("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:from-primary-600 hover:to-orange-600 transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-base lg:text-lg flex items-center justify-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx(W,{size:"small",className:"text-white mr-2"}),"Envoi en cours..."]}):"Envoyer la demande"})}),e.jsx("div",{className:"mt-4 lg:mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(R,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm lg:text-base text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Traitement automatique"}),e.jsx("p",{children:"Votre demande sera envoyÃ©e automatiquement par email Ã  notre Ã©quipe. Vous recevrez une confirmation dans les 24h."})]})]})})]})]})]})]}):n==="success"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-grey-50 to-grey-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl lg:rounded-3xl shadow-xl p-6 lg:p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center mx-auto mb-4 lg:mb-6",children:e.jsx(_e,{className:"h-8 w-8 lg:h-10 lg:w-10 text-green-600"})}),e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-grey-900 mb-3 lg:mb-4",children:"Demande envoyÃ©e !"}),e.jsx("p",{className:"text-grey-600 mb-6 lg:mb-8 text-base lg:text-lg leading-relaxed",children:"Votre demande d'achat de crÃ©dits a Ã©tÃ© envoyÃ©e automatiquement par email Ã  notre Ã©quipe. Vous recevrez une confirmation dans les 24h."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>r("/profile"),className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:from-primary-600 hover:to-orange-600 transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl text-base lg:text-lg",children:"Retour au profil"}),e.jsx("button",{onClick:()=>r("/"),className:"w-full border-2 border-grey-300 text-grey-700 font-semibold py-3 lg:py-4 px-6 rounded-xl lg:rounded-2xl hover:border-grey-400 hover:bg-grey-50 transition-all duration-200 text-base lg:text-lg",children:"Retour Ã  l'accueil"})]})]})}):null},gt=()=>{const{user:s}=H(),r=G(),n=i=>{s||(i.preventDefault(),r("/login",{replace:!0,state:{from:"/acheter-credits"}}))};return e.jsx("div",{className:"min-h-screen bg-grey-50 py-10",children:e.jsxs("div",{className:"container-custom max-w-2xl bg-white rounded-card shadow-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Comment Ã§a marche ?"}),e.jsxs("ol",{className:"space-y-8 mt-8",children:[e.jsxs("li",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"1. CrÃ©ez votre annonce"}),e.jsx("p",{className:"text-grey-700",children:"Prenez des photos, dÃ©crivez votre article, fixez votre prix et publiez. Le paiement de la publication se fait manuellement aprÃ¨s crÃ©ation. Vous pouvez ajouter plusieurs photos pour attirer plus dâ€™acheteurs."})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"2. Discutez avec les acheteurs"}),e.jsx("p",{className:"text-grey-700",children:"Recevez des messages et rÃ©pondez via notre messagerie sÃ©curisÃ©e. Pas de boost, pas de paiement automatique. Vous pouvez nÃ©gocier, poser des questions et convenir dâ€™un rendez-vous."})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"3. Vendez en toute simplicitÃ©"}),e.jsx("p",{className:"text-grey-700",children:"Rencontrez lâ€™acheteur dans votre quartier en toute sÃ©curitÃ©. Le paiement se fait directement entre vous et lâ€™acheteur, sans intermÃ©diaire."})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Conseils pour rÃ©ussir vos ventes"}),e.jsxs("ul",{className:"list-disc pl-6 text-grey-700 space-y-2",children:[e.jsx("li",{children:"Ajoutez des photos claires et rÃ©centes de votre article."}),e.jsx("li",{children:"DÃ©crivez prÃ©cisÃ©ment lâ€™Ã©tat, la marque, la taille, etc."}),e.jsx("li",{children:"RÃ©pondez rapidement aux messages pour ne pas rater une vente."}),e.jsx("li",{children:"PrivilÃ©giez les lieux publics pour les rendez-vous."}),e.jsx("li",{children:"Ne partagez jamais vos informations sensibles."})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Questions frÃ©quentes"}),e.jsxs("ul",{className:"list-disc pl-6 text-grey-700 space-y-2",children:[e.jsxs("li",{children:["Comment acheter des crÃ©ditsÂ ?"," ",e.jsxs("span",{className:"text-grey-500",children:[e.jsx(q,{to:"/acheter-credits",onClick:n,className:"text-primary underline hover:text-primary-700 font-medium",children:'AccÃ©der Ã  la page "Acheter des crÃ©dits"'})," ","(dans votre profil)"]})]}),e.jsxs("li",{children:["Comment signaler un utilisateurÂ ?"," ",e.jsx("span",{className:"text-grey-500",children:'Utilisez le bouton "Signaler" sur le profil ou la conversation.'})]}),e.jsxs("li",{children:["Que faire en cas de problÃ¨meÂ ?"," ",e.jsx("span",{className:"text-grey-500",children:e.jsx(q,{to:"/help",className:"text-primary underline hover:text-primary-700 font-medium",children:"Contactez le support via la page Aide"})})]})]})]})]})})};function ft(){const s=te(),{user:r,userProfile:n}=H();return n&&n.banned?e.jsx(ge,{to:"/banned",replace:!0}):e.jsx(Ss,{mode:"wait",children:e.jsxs(bs,{location:s,children:[e.jsx($,{path:"/admin",element:e.jsx(ct,{})}),e.jsx($,{path:"/",element:e.jsx(T,{children:e.jsx($s,{})})}),e.jsx($,{path:"/login",element:r?e.jsx(ge,{to:"/",replace:!0}):e.jsx(T,{children:e.jsx(Ts,{})})}),e.jsx($,{path:"/register",element:r?e.jsx(ge,{to:"/",replace:!0}):e.jsx(T,{children:e.jsx(Bs,{})})}),e.jsx($,{path:"/auth/reset-password",element:e.jsx(T,{children:e.jsx(Os,{})})}),e.jsx($,{path:"/auth/update-password",element:e.jsx(T,{children:e.jsx(Ws,{})})}),e.jsx($,{path:"/complete-profile",element:e.jsx(T,{children:e.jsx(ne,{children:n&&n.full_name&&n.phone&&n.district?e.jsx(ge,{to:"/",replace:!0}):e.jsx(Qs,{})})})}),e.jsx($,{path:"/email-confirmed",element:e.jsx(T,{children:e.jsx(pt,{})})}),e.jsx($,{path:"/create-listing",element:e.jsx(T,{children:e.jsx(ne,{requireProfile:!0,children:e.jsx(Js,{})})})}),e.jsx($,{path:"/listings/:id",element:e.jsx(T,{children:e.jsx(Ks,{})})}),e.jsx($,{path:"/search",element:e.jsx(T,{children:e.jsx(et,{})})}),e.jsx($,{path:"/messages",element:e.jsx(T,{children:e.jsx(ne,{requireProfile:!0,children:e.jsx(st,{})})})}),e.jsx($,{path:"/acheter-credits",element:e.jsx(T,{children:e.jsx(ne,{children:e.jsx(Oe,{})})})}),e.jsx($,{path:"/messages/:listingId/:userId",element:e.jsx(T,{children:e.jsx(ne,{requireProfile:!0,children:e.jsx(tt,{})})})}),e.jsx($,{path:"/profile",element:e.jsx(T,{children:e.jsx(ne,{requireProfile:!0,children:e.jsx(Gs,{})})})}),e.jsx($,{path:"/profile/seller/:sellerId",element:e.jsx(T,{children:e.jsx(Hs,{})})}),e.jsx($,{path:"/settings",element:e.jsx(T,{children:e.jsx(ne,{requireProfile:!0,children:e.jsx(ut,{})})})}),e.jsx($,{path:"/paiement-annonce/:id",element:e.jsx(T,{children:e.jsx(it,{})})}),e.jsx($,{path:"/payment/success",element:e.jsx(T,{children:e.jsx(rt,{})})}),e.jsx($,{path:"/payment/failure",element:e.jsx(T,{children:e.jsx(at,{})})}),e.jsx($,{path:"/about",element:e.jsx(T,{children:e.jsx(Vs,{})})}),e.jsx($,{path:"/faq",element:e.jsx(T,{children:e.jsx(dt,{})})}),e.jsx($,{path:"/terms",element:e.jsx(T,{children:e.jsx(mt,{})})}),e.jsx($,{path:"/privacy",element:e.jsx(T,{children:e.jsx(xt,{})})}),e.jsx($,{path:"/help",element:e.jsx(T,{children:e.jsx(ht,{})})}),e.jsx($,{path:"/how-it-works",element:e.jsx(T,{children:e.jsx(gt,{})})}),e.jsx($,{path:"/acheter-credits",element:e.jsx(T,{children:e.jsx(ne,{requireProfile:!0,children:e.jsx(Oe,{})})})}),e.jsx($,{path:"/banned",element:e.jsx(ot,{})}),e.jsx($,{path:"*",element:e.jsx(T,{children:e.jsx(nt,{})})})]},s.pathname)})}const We=console.warn.bind(console);console.warn=(...s)=>{try{if(s&&s.length>0&&typeof s[0]=="string"){const r=s[0];if(r.includes("React Router Future Flag Warning")||r.includes("v7_startTransition")||r.includes("v7_relativeSplatPath"))return}}catch{We(...s);return}We(...s)};js.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(ys,{children:e.jsxs(_s,{children:[e.jsx(ft,{}),e.jsx(vs,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#FFFFFF",color:"#1F2937",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},success:{iconTheme:{primary:"#10B981",secondary:"#FFFFFF"}},error:{iconTheme:{primary:"#EF4444",secondary:"#FFFFFF"}}}})]})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(()=>{}).catch(()=>{})});
